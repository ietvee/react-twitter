/*! For license information please see main.ef729a47.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var h=0;h<s.length;h++)r.call(o,s[h])&&(u[s[h]]=o[s[h]])}}return u}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=60103,x=60106,E=60107,I=60108,T=60114,S=60109,C=60110,N=60112,P=60113,A=60120,R=60115,D=60116,O=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;b=V("react.element"),x=V("react.portal"),E=V("react.fragment"),I=V("react.strict_mode"),T=V("react.profiler"),S=V("react.provider"),C=V("react.context"),N=V("react.forward_ref"),P=V("react.suspense"),A=V("react.suspense_list"),R=V("react.memo"),D=V("react.lazy"),O=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var j,q="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var W=!1;function K(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function G(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case T:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return H(e.type);case O:return H(e._render);case D:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Pe(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Ae(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Re(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function De(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=De,Fe=!1,Ue=!1;function Ve(){null===Ce&&null===Ne||(Le(),Re())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(h)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ye){qe=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,Ke=null,Ge=!1,He=null,Qe={onError:function(e){We=!0,Ke=e}};function Ye(e,t,n,r,i,a,o,s,u){We=!1,Ke=null,ze.apply(Qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function _t(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ht.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_t)))}function bt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)mt(n),null===n.blockedOn&&ft.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},It={},Tt={};function St(e){if(It[e])return It[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return It[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),Pt=St("animationstart"),At=St("transitionend"),Rt=new Map,Dt=new Map,Ot=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Dt.set(r,t),Rt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ft(u),i=Mt):0!==(s&=a)&&(r=Ft(s),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==s&&(r=Ft(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?jt(10,t):e;case 10:return 0===(e=qt(192&~t))?jt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Gt|0)|0},Kt=Math.log,Gt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{Oe(i,e,t,n,r)}finally{(Fe=a)||Ve()}}function Jt(e,t,n,r){Qt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=yt(st,e,t,n,r,i),!0;case"dragenter":return ut=yt(ut,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ht.set(a,yt(ht.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,ln=e.screenY-hn.screenY):ln=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=un(yn),gn=un(i({},yn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),_n=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=un(wn),xn=un(i({},fn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=un(Nn),An=un(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Dn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(On),Mn=[9,13,27,32],Fn=h&&"CompositionEvent"in window,Un=null;h&&"documentMode"in document&&(Un=document.documentMode);var Vn=h&&"TextEvent"in window&&!Un,jn=h&&(!Fn||Un&&8<Un&&11>=Un),qn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Qn(e,t,n,r){Ae(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,$n=null;function Jn(e){Nr(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),$n=Yn=null)}function ar(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Qn(t,$n,e,Te(e)),e=Jn,Fe)e(t);else{Fe=!0;try{De(e,t)}finally{Fe=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function ur(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function fr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=h&&"documentMode"in document&&11>=document.documentMode,kr=null,_r=null,wr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&fr(wr,r)||(wr=r,0<(r=Fr(_r,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Ot,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<Er.length;Ir++)Dt.set(Er[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(o(198));var l=Ke;We=!1,Ke=null,Ge||(Ge=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}}}if(Ge)throw e=He,Ge=!1,He=null,e}function Pr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Ar]||(e[Ar]=!0,s.forEach((function(t){Sr.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Or(a,e,i,t),o.add(s))}function Or(e,t,n,r){var i=Dt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,Ve()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Rt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Pn;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Ct:case Nt:case Pt:u=_n;break;case At:u=Dn;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=je(p,f))&&l.push(Mr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(h=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=mn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Ur(d))p++;for(d=0,v=f;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)f=Ur(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Ur(l),f=Ur(f)}l=null}else l=null;null!==u&&Vr(o,s,u,l,!1),null!==c&&null!==h&&Vr(o,h,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Zn;else if(Hn(s))if(er)y=cr;else{y=sr;var m=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ur);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)),m=r?ii(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(kr=m,_r=r,wr=null);break;case"focusout":wr=_r=kr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Kn=!0)),0<(m=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,qn);case"textInput":return(e=t.data)===qn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=je(n,a))&&o.unshift(Mr(n,u,s)):i||null!=(u=je(n,a))&&o.push(Mr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var qr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Xr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function hi(e,t){ui++,si[ui]=e.current,e.current=t}var fi={},di=ci(fi),pi=ci(!1),vi=fi;function yi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==fi)throw Error(o(168));hi(di,t),hi(pi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,vi=di.current,hi(di,e),hi(pi,pi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),hi(di,e)):li(pi),hi(pi,n)}var xi=null,Ei=null,Ii=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Pi=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Ri=a.unstable_ImmediatePriority,Di=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ni?Ni:function(){},Vi=null,ji=null,qi=!1,Bi=Pi(),zi=1e4>Bi?Pi:function(){return Pi()-Bi};function Wi(){switch(Ai()){case Ri:return 99;case Di:return 98;case Oi:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Ri;case 98:return Di;case 97:return Oi;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Gi(e,t){return e=Ki(e),Ii(e,t)}function Hi(e,t,n){return e=Ki(e),Ti(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Si(e)}Yi()}function Yi(){if(!qi&&null!==Vi){qi=!0;var e=0;try{var t=Vi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ti(Ri,Qi),n}finally{qi=!1}}}var $i=w.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ha(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==o){for(f=a.baseState,s=0,h=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(c=f),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=h,qs|=s,e.lanes=s,e.memoizedState=f}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ha(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ha(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ha(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,a))}function ka(e,t,n){var r=!1,i=fi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):fi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Hu(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Hu(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Ju(t,e.mode,n)).return=e,t}if(ba(t)||B(t))return(t=Qu(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?n.type===E?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(ba(n)||B(n))return null!==i?null:h(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return e=e.get(null===r.key?n:r.key)||null,r.type===E?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ba(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,h=o,v=o=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=a(g,s,y),null===h?l=g:h.sibling=g,h=g);return l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=a(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===E&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case b:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===E){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===E?((r=Qu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Hu(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,r,a),u.return=e,e=u)}return s(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ju(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$u(a,e.mode,u)).return=e,e=r),s(e);if(ba(a))return v(e,r,a,u);if(B(a))return y(e,r,a,u);if(l&&Ea(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ta=Ia(!0),Sa=Ia(!1),Ca={},Na=ci(Ca),Pa=ci(Ca),Aa=ci(Ca);function Ra(e){if(e===Ca)throw Error(o(174));return e}function Da(e,t){switch(hi(Aa,t),hi(Pa,e),hi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),hi(Na,t)}function Oa(){li(Na),li(Pa),li(Aa)}function La(e){Ra(Aa.current);var t=Ra(Na.current),n=pe(t,e.type);t!==n&&(hi(Pa,e),hi(Na,n))}function Ma(e){Pa.current===e&&(li(Na),li(Pa))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,ja=null,qa=!1;function Ba(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(qa){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Va=e);Ba(Va,n)}Va=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Va=e}}function Ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Ga(e){if(e!==Va)return!1;if(!qa)return Ka(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=ja;t;)Ba(e,t),t=Qr(t.nextSibling);if(Ka(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Va?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){ja=Va=null,qa=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var $a=w.ReactCurrentDispatcher,Ja=w.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Do:Oo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Lo,e=n(r,i)}while(ro)}if($a.current=Ro,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,a=r):u=u.next=h,Za.lanes|=l,qs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ds;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=$a.current,c=u.useState((function(){return fo(i,t,n)})),l=c[1],h=c[0];c=to;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(h,e)||(l(e),e=du(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Wt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=l=Ao.bind(null,Za,e),c.queue=e,c.baseQueue=null,h=fo(i,t,n),c.memoizedState=c.baseState=h),h}function vo(e,t,n){return po(uo(),e,t,n)}function yo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ao.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function _o(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function bo(e,t){return _o(516,4,e,t)}function xo(e,t){return wo(516,4,e,t)}function Eo(e,t){return wo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Io.bind(null,t,e),n)}function So(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Po(e,t){var n=Wi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Ao(e,t,n){var r=fu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Ro={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_o(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:So,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return bo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Po.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return yo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:ho,useRef:ko,useState:function(){return ho(co)},useDebugValue:So,useDeferredValue:function(e){var t=ho(co),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=ho(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return ho(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Vo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ku(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Gu(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bu(t,e),null;t.memoizedState={baseLanes:0},bu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,bu(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ko(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&_a(t,o,r,c),sa=!1;var f=t.memoizedState;o.state=f,da(t,r,o,i),u=t.memoizedState,s!==r||f!==u||pi.current||sa?("function"===typeof l&&(ya(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ji(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=yi(t,u=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&_a(t,o,r,u),sa=!1,f=t.memoizedState,o.state=f,da(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||pi.current||sa?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,f,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&bi(t,n,!1),as(e,t,a);r=t.stateNode,Mo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):Uo(e,t,s,a),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Da(e,t.containerInfo)}var Qo,Yo,$o,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),hi(Fa,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),n=Qu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Gu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gu(o,s),null!==e?r=Gu(e,r):(r=Qu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Oa(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Ra(Aa.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ra(Na.current),Ga(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xr]=t,r[Zr]=s,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Pr(Tr[e],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":ee(r,s),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pr("invalid",r);break;case"textarea":ue(r,s),Pr("invalid",r)}for(var c in Ee(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Pr("scroll",r));switch(n){case"input":$(r),re(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ie(n,r),n){case"dialog":Pr("cancel",e),Pr("close",e),a=r;break;case"iframe":case"object":case"embed":Pr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Pr(Tr[a],e);a=r;break;case"source":Pr("error",e),a=r;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),a=r;break;case"details":Pr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Pr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Pr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Pr("invalid",e);break;default:a=r}Ee(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?be(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&me(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Pr("scroll",e):null!=h&&_(e,s,h,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ra(Aa.current),Ra(Na.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Us&&(Us=3):(0!==Us&&3!==Us||(Us=4),null===Ds||0===(134217727&qs)&&0===(134217727&Bs)||gu(Ds,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Us||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Gs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ua(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,hi(Fa,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Oa(),null;case 10:return ra(e),null;case 23:case 24:return xu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ra(Na.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(h in Ee(n,r),n=null,a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var c=a[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=a?a[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Pr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Js=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xs?Xs=new Set([this]):Xs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){ju(e,n)}else t.current=null}function ys(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function ms(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&bt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){ju(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){ju(t,a)}break;case 5:vs(t);break;case 4:Is(e,t)}}function _s(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Es(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Is(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?be(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ge(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,bt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ks=zi(),gs(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Ps=w.ReactCurrentDispatcher,As=w.ReactCurrentOwner,Rs=0,Ds=null,Os=null,Ls=0,Ms=0,Fs=ci(0),Us=0,Vs=null,js=0,qs=0,Bs=0,zs=0,Ws=null,Ks=0,Gs=1/0;function Hs(){Gs=zi()+500}var Qs,Ys=null,$s=!1,Js=null,Xs=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,hu=!1;function fu(){return 0!==(48&Rs)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===uu&&(uu=js),0!==$i.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Rs)&&98===e?e=jt(12,uu):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Ds&&(Bs|=t,4===Us&&gu(e,Ls));var r=Wi();1===t?0!==(8&Rs)&&0===(48&Rs)?ku(e):(yu(e,n),0===Rs&&(Hs(),Qi())):(0===(4&Rs)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),yu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function yu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var h=Mt;a[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Ds?Ls:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ku.bind(null,e),null===Vi?(Vi=[n],ji=Ti(Ri,Yi)):Vi.push(n),n=Fi):14===t?n=Hi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,mu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function mu(e){if(su=-1,cu=uu=0,0!==(48&Rs))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Ds?Ls:0);if(0===n)return null;var r=n,i=Rs;Rs|=16;var a=Tu();for(Ds===e&&Ls===r||(Hs(),Eu(e,r));;)try{Nu();break}catch(u){Iu(e,u)}if(na(),Ps.current=a,Rs=i,null!==Os?r=0:(Ds=null,Ls=0,r=Us),0!==(js&Bs))Eu(e,0);else if(0!==r){if(2===r&&(Rs|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=Vt(e))&&(r=Su(e,n))),1===r)throw t=Vs,Eu(e,0),gu(e,n),yu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ru(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Ks+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Ru.bind(null,e),r);break}Ru(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Wt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Kr(Ru.bind(null,e),n);break}Ru(e);break;default:throw Error(o(329))}}return yu(e,zi()),e.callbackNode===t?mu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&Rs))throw Error(o(327));if(Lu(),e===Ds&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Su(e,t);0!==(js&Bs)&&(n=Su(e,t=Ut(e,t)))}else n=Su(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Rs|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=Vt(e))&&(n=Su(e,t))),1===n)throw n=Vs,Eu(e,0),gu(e,t),yu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ru(e),yu(e,zi()),null}function _u(e,t){var n=Rs;Rs|=1;try{return e(t)}finally{0===(Rs=n)&&(Hs(),Qi())}}function wu(e,t){var n=Rs;Rs&=-2,Rs|=8;try{return e(t)}finally{0===(Rs=n)&&(Hs(),Qi())}}function bu(e,t){hi(Fs,Ms),Ms|=t,js|=t}function xu(){Ms=Fs.current,li(Fs)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Oa(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Oa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:xu()}n=n.return}Ds=e,Os=Gu(e.current,null),Ls=Ms=js=t,Us=0,Vs=null,zs=Bs=qs=0}function Iu(e,t){for(;;){var n=Os;try{if(na(),$a.current=Ro,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,As.current=null,null===n||null===n.return){Us=1,Vs=t,Os=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Fa.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var y=f.updateQueue;if(null===y){var m=new Set;m.add(c),f.updateQueue=m}else y.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,ha(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new hs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var _=qu.bind(null,a,c,s);c.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((H(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Us&&(Us=2),u=cs(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,fa(f,fs(0,a,t));break e;case 1:a=u;var w=f.type,b=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xs||!Xs.has(b)))){f.flags|=4096,t&=-t,f.lanes|=t,fa(f,ds(f,a,t));break e}}f=f.return}while(null!==f)}Au(n)}catch(x){t=x,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function Tu(){var e=Ps.current;return Ps.current=Ro,null===e?Ro:e}function Su(e,t){var n=Rs;Rs|=16;var r=Tu();for(Ds===e&&Ls===t||Eu(e,t);;)try{Cu();break}catch(i){Iu(e,i)}if(na(),Rs=n,Ps.current=r,null!==Os)throw Error(o(261));return Ds=null,Ls=0,Us}function Cu(){for(;null!==Os;)Pu(Os)}function Nu(){for(;null!==Os&&!Ci();)Pu(Os)}function Pu(e){var t=Qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Au(e):Os=t,As.current=null}function Au(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Os=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Os=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===Us&&(Us=5)}function Ru(e){var t=Wi();return Gi(99,Du.bind(null,e,t)),null}function Du(e,t){do{Lu()}while(null!==eu);if(0!==(48&Rs))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Ds&&(Os=Ds=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Rs,Rs|=32,As.current=null,qr=Yt,mr(s=yr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,y=s,m=null;t:for(;;){for(var g;y!==u||0!==a&&3!==y.nodeType||(f=h+a),y!==c||0!==l&&3!==y.nodeType||(d=h+l),3===y.nodeType&&(h+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===s)break t;if(m===u&&++p===a&&(f=h),m===c&&++v===l&&(d=h),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Yt=!1,lu=null,hu=!1,Ys=r;do{try{Ou()}catch(T){if(null===Ys)throw Error(o(330));ju(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var k=Ys.flags;if(16&k&&ge(Ys.stateNode,""),128&k){var _=Ys.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:bs(Ys),Ys.flags&=-3;break;case 6:bs(Ys),Ys.flags&=-3,Ts(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Ts(Ys.alternate,Ys);break;case 4:Ts(Ys.alternate,Ys);break;case 8:Is(s,u=Ys);var b=u.alternate;_s(u),null!==b&&_s(b)}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));ju(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);if(w=Br,_=yr(),k=w.focusedElem,s=w.selectionRange,_!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&mr(k)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in k?(k.selectionStart=_,k.selectionEnd=Math.min(w,k.value.length)):(w=(_=k.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,b=Math.min(s.start,u),s=void 0===s.end?b:Math.min(s.end,u),!w.extend&&b>s&&(u=s,s=b,b=u),u=pr(k,b),a=pr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),b>s?(w.addRange(_),w.extend(a.node,a.offset)):(_.setEnd(a.node,a.offset),w.addRange(_))))),_=[];for(w=k;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<_.length;k++)(w=_[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!qr,Br=qr=null,e.current=n,Ys=r;do{try{for(k=e;null!==Ys;){var x=Ys.flags;if(36&x&&ms(k,Ys.alternate,Ys),128&x){_=void 0;var E=Ys.ref;if(null!==E){var I=Ys.stateNode;Ys.tag,_=I,"function"===typeof E?E(_):E.current=_}}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));ju(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ui(),Rs=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((x=Ys).sibling=null,x.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Xs=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(yu(e,zi()),$s)throw $s=!1,e=Js,Js=null,e;return 0!==(8&Rs)||Qi(),null}function Ou(){for(;null!==Ys;){var e=Ys.alternate;hu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(hu=!0):13===Ys.tag&&Cs(e,Ys)&&et(Ys,lu)&&(hu=!0));var t=Ys.flags;0!==(256&t)&&ys(e,Ys),0===(512&t)||Zs||(Zs=!0,Hi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Gi(e,Uu)}return!1}function Mu(e,t){nu.push(t,e),Zs||(Zs=!0,Hi(97,(function(){return Lu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Hi(97,(function(){return Lu(),null})))}function Uu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Rs))throw Error(o(331));var t=Rs;Rs|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));ju(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));ju(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Rs=t,Qi(),!0}function Vu(e,t,n){ha(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(zt(e,1,t),yu(e,t))}function ju(e,t){if(3===e.tag)Vu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r))){var i=ds(n,e=cs(t,e),1);if(ha(n,i),i=fu(),null!==(n=vu(n,1)))zt(n,1,i),yu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ls&n)===n&&(4===Us||3===Us&&(62914560&Ls)===Ls&&500>zi()-Ks?Eu(e,0):zs|=n),yu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===uu&&(uu=js),0===(t=qt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(zt(e,t,n),yu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new zu(e,t,n,r)}function Ku(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ku(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Qu(n.children,i,a,t);case M:s=8,i|=16;break;case I:s=8,i|=1;break;case T:return(e=Wu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case P:return(e=Wu(13,n,t,i)).type=P,e.elementType=P,e.lanes=a,e;case A:return(e=Wu(19,n,t,i)).elementType=A,e.lanes=a,e;case F:return Yu(n,i,a,t);case U:return(e=Wu(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case C:s=9;break e;case N:s=11;break e;case R:s=14;break e;case D:s=16,r=null;break e;case O:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=F,e.lanes=n,e}function $u(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function Ju(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=fu(),s=du(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=_i(n,c,u);break e}}n=u}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ha(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xu(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zu(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:La(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(hi(Fa,1&Fa.current),null!==(t=as(e,t,n))?t.sibling:null);hi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return as(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ya(t,r,s,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ku(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=Vo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Va=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ha();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Wr(r,i)?s=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,s,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Xo(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(hi(Xi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,ha(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),jo(e,t,i,a=Ji(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,fu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=_u,Oe=function(e,t,n,r,i){var a=Rs;Rs|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Rs=a)&&(Hs(),Qi())}},Le=function(){0===(49&Rs)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,yu(e,zi())}))}Qi()}(),Lu())},Me=function(e,t){var n=Rs;Rs|=2;try{return e(t)}finally{0===(Rs=n)&&(Hs(),Qi())}};var uc={Events:[ri,ii,ai,Ae,Re,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{xi=hc.inject(lc),Ei=hc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Rs;if(0!==(48&n))return e(t);Rs|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Rs=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=_u,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!b.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=S(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=S(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function A(){var e=P.current;if(null===e)throw Error(d(321));return e}var R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!b.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(A){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=h;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};u(k,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var b=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return m.prototype=g,u(b,"constructor",g),u(g,"constructor",m),m.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(E.prototype),u(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),u(b,s,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=f((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function b(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>I(o,n))void 0!==u&&0>I(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>I(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,P=3,A=!1,R=!1,D=!1;function O(e){for(var t=x(S);null!==t;){if(null===t.callback)E(S);else{if(!(t.startTime<=e))break;E(S),t.sortIndex=t.expirationTime,b(T,t)}t=x(S)}}function L(e){if(D=!1,O(e),!R)if(null!==x(T))R=!0,n(M);else{var t=x(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){R=!1,D&&(D=!1,i()),A=!0;var a=P;try{for(O(n),N=x(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,P=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===x(T)&&E(T),O(n)}else E(T);N=x(T)}if(null!==N)var u=!0;else{var c=x(S);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{N=null,P=a,A=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||A||(R=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,b(S,e),null===x(T)&&e===x(S)&&(D?i():D=!0,r(L,o-s))):(e.sortIndex=u,b(T,e),R||A||(R=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".1de9100c.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="react-twitter:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/react-twitter/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkreact_twitter=self.webpackChunkreact_twitter||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Un},SDK_VERSION:function(){return Qr},_DEFAULT_ENTRY_NAME:function(){return Lr},_addComponent:function(){return Vr},_addOrOverwriteComponent:function(){return jr},_apps:function(){return Fr},_clearComponents:function(){return Wr},_components:function(){return Ur},_getProvider:function(){return Br},_registerComponent:function(){return qr},_removeServiceInstance:function(){return zr},deleteApp:function(){return Xr},getApp:function(){return $r},getApps:function(){return Jr},initializeApp:function(){return Yr},onLog:function(){return ti},registerVersion:function(){return ei},setLogLevel:function(){return ni}});var t=n(791),r=n(164);function i(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(zi){return void n(zi)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,u,"next",e)}function u(e){i(o,r,a,s,u,"throw",e)}s(void 0)}))}}function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||u(e,t)||c()}var h=n(757),f=n.n(h);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function m(e,t){if(null==e)return{};var n,r,i=y(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var g=n(694),k=n.n(g),_=n(184),w=["xxl","xl","lg","md","sm","xs"],b=t.createContext({prefixes:{},breakpoints:w});b.Consumer,b.Provider;function x(e,n){var r=(0,t.useContext)(b).prefixes;return e||r[n]||n}var E=/-(.)/g;var I=["className","bsPrefix","as"],T=function(e){return e[0].toUpperCase()+(t=e,t.replace(E,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function S(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?T(e):r,a=n.Component,o=n.defaultProps,s=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,o=t.as,s=void 0===o?a||"div":o,u=m(t,I),c=x(i,e);return(0,_.jsx)(s,v({ref:n,className:k()(r,c)},u))}));return s.defaultProps=o,s.displayName=i,s}var C=function(e){return t.forwardRef((function(t,n){return(0,_.jsx)("div",v(v({},t),{},{ref:n,className:k()(t.className,e)}))}))},N=["bsPrefix","className","variant","as"],P=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,a=e.as,o=void 0===a?"img":a,s=m(e,N),u=x(n,"card-img");return(0,_.jsx)(o,v({ref:t,className:k()(i?"".concat(u,"-").concat(i):u,r)},s))}));P.displayName="CardImg";var A=P,R=t.createContext(null);R.displayName="CardHeaderContext";var D=R,O=["bsPrefix","className","as"],L=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"div":a,s=m(e,O),u=x(r,"card-header"),c=(0,t.useMemo)((function(){return{cardHeaderBsPrefix:u}}),[u]);return(0,_.jsx)(D.Provider,{value:c,children:(0,_.jsx)(o,v(v({ref:n},s),{},{className:k()(i,u)}))})}));L.displayName="CardHeader";var M=L,F=["bsPrefix","className","bg","text","border","body","children","as"],U=C("h5"),V=C("h6"),j=S("card-body"),q=S("card-title",{Component:U}),B=S("card-subtitle",{Component:V}),z=S("card-link",{Component:"a"}),W=S("card-text",{Component:"p"}),K=S("card-footer"),G=S("card-img-overlay"),H=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,a=e.text,o=e.border,s=e.body,u=e.children,c=e.as,l=void 0===c?"div":c,h=m(e,F),f=x(n,"card");return(0,_.jsx)(l,v(v({ref:t},h),{},{className:k()(r,f,i&&"bg-".concat(i),a&&"text-".concat(a),o&&"border-".concat(o)),children:s?(0,_.jsx)(j,{children:u}):u}))}));H.displayName="Card",H.defaultProps={body:!1};var Q=Object.assign(H,{Img:A,Title:q,Subtitle:B,Body:j,Link:z,Text:W,Header:M,Footer:K,ImgOverlay:G});function Y(){return Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}n(176);function $(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function J(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function X(e,n){return Object.keys(n).reduce((function(r,i){var a,o=r,s=o[$(i)],u=o[i],c=y(o,[$(i),i].map(J)),l=n[i],h=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],s=a[1],u=void 0!==e,c=i.current;return i.current=u,!u&&c&&o!==n&&s(n),[u?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),s(e)}),[r])]}(u,s,e[l]),f=h[0],d=h[1];return Y({},c,((a={})[i]=f,a[l]=d,a))}),e)}function Z(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function ee(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function te(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Z.__suppressDeprecationWarning=!0,ee.__suppressDeprecationWarning=!0,te.__suppressDeprecationWarning=!0;var ne=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function re(e){var n=ne(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var ie="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||ie?t.useLayoutEffect:t.useEffect,new WeakMap;var ae=["as","disabled"];function oe(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,s=e.tabIndex,u=void 0===s?0:s,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:u,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},l]}var se=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ae),a=l(oe(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],s=a[1].tagName;return(0,_.jsx)(s,Object.assign({},i,o,{ref:t}))}));se.displayName="Button";var ue=["onKeyDown"];var ce=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ue),a=l(oe(Object.assign({tagName:"a"},i)),1)[0],o=re((function(e){a.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,_.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,_.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));ce.displayName="Anchor";var le=ce;function he(e,t){return he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},he(e,t)}var fe=!1,de=t.createContext(null),pe="unmounted",ve="exited",ye="entering",me="entered",ge="exiting",ke=function(e){var n,i;function a(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=ve,r.appearStatus=ye):i=me:i=t.unmountOnExit||t.mountOnEnter?pe:ve,r.state={status:i},r.nextCallback=null,r}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,he(n,i),a.getDerivedStateFromProps=function(e,t){return e.in&&t.status===pe?{status:ve}:null};var o=a.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==ye&&n!==me&&(t=ye):n!==ye&&n!==me||(t=ge)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===ye?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===ve&&this.setState({status:pe})},o.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,a=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=a[0],s=a[1],u=this.getTimeouts(),c=i?u.appear:u.enter;!e&&!n||fe?this.safeSetState({status:me},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:ye},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:me},(function(){t.props.onEntered(o,s)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!fe?(this.props.onExit(i),this.safeSetState({status:ge},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:ve},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:ve},(function(){e.props.onExited(i)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],s=a[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===pe)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,y(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(de.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},a}(t.Component);function _e(){}ke.contextType=de,ke.propTypes={},ke.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_e,onEntering:_e,onEntered:_e,onExit:_e,onExiting:_e,onExited:_e},ke.UNMOUNTED=pe,ke.EXITED=ve,ke.ENTERING=ye,ke.ENTERED=me,ke.EXITING=ge;var we=ke;function be(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var xe=/([A-Z])/g;var Ee=/^ms-/;function Ie(e){return function(e){return e.replace(xe,"-$1").toLowerCase()}(e).replace(Ee,"-ms-")}var Te=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var Se=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(Ie(t))||function(e,t){return be(e).getComputedStyle(e,t)}(e).getPropertyValue(Ie(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!Te.test(e))}(i)?n+=Ie(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(Ie(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},Ce=!("undefined"===typeof window||!window.document||!window.document.createElement),Ne=!1,Pe=!1;try{var Ae={get passive(){return Ne=!0},get once(){return Pe=Ne=!0}};Ce&&(window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,!0))}catch(eF){}var Re=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Pe){var i=r.once,a=r.capture,o=n;!Pe&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Ne?r:a)}e.addEventListener(t,n,r)};var De=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var Oe=function(e,t,n,r){return Re(e,t,n,r),function(){De(e,t,n,r)}};function Le(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=Oe(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function Me(e,t,n,r){null==n&&(n=function(e){var t=Se(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Le(e,n,r),a=Oe(e,"transitionend",t);return function(){i(),a()}}function Fe(e,t){var n=Se(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Ue(e,t){var n=Fe(e,"transitionDuration"),r=Fe(e,"transitionDelay"),i=Me(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var Ve=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var je=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=Ve(e),r=Ve(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var qe,Be=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],ze=t.forwardRef((function(e,n){var i=e.onEnter,a=e.onEntering,o=e.onEntered,s=e.onExit,u=e.onExiting,c=e.onExited,l=e.addEndListener,h=e.children,f=e.childRef,d=m(e,Be),p=(0,t.useRef)(null),y=je(p,f),g=function(e){var t;y((t=e)&&"setState"in t?r.findDOMNode(t):null!=t?t:null)},k=function(e){return function(t){e&&p.current&&e(p.current,t)}},w=(0,t.useCallback)(k(i),[i]),b=(0,t.useCallback)(k(a),[a]),x=(0,t.useCallback)(k(o),[o]),E=(0,t.useCallback)(k(s),[s]),I=(0,t.useCallback)(k(u),[u]),T=(0,t.useCallback)(k(c),[c]),S=(0,t.useCallback)(k(l),[l]);return(0,_.jsx)(we,v(v({ref:n},d),{},{onEnter:w,onEntered:x,onEntering:b,onExit:E,onExited:T,onExiting:I,addEndListener:S,nodeRef:p,children:"function"===typeof h?function(e,t){return h(e,v(v({},t),{},{ref:g}))}:t.cloneElement(h,{ref:g})}))})),We=["className","children","transitionClasses"],Ke=(d(qe={},ye,"show"),d(qe,me,"show"),qe),Ge=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,s=m(e,We),u=(0,t.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==s.onEnter||s.onEnter(e,t)}),[s]);return(0,_.jsx)(ze,v(v({ref:n,addEndListener:Ue},s),{},{onEnter:u,childRef:i.ref,children:function(e,n){return t.cloneElement(i,v(v({},n),{},{className:k()("fade",r,i.props.className,Ke[e],o[e])}))}}))}));Ge.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Ge.displayName="Fade";var He=Ge,Qe=n(7),Ye=n.n(Qe),$e=["className","variant"],Je={"aria-label":Ye().string,onClick:Ye().func,variant:Ye().oneOf(["white"])},Xe=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=m(e,$e);return(0,_.jsx)("button",v({ref:t,type:"button",className:k()("btn-close",r&&"btn-close-".concat(r),n)},i))}));Xe.displayName="CloseButton",Xe.propTypes=Je,Xe.defaultProps={"aria-label":"Close"};var Ze=Xe,et=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],tt=C("h4");tt.displayName="DivStyledAsH4";var nt=S("alert-heading",{Component:tt}),rt=S("alert-link",{Component:le}),it={variant:"primary",show:!0,transition:He,closeLabel:"Close alert"},at=t.forwardRef((function(e,t){var n=X(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,a=n.closeLabel,o=n.closeVariant,s=n.className,u=n.children,c=n.variant,l=n.onClose,h=n.dismissible,f=n.transition,d=m(n,et),p=x(r,"alert"),y=re((function(e){l&&l(!1,e)})),g=!0===f?He:f,w=(0,_.jsxs)("div",v(v({role:"alert"},g?void 0:d),{},{ref:t,className:k()(s,p,c&&"".concat(p,"-").concat(c),h&&"".concat(p,"-dismissible")),children:[h&&(0,_.jsx)(Ze,{onClick:y,"aria-label":a,variant:o}),u]}));return g?(0,_.jsx)(g,v(v({unmountOnExit:!0},d),{},{ref:void 0,in:i,children:w})):i?w:null}));at.displayName="Alert",at.defaultProps=it;var ot=Object.assign(at,{Link:rt,Heading:nt}),st=["as","className","type","tooltip"],ut={type:Ye().string,tooltip:Ye().bool,as:Ye().elementType},ct=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,s=e.tooltip,u=void 0!==s&&s,c=m(e,st);return(0,_.jsx)(r,v(v({},c),{},{ref:t,className:k()(i,"".concat(o,"-").concat(u?"tooltip":"feedback"))}))}));ct.displayName="Feedback",ct.propTypes=ut;var lt=ct,ht=t.createContext({}),ft=["id","bsPrefix","className","type","isValid","isInvalid","as"],dt=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,o=e.type,s=void 0===o?"checkbox":o,u=e.isValid,c=void 0!==u&&u,l=e.isInvalid,h=void 0!==l&&l,f=e.as,d=void 0===f?"input":f,p=m(e,ft),y=(0,t.useContext)(ht).controlId;return i=x(i,"form-check-input"),(0,_.jsx)(d,v(v({},p),{},{ref:n,type:s,id:r||y,className:k()(a,i,c&&"is-valid",h&&"is-invalid")}))}));dt.displayName="FormCheckInput";var pt=dt,vt=["bsPrefix","className","htmlFor"],yt=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,o=m(e,vt),s=(0,t.useContext)(ht).controlId;return r=x(r,"form-check-label"),(0,_.jsx)("label",v(v({},o),{},{ref:n,htmlFor:a||s,className:k()(i,r)}))}));yt.displayName="FormCheckLabel";var mt=yt;var gt=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],kt=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,s=void 0!==o&&o,u=e.disabled,c=void 0!==u&&u,l=e.isValid,h=void 0!==l&&l,f=e.isInvalid,d=void 0!==f&&f,p=e.feedbackTooltip,y=void 0!==p&&p,g=e.feedback,w=e.feedbackType,b=e.className,E=e.style,I=e.title,T=void 0===I?"":I,S=e.type,C=void 0===S?"checkbox":S,N=e.label,P=e.children,A=e.as,R=void 0===A?"input":A,D=m(e,gt);i=x(i,"form-check"),a=x(a,"form-switch");var O=(0,t.useContext)(ht).controlId,L=(0,t.useMemo)((function(){return{controlId:r||O}}),[O,r]),M=!P&&null!=N&&!1!==N||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(P,mt),F=(0,_.jsx)(pt,v(v({},D),{},{type:"switch"===C?"checkbox":C,ref:n,isValid:h,isInvalid:d,disabled:c,as:R}));return(0,_.jsx)(ht.Provider,{value:L,children:(0,_.jsx)("div",{style:E,className:k()(b,M&&i,s&&"".concat(i,"-inline"),"switch"===C&&a),children:P||(0,_.jsxs)(_.Fragment,{children:[F,M&&(0,_.jsx)(mt,{title:T,children:N}),g&&(0,_.jsx)(lt,{type:w,tooltip:y,children:g})]})})})}));kt.displayName="FormCheck";var _t=Object.assign(kt,{Input:pt,Label:mt}),wt=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),bt=t.forwardRef((function(e,n){var r,i,a=e.bsPrefix,o=e.type,s=e.size,u=e.htmlSize,c=e.id,l=e.className,h=e.isValid,f=void 0!==h&&h,p=e.isInvalid,y=void 0!==p&&p,g=e.plaintext,w=e.readOnly,b=e.as,E=void 0===b?"input":b,I=m(e,wt),T=(0,t.useContext)(ht).controlId;(a=x(a,"form-control"),g)?r=d({},"".concat(a,"-plaintext"),!0):(d(i={},a,!0),d(i,"".concat(a,"-").concat(s),s),r=i);return(0,_.jsx)(E,v(v({},I),{},{type:o,size:u,ref:n,readOnly:w,id:c||T,className:k()(l,r,f&&"is-valid",y&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));bt.displayName="FormControl";var xt=Object.assign(bt,{Feedback:lt}),Et=S("form-floating"),It=["controlId","as"],Tt=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,o=m(e,It),s=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,_.jsx)(ht.Provider,{value:s,children:(0,_.jsx)(a,v(v({},o),{},{ref:n}))})}));Tt.displayName="FormGroup";var St=Tt,Ct=["as","bsPrefix","className"],Nt=["className"];function Pt(e){var n=e.as,r=e.bsPrefix,i=e.className,a=m(e,Ct);r=x(r,"col");var o=(0,t.useContext)(b).breakpoints,s=[],u=[];return o.forEach((function(e){var t,n,i,o=a[e];delete a[e],"object"===typeof o&&null!=o?(t=o.span,n=o.offset,i=o.order):t=o;var c="xs"!==e?"-".concat(e):"";t&&s.push(!0===t?"".concat(r).concat(c):"".concat(r).concat(c,"-").concat(t)),null!=i&&u.push("order".concat(c,"-").concat(i)),null!=n&&u.push("offset".concat(c,"-").concat(n))})),[v(v({},a),{},{className:k().apply(void 0,[i].concat(s,u))}),{as:n,bsPrefix:r,spans:s}]}var At=t.forwardRef((function(e,t){var n=l(Pt(e),2),r=n[0],i=r.className,a=m(r,Nt),o=n[1],s=o.as,u=void 0===s?"div":s,c=o.bsPrefix,h=o.spans;return(0,_.jsx)(u,v(v({},a),{},{ref:t,className:k()(i,!h.length&&c)}))}));At.displayName="Col";var Rt=At,Dt=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Ot=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,o=e.column,s=e.visuallyHidden,u=e.className,c=e.htmlFor,l=m(e,Dt),h=(0,t.useContext)(ht).controlId;a=x(a,"form-label");var f="col-form-label";"string"===typeof o&&(f="".concat(f," ").concat(f,"-").concat(o));var d=k()(u,a,s&&"visually-hidden",o&&f);return c=c||h,o?(0,_.jsx)(Rt,v({ref:n,as:"label",className:d,htmlFor:c},l)):(0,_.jsx)(i,v({ref:n,className:d,htmlFor:c},l))}));Ot.displayName="FormLabel",Ot.defaultProps={column:!1,visuallyHidden:!1};var Lt=Ot,Mt=["bsPrefix","className","id"],Ft=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,o=m(e,Mt),s=(0,t.useContext)(ht).controlId;return r=x(r,"form-range"),(0,_.jsx)("input",v(v({},o),{},{type:"range",ref:n,className:k()(i,r),id:a||s}))}));Ft.displayName="FormRange";var Ut=Ft,Vt=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],jt=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,s=e.isValid,u=void 0!==s&&s,c=e.isInvalid,l=void 0!==c&&c,h=e.id,f=m(e,Vt),d=(0,t.useContext)(ht).controlId;return r=x(r,"form-select"),(0,_.jsx)("select",v(v({},f),{},{size:a,ref:n,className:k()(o,r,i&&"".concat(r,"-").concat(i),u&&"is-valid",l&&"is-invalid"),id:h||d}))}));jt.displayName="FormSelect";var qt=jt,Bt=["bsPrefix","className","as","muted"],zt=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,s=m(e,Bt);return n=x(n,"form-text"),(0,_.jsx)(a,v(v({},s),{},{ref:t,className:k()(r,n,o&&"text-muted")}))}));zt.displayName="FormText";var Wt=zt,Kt=t.forwardRef((function(e,t){return(0,_.jsx)(_t,v(v({},e),{},{ref:t,type:"switch"}))}));Kt.displayName="Switch";var Gt=Object.assign(Kt,{Input:_t.Input,Label:_t.Label}),Ht=["bsPrefix","className","children","controlId","label"],Qt=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,s=m(e,Ht);return n=x(n,"form-floating"),(0,_.jsxs)(St,v(v({ref:t,className:k()(r,n),controlId:a},s),{},{children:[i,(0,_.jsx)("label",{htmlFor:a,children:o})]}))}));Qt.displayName="FloatingLabel";var Yt=Qt,$t=["className","validated","as"],Jt={_ref:Ye().any,validated:Ye().bool,as:Ye().elementType},Xt=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=m(e,$t);return(0,_.jsx)(a,v(v({},o),{},{ref:t,className:k()(n,r&&"was-validated")}))}));Xt.displayName="Form",Xt.propTypes=Jt;var Zt=Object.assign(Xt,{Group:St,Control:xt,Floating:Et,Check:_t,Switch:Gt,Label:Lt,Text:Wt,Range:Ut,Select:qt,FloatingLabel:Yt}),en=["as","bsPrefix","variant","size","active","className"],tn=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,o=e.active,s=e.className,u=m(e,en),c=x(r,"btn"),h=l(oe(v({tagName:n},u)),2),f=h[0],d=h[1].tagName;return(0,_.jsx)(d,v(v(v({},f),u),{},{ref:t,className:k()(s,c,o&&"active",i&&"".concat(c,"-").concat(i),a&&"".concat(c,"-").concat(a),u.href&&u.disabled&&"disabled")}))}));tn.displayName="Button",tn.defaultProps={variant:"primary",active:!1,disabled:!1};var nn=tn;function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t,n){return t&&an(e.prototype,t),n&&an(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}function ln(e){return ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ln(e)}function hn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(eF){return!1}}function fn(e){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(e)}function dn(e,t){if(t&&("object"===fn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return un(e)}function pn(e){var t=hn();return function(){var n,r=ln(e);if(t){var i=ln(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dn(this,n)}}function vn(e,t,n){return vn=hn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&he(i,n.prototype),i},vn.apply(null,arguments)}function yn(e){var t="function"===typeof Map?new Map:void 0;return yn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return vn(e,arguments,ln(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),he(n,e)},yn(e)}var mn=!1,gn=!1,kn="${JSCORE_VERSION}",_n=function(e,t){if(!e)throw wn(t)},wn=function(e){return new Error("Firebase Database ("+kn+") INTERNAL ASSERT FAILED: "+e)},bn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},xn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},En=function(e){var t=bn(e);return xn.encodeByteArray(t,!0)},In=function(e){return En(e).replace(/\./g,"")},Tn=function(e){try{return xn.decodeString(e,!0)}catch(eF){console.error("base64Decode failed: ",eF)}return null};function Sn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Sn(e[n],t[n]));return e}var Cn=function(){function e(){var t=this;rn(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return on(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Nn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[In(JSON.stringify({alg:"none",type:"JWT"})),In(JSON.stringify(a)),""].join(".")}function Pn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function An(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function Rn(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(eF){return!1}}function Dn(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function On(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ln(){var e=Pn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Mn(){return!0===mn||!0===gn}function Fn(){return"object"===typeof indexedDB}var Un=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(un(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(un(a),Vn.prototype.create),a}return on(n)}(yn(Error)),Vn=function(){function e(t,n,r){rn(this,e),this.service=t,this.serviceName=n,this.errors=r}return on(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?jn(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Un(n,a,t);return o}}]),e}();function jn(e,t){return e.replace(qn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var qn=/\{\$([^}]+)}/g;function Bn(e){return JSON.parse(e)}function zn(e){return JSON.stringify(e)}var Wn=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Bn(Tn(a[0])||""),n=Bn(Tn(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(eF){}return{header:t,claims:n,data:r,signature:i}};function Kn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Gn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Hn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Qn(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Yn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if($n(s)&&$n(u)){if(!Yn(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function $n(e){return null!==e&&"object"===typeof e}function Jn(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Xn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Zn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var er=function(){function e(){rn(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return on(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function tr(e,t){var n=new nr(e,t);return n.subscribe.bind(n)}var nr=function(){function e(t,n){var r=this;rn(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return on(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=sn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=rr),void 0===r.error&&(r.error=rr),void 0===r.complete&&(r.complete=rr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(eF){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(eF){"undefined"!==typeof console&&console.error&&console.error(eF)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function rr(){}var ir=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ar(e,t){return"".concat(e," failed: ").concat(t," argument ")}function or(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ar(e,t)+"must be a valid function.")}function sr(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ar(e,t)+"must be a valid context object.")}var ur=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function cr(e){return e&&e._delegate?e._delegate:e}function lr(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var hr=function(){function e(t){rn(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return on(e,[{key:"transaction",value:function(e,t){return new fr(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new dr(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),fr=function(){function e(t){var n=this;rn(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return on(e,[{key:"objectStore",value:function(e){return new dr(this._transaction.objectStore(e))}}]),e}(),dr=function(){function e(t){rn(this,e),this._store=t}return on(e,[{key:"index",value:function(e){return new pr(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new pr(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return lr(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return lr(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return lr(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return lr(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),pr=function(){function e(t){rn(this,e),this._index=t}return on(e,[{key:"get",value:function(e){return lr(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function vr(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function yr(e){return function(e){if(Array.isArray(e))return s(e)}(e)||vr(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mr=function(){function e(t,n,r){rn(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return on(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),gr="[DEFAULT]",kr=function(){function e(t,n){rn(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return on(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Cn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(eF){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(eF){if(r)return null;throw eF}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:gr})}catch(eF){}var t,n=sn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(eF){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=a(h.mark((function e(){var t;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(yr(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),yr(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=sn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(QR){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===gr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(QR){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gr;return this.component?this.component.multipleInstances?e:gr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var _r,wr,br=function(){function e(t){rn(this,e),this.name=t,this.providers=new Map}return on(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new kr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),xr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(wr||(wr={}));var Er,Ir,Tr={debug:wr.DEBUG,verbose:wr.VERBOSE,info:wr.INFO,warn:wr.WARN,error:wr.ERROR,silent:wr.SILENT},Sr=wr.INFO,Cr=(d(_r={},wr.DEBUG,"log"),d(_r,wr.VERBOSE,"log"),d(_r,wr.INFO,"info"),d(_r,wr.WARN,"warn"),d(_r,wr.ERROR,"error"),_r),Nr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Cr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Pr=function(){function e(t){rn(this,e),this.name=t,this._logLevel=Sr,this._logHandler=Nr,this._userLogHandler=null,xr.push(this)}return on(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in wr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Tr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wr.DEBUG].concat(t)),this._logHandler.apply(this,[this,wr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,wr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wr.INFO].concat(t)),this._logHandler.apply(this,[this,wr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wr.WARN].concat(t)),this._logHandler.apply(this,[this,wr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,wr.ERROR].concat(t)),this._logHandler.apply(this,[this,wr.ERROR].concat(t))}}]),e}();var Ar=function(){function e(t){rn(this,e),this.container=t}return on(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Rr="@firebase/app",Dr="0.7.20",Or=new Pr("@firebase/app"),Lr="[DEFAULT]",Mr=(d(Er={},Rr,"fire-core"),d(Er,"@firebase/app-compat","fire-core-compat"),d(Er,"@firebase/analytics","fire-analytics"),d(Er,"@firebase/analytics-compat","fire-analytics-compat"),d(Er,"@firebase/app-check","fire-app-check"),d(Er,"@firebase/app-check-compat","fire-app-check-compat"),d(Er,"@firebase/auth","fire-auth"),d(Er,"@firebase/auth-compat","fire-auth-compat"),d(Er,"@firebase/database","fire-rtdb"),d(Er,"@firebase/database-compat","fire-rtdb-compat"),d(Er,"@firebase/functions","fire-fn"),d(Er,"@firebase/functions-compat","fire-fn-compat"),d(Er,"@firebase/installations","fire-iid"),d(Er,"@firebase/installations-compat","fire-iid-compat"),d(Er,"@firebase/messaging","fire-fcm"),d(Er,"@firebase/messaging-compat","fire-fcm-compat"),d(Er,"@firebase/performance","fire-perf"),d(Er,"@firebase/performance-compat","fire-perf-compat"),d(Er,"@firebase/remote-config","fire-rc"),d(Er,"@firebase/remote-config-compat","fire-rc-compat"),d(Er,"@firebase/storage","fire-gcs"),d(Er,"@firebase/storage-compat","fire-gcs-compat"),d(Er,"@firebase/firestore","fire-fst"),d(Er,"@firebase/firestore-compat","fire-fst-compat"),d(Er,"fire-js","fire-js"),d(Er,"firebase","fire-js-all"),Er),Fr=new Map,Ur=new Map;function Vr(e,t){try{e.container.addComponent(t)}catch(eF){Or.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),eF)}}function jr(e,t){e.container.addOrOverwriteComponent(t)}function qr(e){var t=e.name;if(Ur.has(t))return Or.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ur.set(t,e);var n,r=sn(Fr.values());try{for(r.s();!(n=r.n()).done;){Vr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Br(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lr;Br(e,t).clearInstance(n)}function Wr(){Ur.clear()}var Kr=(d(Ir={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),d(Ir,"bad-app-name","Illegal App name: '{$appName}"),d(Ir,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),d(Ir,"app-deleted","Firebase App named '{$appName}' already deleted"),d(Ir,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),d(Ir,"invalid-log-argument","First argument to `onLog` must be null or a function."),d(Ir,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),d(Ir,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),d(Ir,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),d(Ir,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ir),Gr=new Vn("app","Firebase",Kr),Hr=function(){function e(t,n,r){var i=this;rn(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mr("app",(function(){return i}),"PUBLIC"))}return on(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}]),e}(),Qr="9.6.10";function Yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Lr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Gr.create("bad-app-name",{appName:String(i)});var a=Fr.get(i);if(a){if(Yn(e,a.options)&&Yn(r,a.config))return a;throw Gr.create("duplicate-app",{appName:i})}var o,s=new br(i),u=sn(Ur.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new Hr(e,r,s);return Fr.set(i,l),l}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr,t=Fr.get(e);if(!t)throw Gr.create("no-app",{appName:e});return t}function Jr(){return Array.from(Fr.values())}function Xr(e){return Zr.apply(this,arguments)}function Zr(){return(Zr=a(h.mark((function e(t){var n;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Fr.has(n)){e.next=6;break}return Fr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ei(e,t,n){var r,i=null!==(r=Mr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Or.warn(s.join(" "))}qr(new mr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ti(e,t){if(null!==e&&"function"!==typeof e)throw Gr.create("invalid-log-argument");!function(e,t){var n,r=sn(xr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Tr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:wr[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ni(e){var t;t=e,xr.forEach((function(e){e.setLogLevel(t)}))}var ri="firebase-heartbeat-store",ii=null;function ai(){var e,t,n;return ii||(ii=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(ri)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new hr(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new hr(a.result),e.oldVersion,e.newVersion,new fr(a.transaction))}}catch(eF){i("Error opening indexedDB: ".concat(eF.message))}}))).catch((function(e){throw Gr.create("storage-open",{originalErrorMessage:e.message})}))),ii}function oi(e){return si.apply(this,arguments)}function si(){return si=a(h.mark((function e(t){var n;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ai();case 3:return n=e.sent,e.abrupt("return",n.transaction(ri).objectStore(ri).get(li(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Gr.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),si.apply(this,arguments)}function ui(e,t){return ci.apply(this,arguments)}function ci(){return ci=a(h.mark((function e(t,n){var r,i,a;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ai();case 3:return r=e.sent,i=r.transaction(ri,"readwrite"),a=i.objectStore(ri),e.next=8,a.put(n,li(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Gr.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ci.apply(this,arguments)}function li(e){return"".concat(e.name,"!").concat(e.options.appId)}var hi=function(){function e(t){var n=this;rn(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new yi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return on(e,[{key:"triggerHeartbeat",value:function(){var e=a(h.mark((function e(){var t,n,r;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=fi(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=a(h.mark((function e(){var t,n,r,i,a;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=fi(),n=di(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=In(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function fi(){return(new Date).toISOString().substring(0,10)}function di(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=sn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),mi(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),mi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var pi,vi,yi=function(){function e(t){rn(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return on(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=a(h.mark((function e(){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(zi){t(zi)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=a(h.mark((function e(){var t;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,oi(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=a(h.mark((function e(t){var n,r;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ui(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=a(h.mark((function e(t){var n,r;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ui(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(yr(r.heartbeats),yr(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function mi(e){return In(JSON.stringify({version:2,heartbeats:e})).length}pi="",qr(new mr("platform-logger",(function(e){return new Ar(e)}),"PRIVATE")),qr(new mr("heartbeat",(function(e){return new hi(e)}),"PRIVATE")),ei(Rr,Dr,pi),ei(Rr,Dr,"esm2017"),ei("fire-js","");var gi=function(){function e(t,n){var r=this;rn(this,e),this._delegate=t,this.firebase=n,Vr(t,new mr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return on(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Xr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Vr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){jr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ki=(d(vi={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),d(vi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),vi),_i=new Vn("app-compat","Firebase",ki);var wi=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Yr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Kn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ei,setLogLevel:ni,onLog:ti,apps:null,SDK_VERSION:Qr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(qr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw _i.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Sn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Kn(n,e=e||Lr))throw _i.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(gi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Sn(n,e)},createSubscribe:tr,ErrorFactory:Vn,deepExtend:Sn}),n}(),bi=new Pr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){bi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var xi=self.firebase.SDK_VERSION;xi&&xi.indexOf("LITE")>=0&&bi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ei=wi;!function(e){ei("@firebase/app-compat","0.1.21",e)}();Ei.registerVersion("firebase","9.6.10","app-compat");var Ii="@firebase/database",Ti="0.12.7",Si="";function Ci(e){Si=e}var Ni=function(){function e(t){rn(this,e),this.domStorage_=t,this.prefix_="firebase:"}return on(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zn(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Bn(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Pi=function(){function e(){rn(this,e),this.cache_={},this.isInMemoryStorage=!0}return on(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Kn(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Ai=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ni(t)}}catch(eF){}return new Pi},Ri=Ai("localStorage"),Di=Ai("sessionStorage"),Oi=new Pr("@firebase/database"),Li=function(){var e=1;return function(){return e++}}(),Mi=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,_n(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new er;n.update(t);var r=n.digest();return xn.encodeByteArray(r)},Fi=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?zn(r):r,t+=" "}return t},Ui=null,Vi=!0,ji=function(e,t){_n(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Oi.logLevel=wr.VERBOSE,Ui=Oi.log.bind(Oi),t&&Di.set("logging_enabled",!0)):"function"===typeof e?Ui=e:(Ui=null,Di.remove("logging_enabled"))},qi=function(){if(!0===Vi&&(Vi=!1,null===Ui&&!0===Di.get("logging_enabled")&&ji(!0)),Ui){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Fi.apply(null,t);Ui(r)}},Bi=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];qi.apply(void 0,[e].concat(n))}},zi=function(){var e="FIREBASE INTERNAL ERROR: "+Fi.apply(void 0,arguments);Oi.error(e)},Wi=function(){var e="FIREBASE FATAL ERROR: ".concat(Fi.apply(void 0,arguments));throw Oi.error(e),new Error(e)},Ki=function(){var e="FIREBASE WARNING: "+Fi.apply(void 0,arguments);Oi.warn(e)},Gi=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Hi="[MIN_NAME]",Qi="[MAX_NAME]",Yi=function(e,t){if(e===t)return 0;if(e===Hi||t===Qi)return-1;if(t===Hi||e===Qi)return 1;var n=aa(e),r=aa(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},$i=function(e,t){return e===t?0:e<t?-1:1},Ji=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+zn(t))},Xi=function e(t){if("object"!==typeof t||null===t)return zn(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=zn(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Zi=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ea(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ta=function(e){_n(!Gi(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var na=new RegExp("^-?(0*)\\d{1,10}$"),ra=-2147483648,ia=2147483647,aa=function(e){if(na.test(e)){var t=Number(e);if(t>=ra&&t<=ia)return t}return null},oa=function(e){try{e()}catch(eF){setTimeout((function(){var t=eF.stack||"";throw Ki("Exception was thrown by user callback.",t),eF}),Math.floor(0))}},sa=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},ua=function(){function e(t,n){var r=this;rn(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return on(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Ki('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),ca=function(){function e(t,n,r){var i=this;rn(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return on(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(qi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ki(e)}}]),e}(),la=function(){function e(t){rn(this,e),this.accessToken=t}return on(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();la.OWNER="owner";var ha="5",fa=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,da="websocket",pa="long_polling",va=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];rn(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ri.get("host:"+t)||this._host}return on(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ri.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function ya(e,t,n){var r;if(_n("string"===typeof t,"typeof type must == string"),_n("object"===typeof n,"typeof params must == object"),t===da)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==pa)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return ea(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var ma=function(){function e(){rn(this,e),this.counters_={}}return on(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Kn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Sn(void 0,this.counters_)}}]),e}(),ga={},ka={};function _a(e){var t=e.toString();return ga[t]||(ga[t]=new ma),ga[t]}var wa=function(){function e(t){rn(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return on(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&oa((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),ba="start",xa="close",Ea=function(){function e(t,n,r,i,a,o,s){var u=this;rn(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Bi(t),this.stats_=_a(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),ya(n,pa,e)}}return on(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wa(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Mn()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ia((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ba)n.id=a,n.password=o;else{if(i!==xa)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ha,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&fa.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=zn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=En(t),r=Zi(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Mn()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=zn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Mn()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Ia=function(){function e(t,n,r,i){if(rn(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Mn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Li(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(eF){qi("frame writing exception"),eF.stack&&qi(eF.stack),qi(eF)}}}return on(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Mn()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){qi("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(eF){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||qi("No IE domain setting required")}catch(eF){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Ta=null;"undefined"!==typeof MozWebSocket?Ta=MozWebSocket:"undefined"!==typeof WebSocket&&(Ta=WebSocket);var Sa=function(){function e(t,n,r,i,a,o,s){rn(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Bi(this.connId),this.stats_=_a(n),this.connURL=e.connectionURL_(n,o,s,i),this.nodeAdmin=n.nodeAdmin}return on(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ri.set("previous_websocket_failure",!0);try{if(Mn()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(ha,"/").concat(Si,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/react-twitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyA3SUQj8WTLh7qV-DOVAUOH1sldsHWmZQ4",REACT_APP_FIREBASE_AUTH_DOMAIN:"react-twitter-1ec0b.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://react-twitter-1ec0b-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-CDZSJK6JS3",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1:72562846999:web:d19142c26bed916f8d1b52",REACT_APP_FIREBASE_PROJECT_ID:"react-twitter-1ec0b",REACT_APP_FIREBASE_SENDER_ID:"72562846999",REACT_APP_FIREBASE_STORAGE_BUCKET:"react-twitter-1ec0b.appspot.com"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new Ta(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Ta(this.connURL,[],s)}}catch(eF){this.log_("Error instantiating WebSocket.");var u=eF.message||eF.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Ri.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Bn(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(_n(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=zn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Zi(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(eF){this.log_("Exception thrown from WebSocket.send():",eF.message||eF.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=ha,!Mn()&&"undefined"!==typeof location&&location.hostname&&fa.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),ya(e,da,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Ta&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Ri.isInMemoryStorage||!0===Ri.get("previous_websocket_failure")}}]),e}();Sa.responsesRequiredToBeHealthy=2,Sa.healthyTimeout=3e4;var Ca=function(){function e(t){rn(this,e),this.initTransports_(t)}return on(e,[{key:"initTransports_",value:function(t){var n=Sa&&Sa.isAvailable(),r=n&&!Sa.previouslyFailed();if(t.webSocketOnly&&(n||Ki("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Sa];else{var i,a=this.transports_=[],o=sn(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Ea,Sa]}}]),e}(),Na=function(){function e(t,n,r,i,a,o,s,u,c,l){rn(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Bi("c:"+this.id+":"),this.transportManager_=new Ca(n),this.log_("Connection created"),this.start_()}return on(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=sa((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Ji("t",e),n=Ji("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Ji("t",e),n=Ji("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Ji("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?zi("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zi("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ha!==n&&Ki("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),sa((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sa((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ri.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Pa=function(){function e(){rn(this,e)}return on(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Aa=function(){function e(t){rn(this,e),this.allowedEvents_=t,this.listeners_={},_n(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return on(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=yr(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){_n(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Ra=function(e){cn(n,e);var t=pn(n);function n(){var e;return rn(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||An()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return on(n,[{key:"getInitialEvent",value:function(e){return _n("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Aa),Da=function(){function e(t,n){if(rn(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return on(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Oa(){return new Da("")}function La(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ma(e){return e.pieces_.length-e.pieceNum_}function Fa(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Da(e.pieces_,t)}function Ua(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Va(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ja(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Da(t,0)}function qa(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Da)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Da(n,0)}function Ba(e){return e.pieceNum_>=e.pieces_.length}function za(e,t){var n=La(e),r=La(t);if(null===n)return t;if(n===r)return za(Fa(e),Fa(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Wa(e,t){for(var n=Va(e,0),r=Va(t,0),i=0;i<n.length&&i<r.length;i++){var a=Yi(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Ka(e,t){if(Ma(e)!==Ma(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ga(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Ma(e)>Ma(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ha=on((function e(t,n){rn(this,e),this.errorPrefix_=n,this.parts_=Va(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ur(this.parts_[r]);Qa(this)}));function Qa(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ya(e))}function Ya(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var $a=function(e){cn(n,e);var t=pn(n);function n(){var e,r,i;return rn(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return on(n,[{key:"getInitialEvent",value:function(e){return _n("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Aa),Ja=1e3,Xa=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a,o,s,u,c){var l;if(rn(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Bi("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Ja,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Mn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return $a.getInstance().on("visible",l.onVisible_,un(l)),-1===e.host.indexOf("fblocal")&&Ra.getInstance().on("online",l.onOnline_,un(l)),l}return on(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(zn(i)),_n(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Cn,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),_n(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_n(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Wn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Wn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),_n(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+zn(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):zi("Unrecognized action received from server: "+zn(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;_n(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ja),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=a(f().mark((function e(){var t,r,i,a,o,s,u,c,h,d,p,v,y,m,g=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){_n(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:p=e.sent,v=l(p,2),y=v[0],m=v[1],s?qi("getToken() completed but was canceled"):(qi("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=m&&m.token,u=new Na(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Ki(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Ki(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){qi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){qi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Hn(this.interruptReasons_)&&(this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Xi(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Da(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){qi("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){qi("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=sn(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=sn(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Mn()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Si.replace(/\./g,"-")]=1,An()?e["framework.cordova"]=1:On()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Ra.getInstance().currentlyOnline();return Hn(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Kn(e,"w")){var n=Gn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Ki("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Pa);Xa.nextPersistentConnectionId_=0,Xa.nextConnectionId_=0;var Za,eo=function(){function e(t,n){rn(this,e),this.name=t,this.node=n}return on(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),to=function(){function e(){rn(this,e)}return on(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new eo(Hi,e),r=new eo(Hi,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return eo.MIN}}]),e}(),no=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"compare",value:function(e,t){return Yi(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw wn("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return eo.MIN}},{key:"maxPost",value:function(){return new eo(Qi,Za)}},{key:"makePost",value:function(e,t){return _n("string"===typeof e,"KeyIndex indexValue must always be a string."),new eo(e,Za)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Za},set:function(e){Za=e}}]),n}(to),ro=new no,io=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;rn(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return on(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),ao=function(){function e(t,n,r,i,a){rn(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:uo.EMPTY_NODE,this.right=null!=a?a:uo.EMPTY_NODE}return on(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return uo.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return uo.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();ao.RED=!0,ao.BLACK=!1;var oo,so=function(){function e(){rn(this,e)}return on(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ao(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),uo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;rn(this,e),this.comparator_=t,this.root_=n}return on(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ao.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ao.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new io(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new io(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new io(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new io(this.root_,null,this.comparator_,!0,e)}}]),e}();function co(e,t){return Yi(e.name,t.name)}function lo(e,t){return Yi(e,t)}uo.EMPTY_NODE=new so;var ho,fo,po,vo=function(e){return"number"===typeof e?"number:"+ta(e):"string:"+e},yo=function(e){if(e.isLeafNode()){var t=e.val();_n("string"===typeof t||"number"===typeof t||"object"===typeof t&&Kn(t,".sv"),"Priority must be a string or number.")}else _n(e===oo||e.isEmpty(),"priority of unexpected type.");_n(e===oo||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},mo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;rn(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,_n(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),yo(this.priorityNode_)}return on(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Ba(t)?this:".priority"===La(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=La(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(_n(".priority"!==r||1===Ma(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fa(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+vo(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ta(this.value_):this.value_,this.lazyHash_=Mi(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(_n(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return _n(i>=0,"Unknown leaf type: "+n),_n(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return ho},set:function(e){ho=e}}]),e}();mo.VALUE_TYPE_ORDER=["object","boolean","number","string"];var go,ko,_o=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Yi(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return eo.MIN}},{key:"maxPost",value:function(){return new eo(Qi,new mo("[PRIORITY-POST]",po))}},{key:"makePost",value:function(e,t){var n=fo(e);return new eo(t,new mo("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(to),wo=new _o,bo=Math.log(2),xo=function(){function e(t){rn(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/bo,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return on(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Eo=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new ao(o,a.node,ao.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new ao(o,a.node,ao.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new ao(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,ao.BLACK):(s(h,ao.BLACK),s(h,ao.RED))}return a}(new xo(e.length));return new uo(r||t,a)},Io={},To=function(){function e(t,n){rn(this,e),this.indexes_=t,this.indexSet_=n}return on(e,[{key:"get",value:function(e){var t=Gn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof uo?t:null}},{key:"hasIndex",value:function(e){return Kn(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){_n(t!==ro,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(eo.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Eo(i,t.getCompare()):Io;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Qn(this.indexes_,(function(e,i){var a=Gn(r.indexSet_,i);if(_n(a,"Missing index implementation for "+i),e===Io){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(eo.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Eo(o,a.getCompare())}return Io}var c=n.get(t.name),l=e;return c&&(l=l.remove(new eo(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Qn(this.indexes_,(function(e){if(e===Io)return e;var r=n.get(t.name);return r?e.remove(new eo(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return _n(Io&&wo,"ChildrenNode.ts has not been loaded"),go=go||new e({".priority":Io},{".priority":wo})}}]),e}(),So=function(){function e(t,n,r){rn(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yo(this.priorityNode_),this.children_.isEmpty()&&_n(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return on(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||ko}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ko:t}},{key:"getChild",value:function(e){var t=La(e);return null===t?this:this.getImmediateChild(t).getChild(Fa(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(_n(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new eo(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?ko:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=La(e);if(null===n)return t;_n(".priority"!==La(e)||1===Ma(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Fa(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(wo,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+vo(this.getPriority().val())+":"),this.forEachChild(wo,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Mi(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new eo(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new eo(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new eo(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,eo.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,eo.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Co?-1:0}},{key:"withIndex",value:function(t){if(t===ro||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===ro||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(wo),r=t.getIterator(wo),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===ro?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return ko||(ko=new e(new uo(lo),null,To.Default))}}]),e}();So.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Co=new(function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.call(this,new uo(lo),So.EMPTY_NODE,To.Default)}return on(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return So.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(So));Object.defineProperties(eo,{MIN:{value:new eo(Hi,So.EMPTY_NODE)},MAX:{value:new eo(Qi,Co)}}),no.__EMPTY_NODE=So.EMPTY_NODE,mo.__childrenNodeConstructor=So,oo=Co,function(e){po=e}(Co);function No(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return So.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),_n(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new mo(n,No(t))}if(e instanceof Array){var r=So.EMPTY_NODE;return ea(e,(function(t,n){if(Kn(e,t)&&"."!==t.substring(0,1)){var i=No(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(No(t))}var i=[],a=!1,o=e;if(ea(o,(function(e,t){if("."!==e.substring(0,1)){var n=No(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new eo(e,n)))}})),0===i.length)return So.EMPTY_NODE;var s=Eo(i,co,(function(e){return e.name}),lo);if(a){var u=Eo(i,wo.getCompare());return new So(s,No(t),new To({".priority":u},{".priority":wo}))}return new So(s,No(t),To.Default)}!function(e){fo=e}(No);var Po=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this)).indexPath_=e,_n(!Ba(e)&&".priority"!==La(e),"Can't create PathIndex with empty path or .priority key"),r}return on(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Yi(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=No(e),r=So.EMPTY_NODE.updateChild(this.indexPath_,n);return new eo(t,r)}},{key:"maxPost",value:function(){var e=So.EMPTY_NODE.updateChild(this.indexPath_,Co);return new eo(Qi,e)}},{key:"toString",value:function(){return Va(this.indexPath_,0).join("/")}}]),n}(to),Ao=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Yi(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return eo.MIN}},{key:"maxPost",value:function(){return eo.MAX}},{key:"makePost",value:function(e,t){var n=No(e);return new eo(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(to),Ro=new Ao,Do="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Oo=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Do.charAt(n%64),n=Math.floor(n/64);_n(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Do.charAt(t[r]);return _n(20===o.length,"nextPushId: Length should be 20."),o}}(),Lo=function(e){if("2147483647"===e)return"-";var t=aa(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Qi;var a=n[i],o=Do.charAt(Do.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},Mo=function(e){if("-2147483648"===e)return Hi;var t=aa(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Do.charAt(Do.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function Fo(e){return{type:"value",snapshotNode:e}}function Uo(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Vo(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function jo(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var qo=function(){function e(t){rn(this,e),this.index_=t}return on(e,[{key:"updateChild",value:function(e,t,n,r,i,a){_n(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Vo(t,o)):_n(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Uo(t,n)):a.trackChildChange(jo(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(wo,(function(e,r){t.hasChild(e)||n.trackChildChange(Vo(e,r))})),t.isLeafNode()||t.forEachChild(wo,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(jo(t,r,i))}else n.trackChildChange(Uo(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?So.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Bo=function(){function e(t){rn(this,e),this.indexedFilter_=new qo(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return on(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new eo(t,n))||(n=So.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=So.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(So.EMPTY_NODE);var i=this;return t.forEachChild(wo,(function(e,t){i.matches(new eo(e,t))||(r=r.updateImmediateChild(e,So.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),zo=function(){function e(t){rn(this,e),this.rangedFilter_=new Bo(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return on(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new eo(t,n))||(n=So.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=So.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=So.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(So.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,So.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;_n(s.numChildren()===this.limit_,"");var u=new eo(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(jo(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Vo(t,h));var p=s.updateImmediateChild(t,So.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Uo(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(Vo(c.name,c.node)),i.trackChildChange(Uo(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,So.EMPTY_NODE)):e}}]),e}(),Wo=function(){function e(){rn(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wo}return on(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return _n(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return _n(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hi}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return _n(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return _n(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qi}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return _n(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===wo}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Ko(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Go(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ho(e,t){var n=e.copy();return n.index_=t,n}function Qo(e){var t,n={};return e.isDefault()||(e.index_===wo?t="$priority":e.index_===Ro?t="$value":e.index_===ro?t="$key":(_n(e.index_ instanceof Po,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=zn(t),e.startSet_&&(n.startAt=zn(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+zn(e.indexStartName_))),e.endSet_&&(n.endAt=zn(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+zn(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Yo(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==wo&&(t.i=e.index_.toString()),t}var $o=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a){var o;return rn(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Bi("p:rest:"),o.listens_={},o}return on(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=Qo(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Gn(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Qo(e._queryParams),r=e._path.toString(),i=new Cn;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Jn(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Bn(c.responseText)}catch(eF){Ki("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Ki("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(_n(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Pa),Jo=function(){function e(){rn(this,e),this.rootNode_=So.EMPTY_NODE}return on(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Xo(){return{value:null,children:new Map}}function Zo(e,t,n){if(Ba(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=La(t);e.children.has(r)||e.children.set(r,Xo()),Zo(e.children.get(r),t=Fa(t),n)}}function es(e,t){if(Ba(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(wo,(function(t,n){Zo(e,new Da(t),n)})),es(e,t)}if(e.children.size>0){var r=La(t);if(t=Fa(t),e.children.has(r))es(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function ts(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){ts(r,new Da(t.toString()+"/"+e),n)}))}var ns,rs=function(){function e(t){rn(this,e),this.collection_=t,this.last_=null}return on(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ea(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),is=function(){function e(t,n){rn(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new rs(t);var r=1e4+2e4*Math.random();sa(this.reportStats_.bind(this),Math.floor(r))}return on(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;ea(t,(function(t,i){i>0&&Kn(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),sa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function as(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ns||(ns={}));var os,ss=function(){function e(t,n,r){rn(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=ns.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return on(e,[{key:"operationForChild",value:function(t){if(Ba(this.path)){if(null!=this.affectedTree.value)return _n(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Da(t));return new e(Oa(),n,this.revert)}return _n(La(this.path)===t,"operationForChild called for unrelated child."),new e(Fa(this.path),this.affectedTree,this.revert)}}]),e}(),us=function(){function e(t,n){rn(this,e),this.source=t,this.path=n,this.type=ns.LISTEN_COMPLETE}return on(e,[{key:"operationForChild",value:function(t){return Ba(this.path)?new e(this.source,Oa()):new e(this.source,Fa(this.path))}}]),e}(),cs=function(){function e(t,n,r){rn(this,e),this.source=t,this.path=n,this.snap=r,this.type=ns.OVERWRITE}return on(e,[{key:"operationForChild",value:function(t){return Ba(this.path)?new e(this.source,Oa(),this.snap.getImmediateChild(t)):new e(this.source,Fa(this.path),this.snap)}}]),e}(),ls=function(){function e(t,n,r){rn(this,e),this.source=t,this.path=n,this.children=r,this.type=ns.MERGE}return on(e,[{key:"operationForChild",value:function(t){if(Ba(this.path)){var n=this.children.subtree(new Da(t));return n.isEmpty()?null:n.value?new cs(this.source,Oa(),n.value):new e(this.source,Oa(),n)}return _n(La(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Fa(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),hs=function(){function e(t,n,r){rn(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return on(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Ba(e))return this.isFullyInitialized()&&!this.filtered_;var t=La(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),fs=on((function e(t){rn(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function ds(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw wn("Should only compare child_ events.");var r=new eo(t.childName,t.snapshotNode),i=new eo(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function ps(e,t){return{eventCache:e,serverCache:t}}function vs(e,t,n,r){return ps(new hs(t,n,r),e.serverCache)}function ys(e,t,n,r){return ps(e.eventCache,new hs(t,n,r))}function ms(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function gs(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var ks=function(){return os||(os=new uo($i)),os},_s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ks();rn(this,e),this.value=t,this.children=n}return on(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Oa(),value:this.value};if(Ba(e))return null;var n=La(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Fa(e),t);return null!=i?{path:qa(new Da(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Ba(t))return this;var n=La(t),r=this.children.get(n);return null!==r?r.subtree(Fa(t)):new e(null)}},{key:"set",value:function(t,n){if(Ba(t))return new e(n,this.children);var r=La(t),i=(this.children.get(r)||new e(null)).set(Fa(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Ba(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=La(t),r=this.children.get(n);if(r){var i,a=r.remove(Fa(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Ba(e))return this.value;var t=La(e),n=this.children.get(t);return n?n.get(Fa(e)):null}},{key:"setTree",value:function(t,n){if(Ba(t))return n;var r,i=La(t),a=(this.children.get(i)||new e(null)).setTree(Fa(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Oa(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(qa(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Oa(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Ba(e))return null;var i=La(e),a=this.children.get(i);return a?a.findOnPath_(Fa(e),qa(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Oa(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Ba(t))return this;this.value&&r(n,this.value);var i=La(t),a=this.children.get(i);return a?a.foreachOnPath_(Fa(t),qa(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Oa(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(qa(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return ea(t,(function(e,t){n=n.set(new Da(e),t)})),n}}]),e}(),ws=function(){function e(t){rn(this,e),this.writeTree_=t}return on(e,null,[{key:"empty",value:function(){return new e(new _s(null))}}]),e}();function bs(e,t,n){if(Ba(t))return new ws(new _s(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=za(i,t);return a=a.updateChild(o,n),new ws(e.writeTree_.set(i,a))}var s=new _s(n),u=e.writeTree_.setTree(t,s);return new ws(u)}function xs(e,t,n){var r=e;return ea(n,(function(e,n){r=bs(r,qa(t,e),n)})),r}function Es(e,t){if(Ba(t))return ws.empty();var n=e.writeTree_.setTree(t,new _s(null));return new ws(n)}function Is(e,t){return null!=Ts(e,t)}function Ts(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(za(n.path,t)):null}function Ss(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(wo,(function(e,n){t.push(new eo(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new eo(e,n.value))})),t}function Cs(e,t){if(Ba(t))return e;var n=Ts(e,t);return new ws(null!=n?new _s(n):e.writeTree_.subtree(t))}function Ns(e){return e.writeTree_.isEmpty()}function Ps(e,t){return As(Oa(),e.writeTree_,t)}function As(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(_n(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=As(qa(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(qa(e,".priority"),r)),n}function Rs(e,t){return Gs(t,e)}function Ds(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Os(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));_n(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Ls(s,r.path)?i=!1:Ga(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Fs(e.allWrites,Ms,Oa()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Es(e.visibleWrites,r.path):ea(r.children,(function(t){e.visibleWrites=Es(e.visibleWrites,qa(r.path,t))}));return!0}return!1}function Ls(e,t){if(e.snap)return Ga(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ga(qa(e.path,n),t))return!0;return!1}function Ms(e){return e.visible}function Fs(e,t,n){for(var r=ws.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Ga(n,o)?r=bs(r,s=za(n,o),a.snap):Ga(o,n)&&(s=za(o,n),r=bs(r,Oa(),a.snap.getChild(s)));else{if(!a.children)throw wn("WriteRecord should have .snap or .children");if(Ga(n,o))r=xs(r,s=za(n,o),a.children);else if(Ga(o,n))if(Ba(s=za(o,n)))r=xs(r,Oa(),a.children);else{var u=Gn(a.children,La(s));if(u){var c=u.getChild(Fa(s));r=bs(r,Oa(),c)}}}}}return r}function Us(e,t,n,r,i){if(r||i){var a=Cs(e.visibleWrites,t);if(!i&&Ns(a))return n;if(i||null!=n||Is(a,Oa())){return Ps(Fs(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ga(e.path,t)||Ga(t,e.path))}),t),n||So.EMPTY_NODE)}return null}var o=Ts(e.visibleWrites,t);if(null!=o)return o;var s=Cs(e.visibleWrites,t);return Ns(s)?n:null!=n||Is(s,Oa())?Ps(s,n||So.EMPTY_NODE):null}function Vs(e,t,n,r){return Us(e.writeTree,e.treePath,t,n,r)}function js(e,t){return function(e,t,n){var r=So.EMPTY_NODE,i=Ts(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(wo,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Cs(e.visibleWrites,t);return n.forEachChild(wo,(function(e,t){var n=Ps(Cs(a,new Da(e)),t);r=r.updateImmediateChild(e,n)})),Ss(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Ss(Cs(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function qs(e,t,n,r){return function(e,t,n,r,i){_n(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=qa(t,n);if(Is(e.visibleWrites,a))return null;var o=Cs(e.visibleWrites,a);return Ns(o)?i.getChild(n):Ps(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Bs(e,t){return function(e,t){return Ts(e.visibleWrites,t)}(e.writeTree,qa(e.treePath,t))}function zs(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=Cs(e.visibleWrites,t),c=Ts(u,Oa());if(null!=c)s=c;else{if(null==n)return[];s=Ps(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Ws(e,t,n){return function(e,t,n,r){var i=qa(t,n),a=Ts(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Ps(Cs(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ks(e,t){return Gs(qa(e.treePath,t),e.writeTree)}function Gs(e,t){return{treePath:e,writeTree:t}}var Hs=function(){function e(){rn(this,e),this.changeMap=new Map}return on(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;_n("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),_n(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,jo(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Vo(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Uo(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw wn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,jo(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Qs=new(function(){function e(){rn(this,e)}return on(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Ys=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;rn(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return on(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new hs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ws(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:gs(this.viewCache_),i=zs(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function $s(e,t,n,r,i){var a,o,s=new Hs;if(n.type===ns.OVERWRITE){var u=n;u.source.fromUser?a=Zs(e,t,u.path,u.snap,r,i,s):(_n(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Ba(u.path),a=Xs(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===ns.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=qa(n,r);eu(t,La(c))&&(s=Zs(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=qa(n,r);eu(t,La(c))||(s=Zs(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(_n(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=nu(e,t,c.path,c.children,r,i,o,s))}else if(n.type===ns.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Bs(r,n))return t;var s,u=new Ys(r,t,i),c=t.eventCache.getNode();if(Ba(n)||".priority"===La(n)){var l;if(t.serverCache.isFullyInitialized())l=Vs(r,gs(t));else{var h=t.serverCache.getNode();_n(h instanceof So,"serverChildren would be complete if leaf node"),l=js(r,h)}l=l,s=e.filter.updateFullNode(c,l,a)}else{var f=La(n),d=Ws(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,Fa(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,So.EMPTY_NODE,Fa(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Vs(r,gs(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Bs(r,Oa()),vs(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Bs(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Ba(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Xs(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Ba(n)){var c=new _s(null);return u.getNode().forEachChild(ro,(function(e,t){c=c.set(new Da(e),t)})),nu(e,t,n,c,i,a,s,o)}return t}var l=new _s(null);return r.foreach((function(e,t){var r=qa(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),nu(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==ns.LISTEN_COMPLETE)throw wn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=ys(t,a.getNode(),a.isFullyInitialized()||Ba(n),a.isFiltered());return Js(e,o,n,r,Qs,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ms(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Fo(ms(t)))}}(t,a,h),{viewCache:a,changes:h}}function Js(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Bs(r,n))return t;if(Ba(n))if(_n(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=gs(t),l=js(r,c instanceof So?c:So.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Vs(r,gs(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=La(n);if(".priority"===f){_n(1===Ma(n),"Can't have a priority with additional path components");var d=u.getNode(),p=qs(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=Fa(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=qs(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=Ws(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return vs(t,o,u.isFullyInitialized()||Ba(n),e.filter.filtersNodes())}function Xs(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Ba(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=La(n);if(!c.isCompleteForPath(n)&&Ma(n)>1)return t;var d=Fa(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Qs,null)}var v=ys(t,u,c.isFullyInitialized()||Ba(n),l.filtersNodes());return Js(e,v,n,i,new Ys(i,v,a),s)}function Zs(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new Ys(i,t,a);if(Ba(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=vs(t,u,!0,e.filter.filtersNodes());else{var h=La(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=vs(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=Fa(n),p=c.getNode().getImmediateChild(h);if(Ba(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Ua(d)&&v.getChild(ja(d)).isEmpty()?v:v.updateChild(d,r):So.EMPTY_NODE}if(p.equals(f))s=t;else s=vs(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function eu(e,t){return e.eventCache.isCompleteForChild(t)}function tu(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function nu(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Ba(n)?r:new _s(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=tu(0,t.serverCache.getNode().getImmediateChild(n),r);c=Xs(e,c,new Da(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=tu(0,t.serverCache.getNode().getImmediateChild(n),r);c=Xs(e,c,new Da(n),h,i,a,o,s)}})),c}var ru,iu=function(){function e(t,n){rn(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new qo(i.getIndex()),o=(r=i).loadsAllData()?new qo(r.getIndex()):r.hasLimit()?new zo(r):new Bo(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(So.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(So.EMPTY_NODE,u.getNode(),null),h=new hs(c,s.isFullyInitialized(),a.filtersNodes()),f=new hs(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=ps(f,h),this.eventGenerator_=new fs(this.query_)}return on(e,[{key:"query",get:function(){return this.query_}}]),e}();function au(e,t){var n=gs(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ba(t)&&!n.getImmediateChild(La(t)).isEmpty())?n.getChild(t):null}function ou(e){return 0===e.eventRegistrations_.length}function su(e,t,n){var r=[];if(n){_n(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function uu(e,t,n,r){t.type===ns.MERGE&&null!==t.source.queryId&&(_n(gs(e.viewCache_),"We should always have a full cache before handling merges"),_n(ms(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=$s(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,_n(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),_n(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),_n(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,cu(e,s.changes,s.viewCache.eventCache.getNode(),null)}function cu(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),ds(e,i,"child_removed",t,r,n),ds(e,i,"child_added",t,r,n),ds(e,i,"child_moved",a,r,n),ds(e,i,"child_changed",t,r,n),ds(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var lu,hu=on((function e(){rn(this,e),this.views=new Map}));function fu(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return _n(null!=a,"SyncTree gave us an op for an invalid query."),uu(a,t,n,r)}var o,s=[],u=sn(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(uu(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function du(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=Vs(n,i?r:null),u=!1;s?u=!0:r instanceof So?(s=js(n,r),u=!1):(s=So.EMPTY_NODE,u=!1);var c=ps(new hs(s,u,!1),new hs(r,i,!1));return new iu(t,c)}return o}function pu(e,t,n,r,i,a){var o=du(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(wo,(function(e,t){r.push(Uo(e,t))})),n.isFullyInitialized()&&r.push(Fo(n.getNode())),cu(e,r,n.getNode(),t)}(o,n)}function vu(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=_u(e);if("default"===i){var u,c=sn(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];o=o.concat(su(d,n,r)),ou(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(su(p,n,r)),ou(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!_u(e)&&a.push(new(_n(ru,"Reference.ts has not been loaded"),ru)(t._repo,t._path)),{removed:a,events:o}}function yu(e){var t,n=[],r=sn(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function mu(e,t){var n,r=null,i=sn(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||au(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function gu(e,t){if(t._queryParams.loadsAllData())return wu(e);var n=t._queryIdentifier;return e.views.get(n)}function ku(e,t){return null!=gu(e,t)}function _u(e){return null!=wu(e)}function wu(e){var t,n=sn(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var bu=1,xu=on((function e(t){rn(this,e),this.listenProvider_=t,this.syncPointTree_=new _s(null),this.pendingWriteTree_={visibleWrites:ws.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Eu(e,t,n,r,i){return function(e,t,n,r,i){_n(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=bs(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Ru(e,new cs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Iu(e,t,n,r){!function(e,t,n,r){_n(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=xs(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=_s.fromObject(n);return Ru(e,new ls({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Tu(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ds(e.pendingWriteTree_,t),i=Os(e.pendingWriteTree_,t);if(i){var a=new _s(null);return null!=r.snap?a=a.set(Oa(),!0):ea(r.children,(function(e){a=a.set(new Da(e),!0)})),Ru(e,new ss(r.path,a,n))}return[]}function Su(e,t,n){return Ru(e,new cs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Cu(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||ku(a,t))){var s=vu(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return _u(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&_u(t))return[wu(t)];var r=[];return t&&(r=yu(t)),ea(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=Lu(e,p);e.listenProvider_.startListening(qu(v),Mu(e,v),y.hashFn,y.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(qu(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(Fu(t));e.listenProvider_.stopListening(qu(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Fu(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,u)}return o}function Nu(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=za(e,r);i=i||mu(t,n),a=a||_u(t)}));var o,s=e.syncPointTree_.get(r);(s?(a=a||_u(s),i=i||mu(s,Oa())):(s=new hu,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?o=!0:(o=!1,i=So.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=mu(t,Oa());n&&(i=i.updateImmediateChild(e,n))})));var u=ku(s,t);if(!u&&!t._queryParams.loadsAllData()){var c=Fu(t);_n(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=bu++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var h=pu(s,t,n,Rs(e.pendingWriteTree_,r),i,o);if(!u&&!a){var f=gu(s,t);h=h.concat(function(e,t,n){var r=t._path,i=Mu(e,t),a=Lu(e,n),o=e.listenProvider_.startListening(qu(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)_n(!_u(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!Ba(e)&&t&&_u(t))return[wu(t).query];var r=[];return t&&(r=r.concat(yu(t).map((function(e){return e.query})))),ea(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(qu(l),Mu(e,l))}return o}(e,t,f))}return h}function Pu(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=mu(n,za(e,t));if(r)return r}));return Us(r,t,i,n,!0)}function Au(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=za(e,n);r=r||mu(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||mu(i,Oa()):(i=new hu,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new hs(r,!0,!1):null;return function(e){return ms(e.viewCache_)}(du(i,t,Rs(e.pendingWriteTree_,t._path),a?o.getNode():So.EMPTY_NODE,a))}function Ru(e,t){return Du(t,e.syncPointTree_,null,Rs(e.pendingWriteTree_,Oa()))}function Du(e,t,n,r){if(Ba(e.path))return Ou(e,t,n,r);var i=t.get(Oa());null==n&&null!=i&&(n=mu(i,Oa()));var a=[],o=La(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Ks(r,o);a=a.concat(Du(s,u,c,l))}return i&&(a=a.concat(fu(i,e,r,n))),a}function Ou(e,t,n,r){var i=t.get(Oa());null==n&&null!=i&&(n=mu(i,Oa()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Ks(r,t),u=e.operationForChild(t);u&&(a=a.concat(Ou(u,i,o,s)))})),i&&(a=a.concat(fu(i,e,r,n))),a}function Lu(e,t){var n=t.query,r=Mu(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||So.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Uu(e,n);if(r){var i=Vu(r),a=i.path,o=i.queryId,s=za(a,t);return ju(e,a,new us(as(o),s))}return[]}(e,n._path,r):function(e,t){return Ru(e,new us({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Cu(e,n,null,i)}}}function Mu(e,t){var n=Fu(t);return e.queryToTagMap.get(n)}function Fu(e){return e._path.toString()+"$"+e._queryIdentifier}function Uu(e,t){return e.tagToQueryMap.get(t)}function Vu(e){var t=e.indexOf("$");return _n(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Da(e.substr(0,t))}}function ju(e,t,n){var r=e.syncPointTree_.get(t);return _n(r,"Missing sync point for query tag that we're tracking"),fu(r,n,Rs(e.pendingWriteTree_,t),null)}function qu(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(_n(lu,"Reference.ts has not been loaded"),lu)(e._repo,e._path):e}var Bu=function(){function e(t){rn(this,e),this.node_=t}return on(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),zu=function(){function e(t,n){rn(this,e),this.syncTree_=t,this.path_=n}return on(e,[{key:"getImmediateChild",value:function(t){var n=qa(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Pu(this.syncTree_,this.path_)}}]),e}(),Wu=function(e,t,n){return e&&"object"===typeof e?(_n(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ku(e[".sv"],t,n):"object"===typeof e[".sv"]?Gu(e[".sv"],t):void _n(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ku=function(e,t,n){if("timestamp"===e)return n.timestamp;_n(!1,"Unexpected server value: "+e)},Gu=function(e,t,n){e.hasOwnProperty("increment")||_n(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&_n(!1,"Unexpected increment value: "+r);var i=t.node();if(_n(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Hu=function(e,t,n,r){return Yu(t,new zu(n,e),r)},Qu=function(e,t,n){return Yu(e,new Bu(t),n)};function Yu(e,t,n){var r,i=e.getPriority().val(),a=Wu(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Wu(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new mo(s,No(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new mo(a))),u.forEachChild(wo,(function(e,i){var a=Yu(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var $u=on((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};rn(this,e),this.name=t,this.parent=n,this.node=r}));function Ju(e,t){for(var n=t instanceof Da?t:new Da(t),r=e,i=La(n);null!==i;){var a=Gn(r.node.children,i)||{children:{},childCount:0};r=new $u(i,r,a),i=La(n=Fa(n))}return r}function Xu(e){return e.node.value}function Zu(e,t){e.node.value=t,ic(e)}function ec(e){return e.node.childCount>0}function tc(e,t){ea(e.node.children,(function(n,r){t(new $u(n,e,r))}))}function nc(e,t,n,r){n&&!r&&t(e),tc(e,(function(e){nc(e,t,!0,r)})),n&&r&&t(e)}function rc(e){return new Da(null===e.parent?e.name:rc(e.parent)+"/"+e.name)}function ic(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Xu(e)&&!ec(e)}(n),i=Kn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ic(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ic(e))}(e.parent,e.name,e)}var ac=/[\[\].#$\/\u0000-\u001F\u007F]/,oc=/[\[\].#$\u0000-\u001F\u007F]/,sc=10485760,uc=function(e){return"string"===typeof e&&0!==e.length&&!ac.test(e)},cc=function(e){return"string"===typeof e&&0!==e.length&&!oc.test(e)},lc=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Gi(e)||e&&"object"===typeof e&&Kn(e,".sv")},hc=function(e,t,n,r){r&&void 0===t||fc(ar(e,"value"),t,n)},fc=function e(t,n,r){var i=r instanceof Da?new Ha(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ya(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ya(i)+" with contents = "+n.toString());if(Gi(n))throw new Error(t+"contains "+n.toString()+" "+Ya(i));if("string"===typeof n&&n.length>sc/3&&ur(n)>sc)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Ya(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(ea(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!uc(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ya(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=ur(u),Qa(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ur(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ya(i)+" in addition to actual children.")}},dc=function(e,t,n,r){if(!r||void 0!==t){var i=ar(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];ea(t,(function(e,t){var r=new Da(e);if(fc(i,t,qa(n,r)),".priority"===Ua(r)&&!lc(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Va(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!uc(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Wa);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Ga(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},pc=function(e,t,n){if(!n||void 0!==t){if(Gi(t))throw new Error(ar(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lc(t))throw new Error(ar(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},vc=function(e,t,n,r){if((!r||void 0!==n)&&!uc(n))throw new Error(ar(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yc=function(e,t,n,r){if((!r||void 0!==n)&&!cc(n))throw new Error(ar(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mc=function(e,t){if(".info"===La(t))throw new Error(e+" failed = Can't modify data under /.info/")},gc=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!uc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),cc(e)}(n))throw new Error(ar(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},kc=on((function e(){rn(this,e),this.eventLists_=[],this.recursionDepth_=0}));function _c(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Ka(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function wc(e,t,n){_c(e,n),xc(e,(function(e){return Ka(e,t)}))}function bc(e,t,n){_c(e,n),xc(e,(function(e){return Ga(e,t)||Ga(t,e)}))}function xc(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Ec(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Ec(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ui&&qi("event: "+n.toString()),oa(r)}}}var Ic="repo_interrupt",Tc=function(){function e(t,n,r,i){rn(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xo(),this.transactionQueueTree_=new $u,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return on(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Sc(e,t,n){if(e.stats_=_a(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new $o(e.repoInfo_,(function(t,n,r,i){Pc(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Ac(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zn(n)}catch(eF){throw new Error("Invalid authOverride provided: "+eF)}}e.persistentConnection_=new Xa(e.repoInfo_,t,(function(t,n,r,i){Pc(e,t,n,r,i)}),(function(t){Ac(e,t)}),(function(t){!function(e,t){ea(t,(function(t,n){Rc(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return ka[n]||(ka[n]=t()),ka[n]}(e.repoInfo_,(function(){return new is(e.stats_,e.server_)})),e.infoData_=new Jo,e.infoSyncTree_=new xu({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Su(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Rc(e,"connected",!1),e.serverSyncTree_=new xu({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);bc(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Cc(e){var t=e.infoData_.getNode(new Da(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Nc(e){return(t=(t={timestamp:Cc(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Pc(e,t,n,r,i){e.dataUpdateCount++;var a=new Da(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Qn(n,(function(e){return No(e)}));o=function(e,t,n,r){var i=Uu(e,r);if(i){var a=Vu(i),o=a.path,s=a.queryId,u=za(o,t),c=_s.fromObject(n);return ju(e,o,new ls(as(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=No(n);o=function(e,t,n,r){var i=Uu(e,r);if(null!=i){var a=Vu(i),o=a.path,s=a.queryId,u=za(o,t);return ju(e,o,new cs(as(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=Qn(n,(function(e){return No(e)}));o=function(e,t,n){var r=_s.fromObject(n);return Ru(e,new ls({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=No(n);o=Su(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=Wc(e,a)),bc(e.eventQueue_,h,o)}function Ac(e,t){Rc(e,"connected",t),!1===t&&function(e){Vc(e,"onDisconnectEvents");var t=Nc(e),n=Xo();ts(e.onDisconnect_,Oa(),(function(r,i){var a=Hu(r,i,e.serverSyncTree_,t);Zo(n,r,a)}));var r=[];ts(n,Oa(),(function(t,n){r=r.concat(Su(e.serverSyncTree_,t,n));var i=Yc(e,t);Wc(e,i)})),e.onDisconnect_=Xo(),bc(e.eventQueue_,Oa(),r)}(e)}function Rc(e,t,n){var r=new Da("/.info/"+t),i=No(n);e.infoData_.updateSnapshot(r,i);var a=Su(e.infoSyncTree_,r,i);bc(e.eventQueue_,r,a)}function Dc(e){return e.nextWriteId_++}function Oc(e,t,n,r,i){Vc(e,"set",{path:t.toString(),value:n,priority:r});var a=Nc(e),o=No(n,r),s=Pu(e.serverSyncTree_,t),u=Qu(o,s,a),c=Dc(e),l=Eu(e.serverSyncTree_,t,u,c,!0);_c(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Ki("set at "+t+" failed: "+n);var o=Tu(e.serverSyncTree_,c,!a);bc(e.eventQueue_,t,o),jc(e,i,n,r)}));var h=Yc(e,t);Wc(e,h),bc(e.eventQueue_,h,[])}function Lc(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&es(e.onDisconnect_,t),jc(e,n,r,i)}))}function Mc(e,t,n,r){var i=No(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Zo(e.onDisconnect_,t,i),jc(e,r,n,a)}))}function Fc(e,t,n){var r;r=".info"===La(t._path)?Cu(e.infoSyncTree_,t,n):Cu(e.serverSyncTree_,t,n),wc(e.eventQueue_,t._path,r)}function Uc(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ic)}function Vc(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];qi.apply(void 0,[t].concat(r))}function jc(e,t,n,r){t&&oa((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function qc(e,t,n){return Pu(e.serverSyncTree_,t,n)||So.EMPTY_NODE}function Bc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Qc(e,t),Xu(t)){var n=Gc(e,t);_n(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&zc(e,rc(t),n)}else ec(t)&&tc(t,(function(t){Bc(e,t)}))}function zc(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=qc(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];_n(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=za(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Vc(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Tu(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Qc(e,Ju(e.transactionQueueTree_,t)),Bc(e,e.transactionQueueTree_),bc(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)oa(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Ki("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Wc(e,t)}}),o)}function Wc(e,t){var n=Kc(e,t),r=rc(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=za(n,u.path),l=!1,h=void 0;if(_n(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Tu(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Tu(e.serverSyncTree_,u.currentWriteId,!0));else{var f=qc(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){fc("transaction failed: Data returned ",d,u.path);var p=No(d);"object"===typeof d&&null!=d&&Kn(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=Nc(e),m=Qu(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=Dc(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Eu(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(Tu(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Tu(e.serverSyncTree_,u.currentWriteId,!0))}bc(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);Qc(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)oa(r[c]);Bc(e,e.transactionQueueTree_)}(e,Gc(e,n),r),r}function Kc(e,t){var n,r=e.transactionQueueTree_;for(n=La(t);null!==n&&void 0===Xu(r);)r=Ju(r,n),n=La(t=Fa(t));return r}function Gc(e,t){var n=[];return Hc(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Hc(e,t,n){var r=Xu(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);tc(t,(function(t){Hc(e,t,n)}))}function Qc(e,t){var n=Xu(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Zu(t,n.length>0?n:void 0)}tc(t,(function(t){Qc(e,t)}))}function Yc(e,t){var n=rc(Kc(e,t)),r=Ju(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){$c(e,t)})),$c(e,r),nc(r,(function(t){$c(e,t)})),n}function $c(e,t){var n=Xu(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(_n(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(_n(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Tu(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Zu(t,void 0):n.length=a+1,bc(e.eventQueue_,rc(t),i);for(var s=0;s<r.length;s++)oa(r[s])}}var Jc=function(e,t){var n=Xc(e),r=n.namespace;"firebase.com"===n.domain&&Wi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Wi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ki("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new va(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new Da(n.pathString)}},Xc=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(eF){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=sn(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ki("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Zc=function(){function e(t,n,r,i){rn(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return on(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+zn(this.snapshot.exportVal())}}]),e}(),el=function(){function e(t,n,r){rn(this,e),this.eventRegistration=t,this.error=n,this.path=r}return on(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),tl=function(){function e(t,n){rn(this,e),this.snapshotCallback=t,this.cancelCallback=n}return on(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return _n(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),nl=function(){function e(t,n){rn(this,e),this._repo=t,this._path=n}return on(e,[{key:"cancel",value:function(){var e=new Cn;return Lc(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){mc("OnDisconnect.remove",this._path);var e=new Cn;return Mc(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){mc("OnDisconnect.set",this._path),hc("OnDisconnect.set",e,this._path,!1);var t=new Cn;return Mc(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){mc("OnDisconnect.setWithPriority",this._path),hc("OnDisconnect.setWithPriority",e,this._path,!1),pc("OnDisconnect.setWithPriority",t,!1);var n=new Cn;return function(e,t,n,r,i){var a=No(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Zo(e.onDisconnect_,t,a),jc(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){mc("OnDisconnect.update",this._path),dc("OnDisconnect.update",e,this._path,!1);var t=new Cn;return function(e,t,n,r){if(Hn(n))return qi("onDisconnect().update() called with empty data.  Don't do anything."),void jc(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&ea(n,(function(n,r){var i=No(r);Zo(e.onDisconnect_,qa(t,n),i)})),jc(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),rl=function(){function e(t,n,r,i){rn(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return on(e,[{key:"key",get:function(){return Ba(this._path)?null:Ua(this._path)}},{key:"ref",get:function(){return new sl(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Yo(this._queryParams),t=Xi(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Yo(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=cr(t))instanceof e))return!1;var n=this._repo===t._repo,r=Ka(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function il(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function al(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ro){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Hi)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Qi)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===wo){if(null!=t&&!lc(t)||null!=n&&!lc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(_n(e.getIndex()instanceof Po||e.getIndex()===Ro,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ol(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var sl=function(e){cn(n,e);var t=pn(n);function n(e,r){return rn(this,n),t.call(this,e,r,new Wo,!1)}return on(n,[{key:"parent",get:function(){var e=ja(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(rl),ul=function(){function e(t,n,r){rn(this,e),this._node=t,this.ref=n,this._index=r}return on(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Da(t),r=hl(this.ref,t);return new e(this._node.getChild(n),r,wo)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,hl(n.ref,r),wo))}))}},{key:"hasChild",value:function(e){var t=new Da(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function cl(e,t){return(e=cr(e))._checkNotDeleted("ref"),void 0!==t?hl(e._root,t):e._root}function ll(e,t){(e=cr(e))._checkNotDeleted("refFromURL");var n=Jc(t,e._repo.repoInfo_.nodeAdmin);gc("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Wi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),cl(e,n.path.toString())}function hl(e,t){var n,r,i,a;return null===La((e=cr(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),yc(n,r,i,a)):yc("child","path",t,!1),new sl(e._repo,qa(e._path,t))}function fl(e,t){e=cr(e),mc("push",e._path),hc("push",t,e._path,!0);var n,r=Cc(e._repo),i=Oo(r),a=hl(e,i),o=hl(e,i);return n=null!=t?pl(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function dl(e){return mc("remove",e._path),pl(e,null)}function pl(e,t){e=cr(e),mc("set",e._path),hc("set",t,e._path,!1);var n=new Cn;return Oc(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function vl(e,t){e=cr(e),mc("setPriority",e._path),pc("setPriority",t,!1);var n=new Cn;return Oc(e._repo,qa(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function yl(e,t,n){if(mc("setWithPriority",e._path),hc("setWithPriority",t,e._path,!1),pc("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Cn;return Oc(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function ml(e,t){dc("update",t,e._path,!1);var n=new Cn;return function(e,t,n,r){Vc(e,"update",{path:t.toString(),value:n});var i=!0,a=Nc(e),o={};if(ea(n,(function(n,r){i=!1,o[n]=Hu(qa(t,n),No(r),e.serverSyncTree_,a)})),i)qi("update() called with empty data.  Don't do anything."),jc(0,r,"ok",void 0);else{var s=Dc(e),u=Iu(e.serverSyncTree_,t,o,s);_c(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||Ki("update at "+t+" failed: "+n);var o=Tu(e.serverSyncTree_,s,!a),u=o.length>0?Wc(e,t):t;bc(e.eventQueue_,u,o),jc(0,r,n,i)})),ea(n,(function(n){var r=Yc(e,qa(t,n));Wc(e,r)})),bc(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function gl(e){return function(e,t){var n=Au(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=No(n).withIndex(t._queryParams.getIndex()),i=Su(e.serverSyncTree_,t._path,r);return wc(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return Vc(e,"get for query "+zn(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=cr(e))._repo,e).then((function(t){return new ul(t,new sl(e._repo,e._path),e._queryParams.getIndex())}))}var kl=function(){function e(t){rn(this,e),this.callbackContext=t}return on(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Zc("value",this,new ul(e.snapshotNode,new sl(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new el(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),_l=function(){function e(t,n){rn(this,e),this.eventType=t,this.callbackContext=n}return on(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new el(this,e,t):null}},{key:"createEvent",value:function(e,t){_n(null!=e.childName,"Child events should have a childName.");var n=hl(new sl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Zc(e.type,this,new ul(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function wl(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){Fc(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new tl(n,a||void 0),c="value"===t?new kl(u):new _l(t,u);return function(e,t,n){var r;r=".info"===La(t._path)?Nu(e.infoSyncTree_,t,n):Nu(e.serverSyncTree_,t,n),wc(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return Fc(e._repo,e,c)}}function bl(e,t,n,r){return wl(e,"value",t,n,r)}function xl(e,t,n,r){return wl(e,"child_added",t,n,r)}function El(e,t,n,r){return wl(e,"child_changed",t,n,r)}function Il(e,t,n,r){return wl(e,"child_moved",t,n,r)}function Tl(e,t,n,r){return wl(e,"child_removed",t,n,r)}function Sl(e,t,n){var r=null,i=n?new tl(n):null;"value"===t?r=new kl(i):t&&(r=new _l(t,i)),Fc(e._repo,e,r)}var Cl=on((function e(){rn(this,e)})),Nl=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this))._value=e,i._key=r,i}return on(n,[{key:"_apply",value:function(e){hc("endAt",this._value,e._path,!0);var t=Go(e._queryParams,this._value,this._key);if(ol(t),al(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new rl(e._repo,e._path,t,e._orderByCalled)}}]),n}(Cl);function Pl(e,t){return vc("endAt","key",t,!0),new Nl(e,t)}var Al=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this))._value=e,i._key=r,i}return on(n,[{key:"_apply",value:function(e){hc("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===ro?("string"===typeof t&&(t=Mo(t)),r=Go(e,t,n)):r=Go(e,t,null==n?Hi:Mo(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(ol(t),al(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new rl(e._repo,e._path,t,e._orderByCalled)}}]),n}(Cl);function Rl(e,t){return vc("endBefore","key",t,!0),new Al(e,t)}var Dl=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this))._value=e,i._key=r,i}return on(n,[{key:"_apply",value:function(e){hc("startAt",this._value,e._path,!0);var t=Ko(e._queryParams,this._value,this._key);if(ol(t),al(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new rl(e._repo,e._path,t,e._orderByCalled)}}]),n}(Cl);function Ol(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return vc("startAt","key",t,!0),new Dl(e,t)}var Ll=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this))._value=e,i._key=r,i}return on(n,[{key:"_apply",value:function(e){hc("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===ro?("string"===typeof t&&(t=Lo(t)),r=Ko(e,t,n)):r=Ko(e,t,null==n?Qi:Lo(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ol(t),al(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new rl(e._repo,e._path,t,e._orderByCalled)}}]),n}(Cl);function Ml(e,t){return vc("startAfter","key",t,!0),new Ll(e,t)}var Fl=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this))._limit=e,r}return on(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new rl(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(Cl);function Ul(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Fl(e)}var Vl=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this))._limit=e,r}return on(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new rl(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(Cl);function jl(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Vl(e)}var ql=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this))._path=e,r}return on(n,[{key:"_apply",value:function(e){il(e,"orderByChild");var t=new Da(this._path);if(Ba(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Po(t),r=Ho(e._queryParams,n);return al(r),new rl(e._repo,e._path,r,!0)}}]),n}(Cl);function Bl(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yc("orderByChild","path",e,!1),new ql(e)}var zl=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"_apply",value:function(e){il(e,"orderByKey");var t=Ho(e._queryParams,ro);return al(t),new rl(e._repo,e._path,t,!0)}}]),n}(Cl);function Wl(){return new zl}var Kl=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"_apply",value:function(e){il(e,"orderByPriority");var t=Ho(e._queryParams,wo);return al(t),new rl(e._repo,e._path,t,!0)}}]),n}(Cl);function Gl(){return new Kl}var Hl=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"_apply",value:function(e){il(e,"orderByValue");var t=Ho(e._queryParams,Ro);return al(t),new rl(e._repo,e._path,t,!0)}}]),n}(Cl);function Ql(){return new Hl}var Yl=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this))._value=e,i._key=r,i}return on(n,[{key:"_apply",value:function(e){if(hc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Nl(this._value,this._key)._apply(new Dl(this._value,this._key)._apply(e))}}]),n}(Cl);function $l(e,t){return vc("equalTo","key",t,!0),new Yl(e,t)}function Jl(e){for(var t=cr(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){_n(!ru,"__referenceConstructor has already been defined"),ru=e}(sl),function(e){_n(!lu,"__referenceConstructor has already been defined"),lu=e}(sl);var Xl={},Zl=!1;function eh(e,t,n,r){e.repoInfo_=new va("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function th(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Wi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qi("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=Jc(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/react-twitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyA3SUQj8WTLh7qV-DOVAUOH1sldsHWmZQ4",REACT_APP_FIREBASE_AUTH_DOMAIN:"react-twitter-1ec0b.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://react-twitter-1ec0b-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-CDZSJK6JS3",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1:72562846999:web:d19142c26bed916f8d1b52",REACT_APP_FIREBASE_PROJECT_ID:"react-twitter-1ec0b",REACT_APP_FIREBASE_SENDER_ID:"72562846999",REACT_APP_FIREBASE_STORAGE_BUCKET:"react-twitter-1ec0b.appspot.com"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=Jc(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new la(la.OWNER):new ca(e.name,e.options,t);gc("Invalid Firebase Database URL",s),Ba(s.path)||Wi("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Xl[t.name];i||(i={},Xl[t.name]=i);var a=i[e.toURLString()];a&&Wi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Tc(e,Zl,n,r),i[e.toURLString()]=a,a}(u,e,l,new ua(e.name,n));return new nh(h,e)}var nh=function(){function e(t,n){rn(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return on(e,[{key:"_repo",get:function(){return this._instanceStarted||(Sc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new sl(this._repo,Oa())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Xl[t];n&&n[e.key]===e||Wi("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Uc(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Wi("Cannot call "+e+" on a deleted database.")}}]),e}();function rh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=cr(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Wi("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Wi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new la(la.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Nn(r.mockUserToken,e.app.options.projectId);a=new la(o)}eh(i,t,n,a)}function ih(e){(e=cr(e))._checkNotDeleted("goOffline"),Uc(e._repo)}function ah(e){var t;(e=cr(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Ic)}function oh(e,t){ji(e,t)}var sh={".sv":"timestamp"};var uh=function(){function e(t,n){rn(this,e),this.committed=t,this.snapshot=n}return on(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function ch(e,t,n){var r;if(e=cr(e),mc("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Cn,o=bl(e,(function(){}));return function(e,t,n,r,i,a){Vc(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:Li(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=qc(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{fc("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=Ju(e.transactionQueueTree_,t),h=Xu(l)||[];h.push(o),Zu(l,h),"object"===typeof u&&null!==u&&Kn(u,".priority")?(c=Gn(u,".priority"),_n(lc(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(Pu(e.serverSyncTree_,t)||So.EMPTY_NODE).getPriority().val();var f=Nc(e),d=No(u,c),p=Qu(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=Dc(e);var v=Eu(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);bc(e.eventQueue_,t,v),Bc(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new ul(r,new sl(e._repo,e._path),wo),a.resolve(new uh(n,i)))}),o,i),a.promise}Xa.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Xa.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Ci(Qr),qr(new mr("database",(function(e,t){var n=t.instanceIdentifier;return th(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ei(Ii,Ti,e),ei(Ii,Ti,"esm2017")}();var lh=new Pr("@firebase/database-compat"),hh=function(e){var t="FIREBASE WARNING: "+e;lh.warn(t)},fh=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(ar(e,t)+"must be a boolean.")},dh=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ar(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ph=function(){function e(t){rn(this,e),this._delegate=t}return on(e,[{key:"cancel",value:function(e){ir("OnDisconnect.cancel",0,1,arguments.length),or("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){ir("OnDisconnect.remove",0,1,arguments.length),or("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){ir("OnDisconnect.set",1,2,arguments.length),or("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){ir("OnDisconnect.setWithPriority",2,3,arguments.length),or("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(ir("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,hh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}or("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),vh=function(){function e(t,n){rn(this,e),this.committed=t,this.snapshot=n}return on(e,[{key:"toJSON",value:function(){return ir("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),yh=function(){function e(t,n){rn(this,e),this._database=t,this._delegate=n}return on(e,[{key:"val",value:function(){return ir("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return ir("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return ir("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return ir("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return ir("DataSnapshot.child",0,1,arguments.length),t=String(t),yc("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return ir("DataSnapshot.hasChild",1,1,arguments.length),yc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return ir("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return ir("DataSnapshot.forEach",1,1,arguments.length),or("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return ir("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return ir("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return ir("DataSnapshot.ref",0,0,arguments.length),new gh(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),mh=function(){function e(t,n){rn(this,e),this.database=t,this._delegate=n}return on(e,[{key:"on",value:function(t,n,r,i){var a,o=this;ir("Query.on",2,4,arguments.length),or("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new yh(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return bl(this._delegate,u,c),n;case"child_added":return xl(this._delegate,u,c),n;case"child_removed":return Tl(this._delegate,u,c),n;case"child_changed":return El(this._delegate,u,c),n;case"child_moved":return Il(this._delegate,u,c),n;default:throw new Error(ar("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(ir("Query.off",0,3,arguments.length),dh("Query.off",e,!0),or("Query.off","callback",t,!0),sr("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Sl(this._delegate,e,r)}else Sl(this._delegate,e)}},{key:"get",value:function(){var e=this;return gl(this._delegate).then((function(t){return new yh(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;ir("Query.once",1,4,arguments.length),or("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new Cn,u=function(e,t){var r=new yh(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":bl(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":xl(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":Tl(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":El(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":Il(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ar("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return ir("Query.limitToFirst",1,1,arguments.length),new e(this.database,Jl(this._delegate,Ul(t)))}},{key:"limitToLast",value:function(t){return ir("Query.limitToLast",1,1,arguments.length),new e(this.database,Jl(this._delegate,jl(t)))}},{key:"orderByChild",value:function(t){return ir("Query.orderByChild",1,1,arguments.length),new e(this.database,Jl(this._delegate,Bl(t)))}},{key:"orderByKey",value:function(){return ir("Query.orderByKey",0,0,arguments.length),new e(this.database,Jl(this._delegate,Wl()))}},{key:"orderByPriority",value:function(){return ir("Query.orderByPriority",0,0,arguments.length),new e(this.database,Jl(this._delegate,Gl()))}},{key:"orderByValue",value:function(){return ir("Query.orderByValue",0,0,arguments.length),new e(this.database,Jl(this._delegate,Ql()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ir("Query.startAt",0,2,arguments.length),new e(this.database,Jl(this._delegate,Ol(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ir("Query.startAfter",0,2,arguments.length),new e(this.database,Jl(this._delegate,Ml(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ir("Query.endAt",0,2,arguments.length),new e(this.database,Jl(this._delegate,Pl(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ir("Query.endBefore",0,2,arguments.length),new e(this.database,Jl(this._delegate,Rl(t,n)))}},{key:"equalTo",value:function(t,n){return ir("Query.equalTo",1,2,arguments.length),new e(this.database,Jl(this._delegate,$l(t,n)))}},{key:"toString",value:function(){return ir("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return ir("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(ir("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new gh(this.database,new sl(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,or(e,"cancel",r.cancel,!0),r.context=n,sr(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(ar(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),gh=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e,new rl(r._repo,r._path,new Wo,!1))).database=e,i._delegate=r,i}return on(n,[{key:"getKey",value:function(){return ir("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return ir("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,hl(this._delegate,e))}},{key:"getParent",value:function(){ir("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return ir("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){ir("Reference.set",1,2,arguments.length),or("Reference.set","onComplete",t,!0);var n=pl(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(ir("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,hh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mc("Reference.update",this._delegate._path),or("Reference.update","onComplete",t,!0);var i=ml(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){ir("Reference.setWithPriority",2,3,arguments.length),or("Reference.setWithPriority","onComplete",n,!0);var r=yl(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){ir("Reference.remove",0,1,arguments.length),or("Reference.remove","onComplete",e,!0);var t=dl(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;ir("Reference.transaction",1,3,arguments.length),or("Reference.transaction","transactionUpdate",e,!1),or("Reference.transaction","onComplete",t,!0),fh("Reference.transaction","applyLocally",n,!0);var i=ch(this._delegate,e,{applyLocally:n}).then((function(e){return new vh(e.committed,new yh(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){ir("Reference.setPriority",1,2,arguments.length),or("Reference.setPriority","onComplete",t,!0);var n=vl(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;ir("Reference.push",0,2,arguments.length),or("Reference.push","onComplete",t,!0);var i=fl(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return mc("Reference.onDisconnect",this._delegate._path),new ph(new nl(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(mh),kh=function(){function e(t,n){var r=this;rn(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return on(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rh(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(ir("database.ref",0,1,arguments.length),e instanceof gh){var t=ll(this._delegate,e.toString());return new gh(this,t)}var n=cl(this._delegate,e);return new gh(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";ir(t,1,1,arguments.length);var n=ll(this._delegate,e);return new gh(this,n)}},{key:"goOffline",value:function(){return ir("database.goOffline",0,0,arguments.length),ih(this._delegate)}},{key:"goOnline",value:function(){return ir("database.goOnline",0,0,arguments.length),ah(this._delegate)}}]),e}();kh.ServerValue={TIMESTAMP:sh,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var _h,wh=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;Ci(r);var u=new kr("auth-internal",new br("database-standalone"));return u.setComponent(new mr("auth-internal",(function(){return i}),"PRIVATE")),{instance:new kh(th(t,u,void 0,n,s),t),namespace:a}}}),bh=kh.ServerValue;function xh(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ln(e)););return e}function Eh(){return Eh="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=xh(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Eh.apply(this,arguments)}(_h=Ei).INTERNAL.registerComponent(new mr("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new kh(i,r)}),"PUBLIC").setServiceProps({Reference:gh,Query:mh,Database:kh,DataSnapshot:yh,enableLogging:oh,INTERNAL:wh,ServerValue:bh}).setMultipleInstances(!0)),_h.registerVersion("@firebase/database-compat","0.1.7");function Ih(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Th;Object.create;var Sh="facebook.com",Ch="github.com",Nh="google.com",Ph="password",Ah="twitter.com",Rh="EMAIL_SIGNIN",Dh="PASSWORD_RESET",Oh="RECOVER_EMAIL",Lh="REVERT_SECOND_FACTOR_ADDITION",Mh="VERIFY_AND_CHANGE_EMAIL",Fh="VERIFY_EMAIL";function Uh(){return d({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Vh=function(){var e;return d(e={},"admin-restricted-operation","This operation is restricted to administrators only."),d(e,"argument-error",""),d(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),d(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),d(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),d(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),d(e,"cordova-not-ready","Cordova framework is not ready."),d(e,"cors-unsupported","This browser is not supported."),d(e,"credential-already-in-use","This credential is already associated with a different user account."),d(e,"custom-token-mismatch","The custom token corresponds to a different audience."),d(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),d(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),d(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),d(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),d(e,"email-already-in-use","The email address is already in use by another account."),d(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),d(e,"expired-action-code","The action code has expired."),d(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),d(e,"internal-error","An internal AuthError has occurred."),d(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),d(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),d(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),d(e,"invalid-auth-event","An internal AuthError has occurred."),d(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),d(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),d(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),d(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),d(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),d(e,"invalid-email","The email address is badly formatted."),d(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),d(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),d(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),d(e,"invalid-credential","The supplied auth credential is malformed or has expired."),d(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),d(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),d(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),d(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),d(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),d(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),d(e,"wrong-password","The password is invalid or the user does not have a password."),d(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),d(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),d(e,"invalid-provider-id","The specified provider ID is invalid."),d(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),d(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),d(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),d(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),d(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),d(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),d(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),d(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),d(e,"missing-continue-uri","A continue URL must be provided in the request."),d(e,"missing-iframe-start","An internal AuthError has occurred."),d(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),d(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),d(e,"missing-multi-factor-info","No second factor identifier is provided."),d(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),d(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),d(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),d(e,"app-deleted","This instance of FirebaseApp has been deleted."),d(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),d(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),d(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),d(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),d(e,"no-auth-event","An internal AuthError has occurred."),d(e,"no-such-provider","User was not linked to an account with the given provider."),d(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),d(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),d(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),d(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),d(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),d(e,"provider-already-linked","User can only be linked to one identity for the given provider."),d(e,"quota-exceeded","The project's quota for this operation has been exceeded."),d(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),d(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),d(e,"rejected-credential","The request contains malformed or mismatching credentials."),d(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),d(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),d(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),d(e,"timeout","The operation has timed out."),d(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),d(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),d(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),d(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),d(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),d(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),d(e,"unverified-email","The operation requires a verified email."),d(e,"user-cancelled","The user did not grant your application the permissions it requested."),d(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),d(e,"user-disabled","The user account has been disabled by an administrator."),d(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),d(e,"user-signed-out",""),d(e,"weak-password","The password must be 6 characters long or more."),d(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),d(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},jh=Uh,qh=new Vn("auth","Firebase",Uh()),Bh=new Pr("@firebase/auth");function zh(e){if(Bh.logLevel<=wr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bh.error.apply(Bh,["Auth (".concat(Qr,"): ").concat(e)].concat(n))}}function Wh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Qh.apply(void 0,[e].concat(n))}function Kh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qh.apply(void 0,[e].concat(n))}function Gh(e,t,n){var r=Object.assign(Object.assign({},jh()),d({},t,n));return new Vn("auth","Firebase",r).create(t,{appName:e.name})}function Hh(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Wh(e,"argument-error"),Gh(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Qh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=yr(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(yr(o)))}return qh.create.apply(qh,[e].concat(n))}function Yh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Qh.apply(void 0,[t].concat(r))}}function $h(e){var t="INTERNAL ASSERTION FAILED: "+e;throw zh(t),new Error(t)}function Jh(e,t){e||$h(t)}var Xh=new Map;function Zh(e){Jh(e instanceof Function,"Expected a class definition");var t=Xh.get(e);return t?(Jh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xh.set(e,t),t)}function ef(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tf(){return"http:"===nf()||"https:"===nf()}function nf(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var rf=function(){function e(t,n){rn(this,e),this.shortDelay=t,this.longDelay=n,Jh(n>t,"Short delay should be less than long delay!"),this.isMobile=An()||On()}return on(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tf()||Dn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function af(e,t){Jh(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var of=function(){function e(){rn(this,e)}return on(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void $h("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void $h("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void $h("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),sf=(d(Th={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),d(Th,"MISSING_CUSTOM_TOKEN","internal-error"),d(Th,"INVALID_IDENTIFIER","invalid-email"),d(Th,"MISSING_CONTINUE_URI","internal-error"),d(Th,"INVALID_PASSWORD","wrong-password"),d(Th,"MISSING_PASSWORD","internal-error"),d(Th,"EMAIL_EXISTS","email-already-in-use"),d(Th,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),d(Th,"INVALID_IDP_RESPONSE","invalid-credential"),d(Th,"INVALID_PENDING_TOKEN","invalid-credential"),d(Th,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),d(Th,"MISSING_REQ_TYPE","internal-error"),d(Th,"EMAIL_NOT_FOUND","user-not-found"),d(Th,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),d(Th,"EXPIRED_OOB_CODE","expired-action-code"),d(Th,"INVALID_OOB_CODE","invalid-action-code"),d(Th,"MISSING_OOB_CODE","internal-error"),d(Th,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),d(Th,"INVALID_ID_TOKEN","invalid-user-token"),d(Th,"TOKEN_EXPIRED","user-token-expired"),d(Th,"USER_NOT_FOUND","user-token-expired"),d(Th,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),d(Th,"INVALID_CODE","invalid-verification-code"),d(Th,"INVALID_SESSION_INFO","invalid-verification-id"),d(Th,"INVALID_TEMPORARY_PROOF","invalid-credential"),d(Th,"MISSING_SESSION_INFO","missing-verification-id"),d(Th,"SESSION_EXPIRED","code-expired"),d(Th,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),d(Th,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),d(Th,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),d(Th,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),d(Th,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),d(Th,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),d(Th,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),d(Th,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),d(Th,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),d(Th,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),d(Th,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Th),uf=new rf(3e4,6e4);function cf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function lf(e,t,n,r){return hf.apply(this,arguments)}function hf(){return hf=a(f().mark((function e(t,n,r,i){var o,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",ff(t,o,a(f().mark((function e(){var a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Jn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",of.fetch()(yf(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),hf.apply(this,arguments)}function ff(e,t,n){return df.apply(this,arguments)}function df(){return df=a(f().mark((function e(t,n,r){var i,a,o,s,u,c,h,d,p,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},sf),n),e.prev=2,a=new mf(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw gf(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),d=h[0],p=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw gf(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=25;break}throw gf(t,"email-already-in-use",s);case 25:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=30;break}throw Gh(t,v,p);case 30:Wh(t,v);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Un)){e.next=37;break}throw e.t0;case 37:Wh(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),df.apply(this,arguments)}function pf(e,t,n,r){return vf.apply(this,arguments)}function vf(){return vf=a(f().mark((function e(t,n,r,i){var a,o,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,lf(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Wh(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),vf.apply(this,arguments)}function yf(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?af(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var mf=function(){function e(t){var n=this;rn(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Kh(n.auth,"network-request-failed"))}),uf.get())}))}return on(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function gf(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Kh(e,t,r);return i.customData._tokenResponse=n,i}function kf(e,t){return _f.apply(this,arguments)}function _f(){return _f=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),_f.apply(this,arguments)}function wf(e,t){return bf.apply(this,arguments)}function bf(){return bf=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),bf.apply(this,arguments)}function xf(e,t){return Ef.apply(this,arguments)}function Ef(){return Ef=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Ef.apply(this,arguments)}function If(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(eF){}}function Tf(){return Tf=a(f().mark((function e(t){var n,r,i,a,o,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=cr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Yh((a=Cf(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:If(Sf(a.auth_time)),issuedAtTime:If(Sf(a.iat)),expirationTime:If(Sf(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Sf(e){return 1e3*Number(e)}function Cf(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return zh("JWT malformed, contained fewer than 3 sections"),null;try{var a=Tn(r);return a?JSON.parse(a):(zh("Failed to decode base64 JWT payload"),null)}catch(eF){return zh("Caught error parsing JWT payload as JSON",eF),null}}function Nf(e,t){return Pf.apply(this,arguments)}function Pf(){return Pf=a(f().mark((function e(t,n){var r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Un&&Af(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Pf.apply(this,arguments)}function Af(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Rf=function(){function e(t){rn(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return on(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Df=function(){function e(t,n){rn(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return on(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=If(this.lastLoginAt),this.creationTime=If(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Of(e){return Lf.apply(this,arguments)}function Lf(){return Lf=a(f().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Nf(t,xf(r,{idToken:i}));case 6:Yh(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Uf(o.providerUserInfo):[],u=Ff(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Df(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),Lf.apply(this,arguments)}function Mf(){return(Mf=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cr(t),e.next=3,Of(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ff(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(yr(n),yr(t))}function Uf(e){return e.map((function(e){var t=e.providerId,n=Ih(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Vf(e,t){return jf.apply(this,arguments)}function jf(){return jf=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ff(t,{},a(f().mark((function e(){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=yf(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",of.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),jf.apply(this,arguments)}var qf=function(){function e(){rn(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return on(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Yh(e.idToken,"internal-error"),Yh("undefined"!==typeof e.idToken,"internal-error"),Yh("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Cf(e);return Yh(t,"internal-error"),Yh("undefined"!==typeof t.exp,"internal-error"),Yh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=a(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Yh(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=a(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vf(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return $h("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Yh("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Yh("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Yh("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Bf(e,t){Yh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var zf=function(){function e(t){rn(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ih(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?yr(a.providerData):[],this.metadata=new Df(a.createdAt||void 0,a.lastLoginAt||void 0)}return on(e,[{key:"getIdToken",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nf(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Yh(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Tf.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Mf.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Yh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Yh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=a(f().mark((function e(t){var n,r,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Of(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Nf(this,kf(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;Yh(k&&x,t,"internal-error");var E=qf.fromJSON(this.name,x);Yh("string"===typeof k,t,"internal-error"),Bf(h,t.name),Bf(f,t.name),Yh("boolean"===typeof _,t,"internal-error"),Yh("boolean"===typeof w,t,"internal-error"),Bf(d,t.name),Bf(p,t.name),Bf(v,t.name),Bf(y,t.name),Bf(m,t.name),Bf(g,t.name);var I=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(I.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=a(f().mark((function t(n,r){var i,a,o,s=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new qf).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Of(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Wf=function(){function e(){rn(this,e),this.type="NONE",this.storage={}}return on(e,[{key:"_isAvailable",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Wf.type="NONE";var Kf=Wf;function Gf(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Hf=function(){function e(t,n,r){rn(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Gf(this.userKey,a.apiKey,o),this.fullPersistenceKey=Gf("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return on(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?zf._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=a(f().mark((function t(n,r){var i,o,s,u,c,l,h,d,p,v,y,m=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Zh(Kf),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),s=o[0]||Zh(Kf),u=Gf(i,n.config.apiKey,n.name),c=null,l=sn(r),t.prev=10,l.s();case 12:if((h=l.n()).done){t.next=29;break}return d=h.value,t.prev=14,t.next=17,d._get(u);case 17:if(!(p=t.sent)){t.next=23;break}return v=zf._fromJSON(n,p),d!==s&&(c=v),s=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(y=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=y[0],!c){t.next=44;break}return t.next=44,s._set(u,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Qf(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xf(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yf(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ed(t))return"Blackberry";if(td(t))return"Webos";if($f(t))return"Safari";if((t.includes("chrome/")||Jf(t))&&!t.includes("edge/"))return"Chrome";if(Zf(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/firefox\//i.test(e)}function $f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Jf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/crios\//i.test(e)}function Xf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/iemobile/i.test(e)}function Zf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/android/i.test(e)}function ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/blackberry/i.test(e)}function td(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/webos/i.test(e)}function nd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/iphone|ipad|ipod/i.test(e)}function rd(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return nd(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function id(){return Ln()&&10===document.documentMode}function ad(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return nd(e)||Zf(e)||td(e)||ed(e)||/windows phone/i.test(e)||Xf(e)}function od(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qf(Pn());break;case"Worker":t="".concat(Qf(Pn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Qr,"/").concat(r)}var sd=function(){function e(t,n,r){rn(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cd(this),this.idTokenSubscription=new cd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qh,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return on(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Zh(t)),this._initializationPromise=this.queue(a(f().mark((function r(){var i,a;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Hf.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=a(f().mark((function e(t){var n,r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Yh(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Of(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?cr(t):null)&&Yh(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=a(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Yh(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(a(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Zh(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Vn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Yh(n=t&&Zh(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Hf.create(this,[Zh(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=a(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Yh(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Yh(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=od(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=a(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ud(e){return cr(e)}var cd=function(){function e(t){var n=this;rn(this,e),this.auth=t,this.observer=null,this.addObserver=tr((function(e){return n.observer=e}))}return on(e,[{key:"next",get:function(){return Yh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ld(e,t,n){var r=ud(e);Yh(r._canInitEmulator,r,"emulator-config-failed"),Yh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=hd(t),o=function(e){var t=hd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:fd(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:fd(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function hd(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function fd(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var dd=function(){function e(t,n){rn(this,e),this.providerId=t,this.signInMethod=n}return on(e,[{key:"toJSON",value:function(){return $h("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return $h("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return $h("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return $h("not implemented")}}]),e}();function pd(e,t){return vd.apply(this,arguments)}function vd(){return vd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:resetPassword",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),vd.apply(this,arguments)}function yd(e,t){return md.apply(this,arguments)}function md(){return md=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),md.apply(this,arguments)}function gd(e,t){return kd.apply(this,arguments)}function kd(){return kd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:update",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),kd.apply(this,arguments)}function _d(e,t){return wd.apply(this,arguments)}function wd(){return wd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:signInWithPassword",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),wd.apply(this,arguments)}function bd(e,t){return xd.apply(this,arguments)}function xd(){return xd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:sendOobCode",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),xd.apply(this,arguments)}function Ed(e,t){return Id.apply(this,arguments)}function Id(){return Id=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bd(t,n));case 1:case"end":return e.stop()}}),e)}))),Id.apply(this,arguments)}function Td(e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bd(t,n));case 1:case"end":return e.stop()}}),e)}))),Sd.apply(this,arguments)}function Cd(e,t){return Nd.apply(this,arguments)}function Nd(){return Nd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bd(t,n));case 1:case"end":return e.stop()}}),e)}))),Nd.apply(this,arguments)}function Pd(e,t){return Ad.apply(this,arguments)}function Ad(){return Ad=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bd(t,n));case 1:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Rd(e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:signInWithEmailLink",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dd.apply(this,arguments)}function Od(e,t){return Ld.apply(this,arguments)}function Ld(){return Ld=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:signInWithEmailLink",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ld.apply(this,arguments)}var Md=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return rn(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return on(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_d(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Rd(t,{email:this._email,oobCode:this._password}));case 5:Wh(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",yd(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Od(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Wh(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(dd);function Fd(e,t){return Ud.apply(this,arguments)}function Ud(){return Ud=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:signInWithIdp",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ud.apply(this,arguments)}var Vd=function(e){cn(n,e);var t=pn(n);function n(){var e;return rn(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return on(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Fd(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fd(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fd(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wh("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ih(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(dd);function jd(e,t){return qd.apply(this,arguments)}function qd(){return qd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:sendVerificationCode",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function Bd(){return Bd=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:signInWithPhoneNumber",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bd.apply(this,arguments)}function zd(){return zd=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pf(t,"POST","/v1/accounts:signInWithPhoneNumber",cf(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw gf(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),zd.apply(this,arguments)}var Wd=d({},"USER_NOT_FOUND","user-not-found");function Kd(){return Kd=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",pf(t,"POST","/v1/accounts:signInWithPhoneNumber",cf(t,r),Wd));case 2:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}var Gd=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this,"phone","phone")).params=e,r}return on(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Bd.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return zd.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Kd.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(dd);var Hd=function(){function e(t){var n,r,i,a,o,s;rn(this,e);var u=Xn(Zn(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Yh(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return on(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Xn(Zn(e)).link,n=t?Xn(Zn(t)).deep_link_id:null,r=Xn(Zn(e)).deep_link_id;return(r?Xn(Zn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(QR){return null}}}]),e}();var Qd=function(){function e(){rn(this,e),this.providerId=e.PROVIDER_ID}return on(e,null,[{key:"credential",value:function(e,t){return Md._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Hd.parseLink(t);return Yh(n,"argument-error"),Md._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Qd.PROVIDER_ID="password",Qd.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Qd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Yd=function(){function e(t){rn(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return on(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),$d=function(e){cn(n,e);var t=pn(n);function n(){var e;return rn(this,n),(e=t.apply(this,arguments)).scopes=[],e}return on(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return yr(this.scopes)}}]),n}(Yd),Jd=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Yh(e.idToken||e.accessToken,"argument-error"),Vd._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Yh("providerId"in t&&"signInMethod"in t,"argument-error"),Vd._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(eF){return null}}}]),n}($d),Xd=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.call(this,"facebook.com")}return on(n,null,[{key:"credential",value:function(e){return Vd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(QR){return null}}}]),n}($d);Xd.FACEBOOK_SIGN_IN_METHOD="facebook.com",Xd.PROVIDER_ID="facebook.com";var Zd=function(e){cn(n,e);var t=pn(n);function n(){var e;return rn(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return on(n,null,[{key:"credential",value:function(e,t){return Vd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(QR){return null}}}]),n}($d);Zd.GOOGLE_SIGN_IN_METHOD="google.com",Zd.PROVIDER_ID="google.com";var ep=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.call(this,"github.com")}return on(n,null,[{key:"credential",value:function(e){return Vd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(QR){return null}}}]),n}($d);ep.GITHUB_SIGN_IN_METHOD="github.com",ep.PROVIDER_ID="github.com";var tp=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return on(n,[{key:"_getIdTokenResponse",value:function(e){return Fd(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fd(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fd(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(dd),np=function(e){cn(n,e);var t=pn(n);function n(e){return rn(this,n),Yh(e.startsWith("saml."),"argument-error"),t.call(this,e)}return on(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=tp.fromJSON(e);return Yh(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return tp._create(r,n)}catch(eF){return null}}}]),n}(Yd),rp=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.call(this,"twitter.com")}return on(n,null,[{key:"credential",value:function(e,t){return Vd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(QR){return null}}}]),n}($d);function ip(e,t){return ap.apply(this,arguments)}function ap(){return ap=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:signUp",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),ap.apply(this,arguments)}rp.TWITTER_SIGN_IN_METHOD="twitter.com",rp.PROVIDER_ID="twitter.com";var op=function(){function e(t){rn(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return on(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=a(f().mark((function t(n,r,i){var a,o,s,u,c=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,zf._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=sp(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=a(f().mark((function t(n,r,i){var a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=sp(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function sp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function up(){return up=a(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ud(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new op({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ip(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,op._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),up.apply(this,arguments)}var cp=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a){var o,s;return rn(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(un(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return on(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Un);function lp(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw cp._fromErrorAndOperation(e,n,t,r);throw n}))}function hp(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function fp(e,t){return dp.apply(this,arguments)}function dp(){return dp=a(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cr(t),e.next=3,yp(!0,r,n);case 3:return e.t0=wf,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=hp(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}function pp(e,t){return vp.apply(this,arguments)}function vp(){return vp=a(f().mark((function e(t,n){var r,i,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Nf,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",op._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),vp.apply(this,arguments)}function yp(e,t,n){return mp.apply(this,arguments)}function mp(){return(mp=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Of(n);case 2:i=hp(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Yh(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gp(e,t){return kp.apply(this,arguments)}function kp(){return kp=a(f().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Nf(t,lp(i,a,n,t),r);case 6:return Yh((o=e.sent).idToken,i,"internal-error"),Yh(s=Cf(o.idToken),i,"internal-error"),u=s.sub,Yh(t.uid===u,i,"user-mismatch"),e.abrupt("return",op._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Wh(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),kp.apply(this,arguments)}function _p(e,t){return wp.apply(this,arguments)}function wp(){return wp=a(f().mark((function e(t,n){var r,i,a,o,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,lp(t,i,n);case 4:return a=e.sent,e.next=7,op._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),wp.apply(this,arguments)}function bp(e,t){return xp.apply(this,arguments)}function xp(){return xp=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_p(ud(t),n));case 1:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Ep(e,t){return Ip.apply(this,arguments)}function Ip(){return(Ip=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cr(t),e.next=3,yp(!1,r,n.providerId);case 3:return e.abrupt("return",pp(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tp(e,t){return Sp.apply(this,arguments)}function Sp(){return(Sp=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gp(cr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cp(e,t){return Np.apply(this,arguments)}function Np(){return Np=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pf(t,"POST","/v1/accounts:signInWithCustomToken",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),Np.apply(this,arguments)}function Pp(){return Pp=a(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ud(t),e.next=3,Cp(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,op._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}var Ap=function(){function e(t,n){rn(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return on(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Rp._fromServerResponse(e,t):Wh(e,"internal-error")}}]),e}(),Rp=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return on(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ap);function Dp(e,t,n){var r;Yh((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Yh("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Yh(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Yh(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Op(){return Op=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cr(t),a={requestType:"PASSWORD_RESET",email:n},r&&Dp(i,a,r),e.next=5,Td(i,a);case 5:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}function Lp(){return Lp=a(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pd(cr(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Lp.apply(this,arguments)}function Mp(){return Mp=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gd(cr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function Fp(e,t){return Up.apply(this,arguments)}function Up(){return Up=a(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cr(t),e.next=3,pd(r,{oobCode:n});case 3:i=e.sent,Yh(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Yh(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Yh(i.mfaInfo,r,"internal-error");case 13:Yh(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ap._fromServerResponse(ud(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Up.apply(this,arguments)}function Vp(){return Vp=a(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fp(cr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Vp.apply(this,arguments)}function jp(e,t,n){return qp.apply(this,arguments)}function qp(){return qp=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ud(t),e.next=3,ip(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,op._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function Bp(){return Bp=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cr(t),a={requestType:"EMAIL_SIGNIN",email:n},Yh(r.handleCodeInApp,i,"argument-error"),r&&Dp(i,a,r),e.next=6,Cd(i,a);case 6:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function zp(){return zp=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cr(t),Yh((a=Qd.credentialWithLink(n,r||ef()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",bp(i,a));case 4:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}function Wp(e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:createAuthUri",cf(t,n)));case 1:case"end":return e.stop()}}),e)}))),Kp.apply(this,arguments)}function Gp(){return Gp=a(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tf()?ef():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Wp(cr(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Hp(){return(Hp=a(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Dp(r.auth,a,n),e.next=8,Ed(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(){return(Qp=a(f().mark((function e(t,n,r){var i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Dp(i.auth,o,r),e.next=8,Pd(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yp(e,t){return $p.apply(this,arguments)}function $p(){return $p=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lf(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Jp(){return(Jp=a(f().mark((function e(t,n){var r,i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=cr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Nf(a,Yp(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xp(e,t,n){return Zp.apply(this,arguments)}function Zp(){return Zp=a(f().mark((function e(t,n,r){var i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Nf(t,yd(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),Zp.apply(this,arguments)}var ev=on((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rn(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),tv=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a){var o;return rn(this,n),(o=t.call(this,e,r,i)).username=a,o}return on(n)}(ev),nv=function(e){cn(n,e);var t=pn(n);function n(e,r){return rn(this,n),t.call(this,e,"facebook.com",r)}return on(n)}(ev),rv=function(e){cn(n,e);var t=pn(n);function n(e,r){return rn(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return on(n)}(tv),iv=function(e){cn(n,e);var t=pn(n);function n(e,r){return rn(this,n),t.call(this,e,"google.com",r)}return on(n)}(ev),av=function(e){cn(n,e);var t=pn(n);function n(e,r,i){return rn(this,n),t.call(this,e,"twitter.com",r,i)}return on(n)}(tv);function ov(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Cf(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ev(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new nv(a,i);case"github.com":return new rv(a,i);case"google.com":return new iv(a,i);case"twitter.com":return new av(a,i,e.screenName||null);case"custom":case"anonymous":return new ev(a,null);default:return new ev(a,r,i)}}(n)}var sv=function(){function e(t,n){rn(this,e),this.type=t,this.credential=n}return on(e,[{key:"toJSON",value:function(){return{multiFactorSession:d({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),uv=function(){function e(t,n,r){rn(this,e),this.session=t,this.hints=n,this.signInResolver=r}return on(e,[{key:"resolveSignIn",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ud(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return Ap._fromServerResponse(r,e)}));Yh(i.mfaPendingCredential,r,"internal-error");var s=sv._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,o,function(){var e=a(f().mark((function e(t){var a,o,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,op._fromIdTokenResponse(r,n.operationType,o);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return Yh(n.user,r,"internal-error"),e.abrupt("return",op._forOperation(n.user,n.operationType,o));case 17:Wh(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function cv(e,t){return lf(e,"POST","/v2/accounts/mfaEnrollment:start",cf(e,t))}function lv(e,t){return lf(e,"POST","/v2/accounts/mfaEnrollment:withdraw",cf(e,t))}var hv=function(){function e(t){var n=this;rn(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ap._fromServerResponse(t.auth,e)})))}))}return on(e,[{key:"getSession",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=sv,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=a(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Nf(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=a(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Nf(this.user,lv(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),fv=new WeakMap;var dv="__sak",pv=function(){function e(t,n){rn(this,e),this.storageRetriever=t,this.type=n}return on(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(dv,"1"),this.storage.removeItem(dv),Promise.resolve(!0)):Promise.resolve(!1)}catch(QR){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var vv=function(e){cn(n,e);var t=pn(n);function n(){var e;return rn(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Pn();return $f(e)||nd(e)}()&&function(){try{return!(!window||window===window.top)}catch(eF){return!1}}(),e.fallbackToPolling=ad(),e._shouldAllowMigration=!0,e}return on(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);id()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=a(f().mark((function e(t,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eh(ln(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eh(ln(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eh(ln(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pv);vv.type="LOCAL";var yv=vv,mv=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return on(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(pv);mv.type="SESSION";var gv=mv;function kv(e){return Promise.all(e.map(function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var _v=function(){function e(t){rn(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return on(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=a(f().mark((function e(t){var n,r,i,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,s=r.data,null===(u=this.handlersMap[o])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),c=Array.from(u).map(function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,kv(c);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function wv(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_v.receivers=[];var bv=function(){function e(t){rn(this,e),this.target=t,this.handlers=new Set}return on(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=a(f().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=wv("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function xv(){return window}function Ev(){return"undefined"!==typeof xv().WorkerGlobalScope&&"function"===typeof xv().importScripts}function Iv(){return Tv.apply(this,arguments)}function Tv(){return(Tv=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Sv(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Cv="firebaseLocalStorageDb",Nv="firebaseLocalStorage",Pv="fbase_key",Av=function(){function e(t){rn(this,e),this.request=t}return on(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Rv(e,t){return e.transaction([Nv],t?"readwrite":"readonly").objectStore(Nv)}function Dv(){var e=indexedDB.deleteDatabase(Cv);return new Av(e).toPromise()}function Ov(){var e=indexedDB.open(Cv,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Nv,{keyPath:Pv})}catch(eF){n(eF)}})),e.addEventListener("success",a(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Nv)){n.next=12;break}return r.close(),n.next=5,Dv();case 5:return n.t0=t,n.next=8,Ov();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Lv(e,t,n){return Mv.apply(this,arguments)}function Mv(){return Mv=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Rv(t,!0).put((d(i={},Pv,n),d(i,"value",r),i)),e.abrupt("return",new Av(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function Fv(e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=a(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rv(t,!1).get(n),e.next=3,new Av(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Uv.apply(this,arguments)}function Vv(e,t){var n=Rv(e,!0).delete(t);return new Av(n).toPromise()}var jv=function(){function e(){rn(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return on(e,[{key:"_openDb",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ov();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ev()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=a(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=_v._getInstance(Ev()?self:null),this.receiver._subscribe("keyChanged",function(){var e=a(f().mark((function e(n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=a(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Iv();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new bv(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Sv()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ov();case 5:return t=e.sent,e.next=8,Lv(t,dv,"1");case 8:return e.next=10,Vv(t,dv);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Lv(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Fv(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Vv(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=a(f().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Rv(e,!1).getAll();return new Av(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=sn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();jv.type="LOCAL";var qv=jv;function Bv(e,t){return lf(e,"POST","/v2/accounts/mfaSignIn:start",cf(e,t))}function zv(e){return Wv.apply(this,arguments)}function Wv(){return Wv=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lf(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Wv.apply(this,arguments)}function Kv(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Kh("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Gv(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Hv=1e12,Qv=function(){function e(t){rn(this,e),this.auth=t,this.counter=Hv,this._widgets=new Map}return on(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Yv(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Hv;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Hv;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Hv,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Yv=function(){function e(t,n,r){var i=this;rn(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Yh(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return on(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(eF){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(eF){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var $v=Gv("rcb"),Jv=new rf(3e4,6e4),Xv="https://www.google.com/recaptcha/api.js?",Zv=function(){function e(){rn(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!xv().grecaptcha}return on(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Yh(ey(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(xv().grecaptcha):new Promise((function(r,i){var a=xv().setTimeout((function(){i(Kh(e,"network-request-failed"))}),Jv.get());xv()[$v]=function(){xv().clearTimeout(a),delete xv()[$v];var o=xv().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Kh(e,"internal-error"))},Kv("".concat(Xv,"?").concat(Jn({onload:$v,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Kh(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!xv().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function ey(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var ty=function(){function e(){rn(this,e)}return on(e,[{key:"load",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Qv(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ny="recaptcha",ry={theme:"light",type:"image"},iy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ry),r=arguments.length>2?arguments[2]:void 0;rn(this,e),this.parameters=n,this.type=ny,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ud(r),this.isInvisible="invisible"===this.parameters.size,Yh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Yh(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ty:new Zv,this.validateStartingState()}return on(e,[{key:"verify",value:function(){var e=a(f().mark((function e(){var t,n,r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(eF){return Promise.reject(eF)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Yh(!this.parameters.sitekey,this.auth,"argument-error"),Yh(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Yh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=xv()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Yh(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=a(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yh(tf()&&!Ev(),this.auth,"internal-error"),e.next=3,ay();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,zv(this.auth);case 8:Yh(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Yh(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ay(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var oy=function(){function e(t,n){rn(this,e),this.verificationId=t,this.onConfirmation=n}return on(e,[{key:"confirm",value:function(e){var t=Gd._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function sy(){return sy=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ud(t),e.next=3,hy(i,n,cr(r));case 3:return a=e.sent,e.abrupt("return",new oy(a,(function(e){return bp(i,e)})));case 5:case"end":return e.stop()}}),e)}))),sy.apply(this,arguments)}function uy(e,t,n){return cy.apply(this,arguments)}function cy(){return(cy=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cr(t),e.next=3,yp(!1,i,"phone");case 3:return e.next=5,hy(i.auth,n,cr(r));case 5:return a=e.sent,e.abrupt("return",new oy(a,(function(e){return Ep(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ly(){return(ly=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cr(t),e.next=3,hy(i.auth,n,cr(r));case 3:return a=e.sent,e.abrupt("return",new oy(a,(function(e){return Tp(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hy(e,t,n){return fy.apply(this,arguments)}function fy(){return fy=a(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Yh("string"===typeof a,t,"argument-error"),Yh(r.type===ny,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Yh("enroll"===s.type,t,"internal-error"),e.next=13,cv(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Yh("signin"===s.type,t,"internal-error"),Yh(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Bv(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,jd(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),fy.apply(this,arguments)}function dy(){return(dy=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pp(cr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var py=function(){function e(t){rn(this,e),this.providerId=e.PROVIDER_ID,this.auth=ud(t)}return on(e,[{key:"verifyPhoneNumber",value:function(e,t){return hy(this.auth,e,cr(t))}}],[{key:"credential",value:function(e,t){return Gd._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Gd._fromTokenResponse(n,r):null}}]),e}();function vy(e,t){return t?Zh(t):(Yh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}py.PROVIDER_ID="phone",py.PHONE_SIGN_IN_METHOD="phone";var yy=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this,"custom","custom")).params=e,r}return on(n,[{key:"_getIdTokenResponse",value:function(e){return Fd(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Fd(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Fd(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(dd);function my(e){return _p(e.auth,new yy(e),e.bypassAuthState)}function gy(e){var t=e.auth,n=e.user;return Yh(n,t,"internal-error"),gp(n,new yy(e),e.bypassAuthState)}function ky(e){return _y.apply(this,arguments)}function _y(){return _y=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Yh(r=t.user,n,"internal-error"),e.abrupt("return",pp(r,new yy(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}var wy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];rn(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return on(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=a(f().mark((function t(n,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=a(f().mark((function e(t){var n,r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return my;case"linkViaPopup":case"linkViaRedirect":return ky;case"reauthViaPopup":case"reauthViaRedirect":return gy;default:Wh(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Jh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Jh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),by=new rf(2e3,1e4);function xy(e,t,n){return Ey.apply(this,arguments)}function Ey(){return Ey=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ud(t),Hh(t,n,Yd),a=vy(i,r),o=new Cy(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function Iy(){return(Iy=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hh((i=cr(t)).auth,n,Yd),a=vy(i.auth,r),o=new Cy(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ty(e,t,n){return Sy.apply(this,arguments)}function Sy(){return(Sy=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hh((i=cr(t)).auth,n,Yd),a=vy(i.auth,r),o=new Cy(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cy=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a,o){var s;return rn(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=un(s),s}return on(n,[{key:"executeNotNull",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Yh(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jh(1===this.filter.length,"Popup operations only handle one event"),t=wv(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Kh(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Kh(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Kh(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,by.get())}()}}]),n}(wy);Cy.currentPopupAction=null;var Ny=new Map,Py=function(e){cn(n,e);var t=pn(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return rn(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return on(n,[{key:"execute",value:function(){var e=a(f().mark((function e(){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ny.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ay(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Eh(ln(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ny.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ny.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=a(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Eh(ln(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Eh(ln(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(wy);function Ay(e,t){return Ry.apply(this,arguments)}function Ry(){return Ry=a(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=My(n),i=Ly(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ry.apply(this,arguments)}function Dy(e,t){return Oy.apply(this,arguments)}function Oy(){return Oy=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ly(t)._set(My(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Oy.apply(this,arguments)}function Ly(e){return Zh(e._redirectPersistence)}function My(e){return Gf("pendingRedirect",e.config.apiKey,e.name)}function Fy(e,t,n){return function(e,t,n){return Uy.apply(this,arguments)}(e,t,n)}function Uy(){return Uy=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ud(t),Hh(t,n,Yd),a=vy(i,r),e.next=5,Dy(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Uy.apply(this,arguments)}function Vy(e,t,n){return function(e,t,n){return jy.apply(this,arguments)}(e,t,n)}function jy(){return(jy=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hh((i=cr(t)).auth,n,Yd),a=vy(i.auth,r),e.next=5,Dy(a,i.auth);case 5:return e.next=7,Hy(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qy(e,t,n){return function(e,t,n){return By.apply(this,arguments)}(e,t,n)}function By(){return(By=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hh((i=cr(t)).auth,n,Yd),a=vy(i.auth,r),e.next=5,yp(!1,i,n.providerId);case 5:return e.next=7,Dy(a,i.auth);case 7:return e.next=9,Hy(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zy(e,t){return Wy.apply(this,arguments)}function Wy(){return Wy=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ud(t)._initializationPromise;case 2:return e.abrupt("return",Ky(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Wy.apply(this,arguments)}function Ky(e,t){return Gy.apply(this,arguments)}function Gy(){return Gy=a(f().mark((function e(t,n){var r,i,a,o,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=ud(t),a=vy(i,n),o=new Py(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Gy.apply(this,arguments)}function Hy(e){return Qy.apply(this,arguments)}function Qy(){return(Qy=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wv("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yy=function(){function e(t){rn(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return on(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jy(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Jy(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Kh(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($y(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add($y(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function $y(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Jy(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Xy(e){return Zy.apply(this,arguments)}function Zy(){return Zy=a(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",lf(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Zy.apply(this,arguments)}var em=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tm=/^https?/;function nm(){return nm=a(f().mark((function e(t){var n,r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Xy(t);case 4:n=e.sent,r=n.authorizedDomains,i=sn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!rm(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Wh(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),nm.apply(this,arguments)}function rm(e){var t=ef(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!tm.test(r))return!1;if(em.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var im=new rf(3e4,6e4);function am(){var e=xv().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=yr(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var om=null;function sm(e){return om=om||function(e){return new Promise((function(t,n){var r,i,a;function o(){am(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){am(),n(Kh(e,"network-request-failed"))},timeout:im.get()})}if(null===(i=null===(r=xv().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=xv().gapi)||void 0===a?void 0:a.load)){var s=Gv("iframefcb");return xv()[s]=function(){gapi.load?o():n(Kh(e,"network-request-failed"))},Kv("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw om=null,e}))}(e),om}var um=new rf(5e3,15e3),cm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hm(e){var t=e.config;Yh(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?af(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Qr},i=lm.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Jn(r).slice(1))}function fm(e){return dm.apply(this,arguments)}function dm(){return dm=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sm(t);case 2:return n=e.sent,Yh(r=xv().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:hm(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cm,dontclear:!0},(function(e){return new Promise(function(){var n=a(f().mark((function n(r,i){var a,o,s;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){xv().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Kh(t,"network-request-failed"),o=xv().setTimeout((function(){i(a)}),um.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}var pm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vm="_blank",ym="http://localhost",mm=function(){function e(t){rn(this,e),this.window=t,this.associatedEvent=null}return on(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(eF){}}}]),e}();function gm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},pm),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Pn().toLowerCase();n&&(s=Jf(c)?vm:n),Yf(c)&&(t=t||ym,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(rd(c)&&"_self"!==s)return km(t||"",s),new mm(null);var f=window.open(t||"",s,h);Yh(f,e,"popup-blocked");try{f.focus()}catch(eF){}return new mm(f)}function km(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _m="__/auth/handler",wm="emulator/auth/handler";function bm(e,t,n,r,i,a){Yh(e.config.authDomain,e,"auth-domain-config-required"),Yh(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qr,eventId:i};if(t instanceof Yd){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Hn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=l(u[s],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof $d){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(_m);return af(t,wm)}(e),"?").concat(Jn(p).slice(1))}var xm="webStorageSupport",Em=function(){function e(){rn(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gv,this._completeRedirectFn=Ky}return on(e,[{key:"_openPopup",value:function(){var e=a(f().mark((function e(t,n,r,i){var a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jh(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=bm(t,n,r,ef(),i),e.abrupt("return",gm(t,o,wv()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=bm(t,n,r,ef(),i),xv().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Jh(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fm(t);case 2:return n=e.sent,r=new Yy(t),n.register("authEvent",(function(e){return Yh(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(xm,{type:xm},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Wh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return nm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ad()||$f()||nd()}}]),e}(),Im=Em,Tm=function(){function e(t){rn(this,e),this.factorId=t}return on(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return $h("unexpected MultiFactorSessionType")}}}]),e}(),Sm=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this,"phone")).credential=e,r}return on(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return lf(e,"POST","/v2/accounts/mfaEnrollment:finalize",cf(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return lf(e,"POST","/v2/accounts/mfaSignIn:finalize",cf(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Tm),Cm=function(){function e(){rn(this,e)}return on(e,null,[{key:"assertion",value:function(e){return Sm._fromCredential(e)}}]),e}();Cm.FACTOR_ID="phone";var Nm,Pm="@firebase/auth",Am="0.19.11",Rm=function(){function e(t){rn(this,e),this.auth=t,this.internalListeners=new Map}return on(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Yh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Dm(){return window}Nm="Browser",qr(new mr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Yh(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Yh(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Nm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:od(Nm)},i=new sd(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zh);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),qr(new mr("auth-internal",(function(e){return function(e){return new Rm(e)}(ud(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ei(Pm,Am,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Nm)),ei(Pm,Am,"esm2017");function Om(e,t,n){return Lm.apply(this,arguments)}function Lm(){return Lm=a(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Dm(),o=a.BuildInfo,Jh(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,qm(n.sessionId);case 4:return s=e.sent,u={},nd()?u.ibi=o.packageName:Zf()?u.apn=o.packageName:Wh(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",bm(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Lm.apply(this,arguments)}function Mm(){return Mm=a(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dm(),r=n.BuildInfo,i={},nd()?i.iosBundleId=r.packageName:Zf()?i.androidPackageName=r.packageName:Wh(t,"operation-not-supported-in-this-environment"),e.next=5,Xy(t,i);case 5:case"end":return e.stop()}}),e)}))),Mm.apply(this,arguments)}function Fm(e){var t=Dm().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Um(e,t,n){return Vm.apply(this,arguments)}function Vm(){return Vm=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dm(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Kh(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Zf()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Vm.apply(this,arguments)}function jm(e){var t,n,r,i,a,o,s,u,c,l,h=Dm();Yh("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Yh("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Yh("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Yh("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Yh("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function qm(e){return Bm.apply(this,arguments)}function Bm(){return(Bm=a(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zm(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zm(e){if(Jh(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Wm=function(e){cn(n,e);var t=pn(n);function n(){var e;return rn(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return on(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Eh(ln(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Yy);function Km(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:$m(),postBody:null,tenantId:e.tenantId,error:Kh(e,"no-auth-event")}}function Gm(e,t){return Jm()._set(Xm(e),t)}function Hm(e){return Qm.apply(this,arguments)}function Qm(){return Qm=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jm()._get(Xm(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Jm()._remove(Xm(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Qm.apply(this,arguments)}function Ym(e,t){var n,r,i=function(e){var t=Zm(e),n=t.link?decodeURIComponent(t.link):void 0,r=Zm(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Zm(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Zm(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(eF){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Kh(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function $m(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Jm(){return Zh(yv)}function Xm(e){return Gf("authEvent",e.config.apiKey,e.name)}function Zm(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=o(t=n)||vr(t)||u(t)||c();r[0];return Xn(r.slice(1).join("?"))}var eg=function(){function e(){rn(this,e),this._redirectPersistence=gv,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ky}return on(e,[{key:"_initialize",value:function(){var e=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Wm(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Wh(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=a(f().mark((function e(t,n,r,i){var a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jm(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ny.clear(),e.next=10,this._originValidation(t);case 10:return o=Km(t,r,i),e.next=13,Gm(t,o);case 13:return e.next=15,Om(t,o,n);case 15:return s=e.sent,e.next=18,Fm(s);case 18:return u=e.sent,e.abrupt("return",Um(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Mm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Dm(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,s=setTimeout(a(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Hm(e);case 2:t.onEvent(ng());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=a(f().mark((function n(r){var i,a;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,Hm(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Ym(i,r.url)),t.onEvent(a||ng());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var c=i,l="".concat(o.packageName.toLowerCase(),"://");Dm().handleOpenURL=function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&u({url:t}),"function"===typeof c)try{c(t)}catch(eF){console.error(eF)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),tg=eg;function ng(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Kh("no-auth-event")}}function rg(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ig(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return!("file:"!==rg()&&"ionic:"!==rg()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ag(){return Ln()&&11===(null===document||void 0===document?void 0:document.documentMode)}function og(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return/Edge\/\d+/.test(e)}function sg(){try{var e=self.localStorage,t=wv();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn();return ag()||og(e)}()||Fn()}catch(eF){return ug()&&Fn()}return!1}function ug(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function cg(){return("http:"===rg()||"https:"===rg()||Dn()||ig())&&!(On()||Rn())&&sg()&&!ug()}function lg(){return ig()&&"undefined"!==typeof document}function hg(){return fg.apply(this,arguments)}function fg(){return(fg=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lg()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dg={LOCAL:"local",NONE:"none",SESSION:"session"},pg=Yh,vg="persistence";function yg(e,t){pg(Object.values(dg).includes(t),e,"invalid-persistence-type"),On()?pg(t!==dg.SESSION,e,"unsupported-persistence-type"):Rn()?pg(t===dg.NONE,e,"unsupported-persistence-type"):ug()?pg(t===dg.NONE||t===dg.LOCAL&&Fn(),e,"unsupported-persistence-type"):pg(t===dg.NONE||sg(),e,"unsupported-persistence-type")}function mg(e){return gg.apply(this,arguments)}function gg(){return gg=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=kg(),r=Gf(vg,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),gg.apply(this,arguments)}function kg(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(eF){return null}}var _g=Yh,wg=function(){function e(){rn(this,e),this.browserResolver=Zh(Im),this.cordovaResolver=Zh(tg),this.underlyingResolver=null,this._redirectPersistence=gv,this._completeRedirectFn=Ky}return on(e,[{key:"_initialize",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=a(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return lg()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return _g(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,hg();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function bg(e){return e.unwrap()}function xg(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Cg(e,function(e,t){var n,r=cr(e),i=t;return Yh(t.customData.operationType,r,"argument-error"),Yh(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),uv._fromError(r,i)}(e,t));else if(r){var i=Eg(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Eg(e){var t=(e instanceof Un?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Un)&&"temporaryProof"in t&&"phoneNumber"in t)return py.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Ph)return null;switch(r){case Nh:n=Zd;break;case Sh:n=Xd;break;case Ch:n=ep;break;case Ah:n=rp;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?tp._create(r,s):Vd._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Jd(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Un?n.credentialFromError(e):n.credentialFromResult(e)}function Ig(e,t){return t.catch((function(t){throw t instanceof Un&&xg(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Eg(t)),additionalUserInfo:ov(e),user:Ng.getOrCreate(r)}}))}function Tg(e,t){return Sg.apply(this,arguments)}function Sg(){return Sg=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Ig(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Sg.apply(this,arguments)}var Cg=function(){function e(t,n){rn(this,e),this.resolver=n,this.auth=t.wrapped()}return on(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Ig(bg(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Ng=function(){function e(t){rn(this,e),this._delegate=t,this.multiFactor=function(e){var t=cr(e);return fv.has(t)||fv.set(t,hv._fromUser(t)),fv.get(t)}(t)}return on(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ig(this.auth,Ep(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tg(this.auth,uy(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ig(this.auth,Ty(this._delegate,t,wg)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mg(ud(this.auth));case 2:return e.abrupt("return",qy(this._delegate,t,wg));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ig(this.auth,Tp(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Tg(this.auth,function(e,t,n){return ly.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Ig(this.auth,function(e,t,n){return Iy.apply(this,arguments)}(this._delegate,e,wg))}},{key:"reauthenticateWithRedirect",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mg(ud(this.auth));case 2:return e.abrupt("return",Vy(this._delegate,t,wg));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Hp.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fp(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Xp(cr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Xp(cr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return dy.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Jp.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Qp.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Ng.USER_MAP=new WeakMap;var Pg=Yh,Ag=function(){function e(t,n){if(rn(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Pg(r,"invalid-api-key",{appName:t.name}),Pg(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?wg:void 0;this._delegate=n.initialize({options:{persistence:Dg(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Vh),this.linkUnderlyingAuth()}return on(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Ng.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ld(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Mp.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Fp(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Lp.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ig(this._delegate,jp(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Gp.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Hd.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pg(cg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,zy(this._delegate,wg);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Ig(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ud(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Rg(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Rg(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Bp.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Op.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yg(this._delegate,t),e.t0=t,e.next=e.t0===dg.SESSION?4:e.t0===dg.LOCAL?6:e.t0===dg.NONE?11:13;break;case 4:return n=gv,e.abrupt("break",14);case 6:return e.next=8,Zh(qv)._isAvailable();case 8:return r=e.sent,n=r?qv:yv,e.abrupt("break",14);case 11:return n=Kf,e.abrupt("break",14);case 13:return e.abrupt("return",Wh("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Ig(this._delegate,function(e){return up.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Ig(this._delegate,bp(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Ig(this._delegate,function(e,t){return Pp.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Ig(this._delegate,function(e,t,n){return bp(cr(e),Qd.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Ig(this._delegate,function(e,t,n){return zp.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Tg(this._delegate,function(e,t,n){return sy.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pg(cg(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Ig(this._delegate,xy(this._delegate,t,wg)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pg(cg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,mg(this._delegate);case 3:return e.abrupt("return",Fy(this._delegate,t,wg));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Vp.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Rg(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Ng.getOrCreate(e))},error:t,complete:n}}function Dg(e,t){var n=function(e,t){var n=kg();if(!n)return[];var r=Gf(vg,e,t);switch(n.getItem(r)){case dg.NONE:return[Kf];case dg.LOCAL:return[qv,gv];case dg.SESSION:return[gv];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(qv)||n.push(qv),"undefined"!==typeof window)for(var r=0,i=[yv,gv];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Kf)||n.push(Kf),n}Ag.Persistence=dg;var Og=function(){function e(){rn(this,e),this.providerId="phone",this._delegate=new py(bg(Ei.auth()))}return on(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return py.credential(e,t)}}]),e}();Og.PHONE_SIGN_IN_METHOD=py.PHONE_SIGN_IN_METHOD,Og.PROVIDER_ID=py.PROVIDER_ID;var Lg=Yh,Mg=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ei.app();rn(this,e),Lg(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new iy(t,n,i.auth()),this.type=this._delegate.type}return on(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new mr("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ag(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Rh,PASSWORD_RESET:Dh,RECOVER_EMAIL:Oh,REVERT_SECOND_FACTOR_ADDITION:Lh,VERIFY_AND_CHANGE_EMAIL:Mh,VERIFY_EMAIL:Fh}},EmailAuthProvider:Qd,FacebookAuthProvider:Xd,GithubAuthProvider:ep,GoogleAuthProvider:Zd,OAuthProvider:Jd,SAMLAuthProvider:np,PhoneAuthProvider:Og,PhoneMultiFactorGenerator:Cm,RecaptchaVerifier:Mg,TwitterAuthProvider:rp,Auth:Ag,AuthCredential:dd,Error:Un}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.11")}(Ei);var Fg,Ug=Ei.initializeApp({apiKey:"AIzaSyA3SUQj8WTLh7qV-DOVAUOH1sldsHWmZQ4",authDomain:"react-twitter-1ec0b.firebaseapp.com",databaseURL:"https://react-twitter-1ec0b-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"react-twitter-1ec0b",storageBucket:"react-twitter-1ec0b.appspot.com",messagingSenderId:"72562846999",appId:"1:72562846999:web:d19142c26bed916f8d1b52",measurementId:"G-CDZSJK6JS3"}),Vg=Ei.auth(),jg=Ug.database().ref(),qg=t.createContext();function Bg(){return(0,t.useContext)(qg)}function zg(e){var n=e.children,r=l((0,t.useState)(),2),i=r[0],a=r[1],o=l((0,t.useState)(!0),2),s=o[0],u=o[1];(0,t.useEffect)((function(){return Vg.onAuthStateChanged((function(e){a(e),u(!1)}))}),[]);var c={currentUser:i,login:function(e,t){return Vg.signInWithEmailAndPassword(e,t)},signup:function(e,t){return Vg.createUserWithEmailAndPassword(e,t)},logout:function(){return Vg.signOut()}};return(0,_.jsx)(qg.Provider,{value:c,children:!s&&n})}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Fg||(Fg={}));var Wg=function(e){return e};var Kg="beforeunload",Gg="popstate";function Hg(e){e.preventDefault(),e.returnValue=""}function Qg(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function Yg(){return Math.random().toString(36).substr(2,8)}function $g(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Jg(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Xg=(0,t.createContext)(null);var Zg=(0,t.createContext)(null);var ek=(0,t.createContext)({outlet:null,matches:[]});function tk(e,t){if(!e)throw new Error(t)}function nk(e,t,n){void 0===n&&(n="/");var r=lk(("string"===typeof t?Jg(t):t).pathname||"/",n);if(null==r)return null;var i=rk(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=sk(i[o],r);return a}function rk(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||tk(!1),a.relativePath=a.relativePath.slice(r.length));var o=hk([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&tk(!1),rk(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:ok(o,e.index),routesMeta:s})})),t}var ik=/^:\w+$/,ak=function(e){return"*"===e};function ok(e,t){var n=e.split("/"),r=n.length;return n.some(ak)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!ak(e)})).reduce((function(e,t){return e+(ik.test(t)?3:""===t?1:10)}),r)}function sk(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=uk({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:hk([i,l.pathname]),pathnameBase:fk(hk([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=hk([i,l.pathnameBase]))}return a}function uk(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(zi){return e}}(c[n]||""),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function ck(e,t,n){var r,i="string"===typeof e?Jg(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Jg(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:dk(a),hash:pk(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function lk(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var hk=function(e){return e.join("/").replace(/\/\/+/g,"/")},fk=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},dk=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},pk=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function vk(e){yk()||tk(!1);var n=(0,t.useContext)(Xg),r=n.basename,i=n.navigator,a=kk(e),o=a.hash,s=a.pathname,u=a.search,c=s;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?Jg(e).pathname:e.pathname}(e),h=null!=l&&l.endsWith("/");c="/"===s?r+(h?"/":""):hk([r,s])}return i.createHref({pathname:c,search:u,hash:o})}function yk(){return null!=(0,t.useContext)(Zg)}function mk(){return yk()||tk(!1),(0,t.useContext)(Zg).location}function gk(){yk()||tk(!1);var e=(0,t.useContext)(Xg),n=e.basename,r=e.navigator,i=(0,t.useContext)(ek).matches,a=mk().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);(0,t.useEffect)((function(){s.current=!0}));var u=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=ck(e,JSON.parse(o),a);"/"!==n&&(i.pathname=hk([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return u}function kk(e){var n=(0,t.useContext)(ek).matches,r=mk().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return ck(e,JSON.parse(i),r)}),[e,i,r])}function _k(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(ek.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function wk(e){var n=e.to,r=e.replace,i=e.state;yk()||tk(!1);var a=gk();return(0,t.useEffect)((function(){a(n,{replace:r,state:i})})),null}function bk(e){tk(!1)}function xk(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,u=void 0===s?Fg.Pop:s,c=e.navigator,l=e.static,h=void 0!==l&&l;yk()&&tk(!1);var f=fk(r),d=(0,t.useMemo)((function(){return{basename:f,navigator:c,static:h}}),[f,c,h]);"string"===typeof o&&(o=Jg(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,_=void 0===k?"":k,w=p.state,b=void 0===w?null:w,x=p.key,E=void 0===x?"default":x,I=(0,t.useMemo)((function(){var e=lk(y,f);return null==e?null:{pathname:e,search:g,hash:_,state:b,key:E}}),[f,y,g,_,b,E]);return null==I?null:(0,t.createElement)(Xg.Provider,{value:d},(0,t.createElement)(Zg.Provider,{children:a,value:{location:I,navigationType:u}}))}function Ek(e){var n=e.children,r=e.location;return function(e,n){yk()||tk(!1);var r,i=(0,t.useContext)(ek).matches,a=i[i.length-1],o=a?a.params:{},s=(a&&a.pathname,a?a.pathnameBase:"/"),u=(a&&a.route,mk());if(n){var c,l="string"===typeof n?Jg(n):n;"/"===s||(null==(c=l.pathname)?void 0:c.startsWith(s))||tk(!1),r=l}else r=u;var h=r.pathname||"/",f=nk(e,{pathname:"/"===s?h:h.slice(s.length)||"/"});return _k(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:hk([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:hk([s,e.pathnameBase])})})),i)}(Ik(n),r)}function Ik(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==bk&&tk(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=Ik(e.props.children)),n.push(r)}else n.push.apply(n,Ik(e.props.children))})),n}function Tk(){return Tk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(this,arguments)}function Sk(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Ck=["onClick","reloadDocument","replace","state","target","to"];function Nk(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,Wg({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(Gg,(function(){if(a)h.call(a),a=null;else{var e=Fg.Pop,t=i(),n=t[0],r=t[1];if(h.length){if(null!=n){var o=u-n;o&&(a={action:e,location:r,retry:function(){m(-1*o)}},m(o))}}else y(e)}}));var o=Fg.Pop,s=i(),u=s[0],c=s[1],l=Qg(),h=Qg();function f(e){return"string"===typeof e?e:$g(e)}function d(e,t){return void 0===t&&(t=null),Wg(Y({pathname:c.pathname,hash:"",search:""},"string"===typeof e?Jg(e):e,{state:t,key:Yg()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function v(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function y(e){o=e;var t=i();u=t[0],c=t[1],l.call({action:o,location:c})}function m(e){r.go(e)}null==u&&(u=0,r.replaceState(Y({},r.state,{idx:u}),""));var g={get action(){return o},get location(){return c},createHref:f,push:function e(t,i){var a=Fg.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var s=p(o,u+1),c=s[0],l=s[1];try{r.pushState(c,"",l)}catch(zi){n.location.assign(l)}y(a)}},replace:function e(t,n){var i=Fg.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,u),s=o[0],c=o[1];r.replaceState(s,"",c),y(i)}},go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(e){return l.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&n.addEventListener(Kg,Hg),function(){t(),h.length||n.removeEventListener(Kg,Hg)}}};return g}({window:i}));var o=a.current,s=l((0,t.useState)({action:o.action,location:o.location}),2),u=s[0],c=s[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(xk,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:o})}var Pk=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,c=e.to,l=Sk(e,Ck),h=vk(c),f=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=gk(),u=mk(),c=kk(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||$g(u)===$g(c);s(e,{replace:n,state:o})}}),[u,s,c,a,o,i,e])}(c,{replace:o,state:s,target:u});return(0,t.createElement)("a",Tk({},l,{href:h,onClick:function(e){r&&r(e),e.defaultPrevented||i||f(e)},ref:n,target:u}))}));function Ak(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=(0,t.useRef)(),i=Bg().signup,o=l((0,t.useState)(""),2),s=o[0],u=o[1],c=l((0,t.useState)(!1),2),h=c[0],d=c[1],p=gk();function v(){return(v=a(f().mark((function t(a){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n.current.value===r.current.value){t.next=3;break}return t.abrupt("return",u("Password do not match"));case 3:return t.prev=3,u(""),d(!0),t.next=8,i(e.current.value,n.current.value);case 8:p("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),u("Failed to create an account.");case 14:d(!1);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(Q.Body,{children:[(0,_.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),s&&(0,_.jsx)(ot,{variant:"danger",children:s}),(0,_.jsxs)(Zt,{onSubmit:function(e){return v.apply(this,arguments)},children:[(0,_.jsxs)(Zt.Group,{id:"email",children:[(0,_.jsx)(Zt.Label,{children:"Email"}),(0,_.jsx)(Zt.Control,{type:"email",ref:e,required:!0})]}),(0,_.jsxs)(Zt.Group,{id:"password",children:[(0,_.jsx)(Zt.Label,{children:"Password"}),(0,_.jsx)(Zt.Control,{type:"password",ref:n,required:!0})]}),(0,_.jsxs)(Zt.Group,{id:"password-confirm",children:[(0,_.jsx)(Zt.Label,{children:"Password Confirmation"}),(0,_.jsx)(Zt.Control,{type:"password",ref:r,required:!0})]}),(0,_.jsx)(nn,{disabled:h,className:"w-100 mt-4 btn-bg",type:"submit",children:"Sign Up"})]})]}),(0,_.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",(0,_.jsx)(Pk,{to:"/login",children:" Log In"})]})]})}var Rk,Dk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ok={},Lk=Lk||{},Mk=Dk||self;function Fk(){}function Uk(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Vk(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var jk="closure_uid_"+(1e9*Math.random()>>>0),qk=0;function Bk(e,t,n){return e.call.apply(e.bind,arguments)}function zk(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Wk(e,t,n){return(Wk=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bk:zk).apply(null,arguments)}function Kk(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gk(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Hk(){this.s=this.s,this.o=this.o}var Qk={};Hk.prototype.s=!1,Hk.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,jk)&&e[jk]||(e[jk]=++qk)}(this);delete Qk[e]}},Hk.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Yk=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},$k=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Jk(e){return Array.prototype.concat.apply([],arguments)}function Xk(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Zk(e){return/^[\s\xa0]*$/.test(e)}var e_,t_=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function n_(e,t){return-1!=e.indexOf(t)}function r_(e,t){return e<t?-1:e>t?1:0}e:{var i_=Mk.navigator;if(i_){var a_=i_.userAgent;if(a_){e_=a_;break e}}e_=""}function o_(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function s_(e){var t={};for(var n in e)t[n]=e[n];return t}var u_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function c_(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<u_.length;a++)n=u_[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function l_(e){return l_[" "](e),e}l_[" "]=Fk;var h_,f_=n_(e_,"Opera"),d_=n_(e_,"Trident")||n_(e_,"MSIE"),p_=n_(e_,"Edge"),v_=p_||d_,y_=n_(e_,"Gecko")&&!(n_(e_.toLowerCase(),"webkit")&&!n_(e_,"Edge"))&&!(n_(e_,"Trident")||n_(e_,"MSIE"))&&!n_(e_,"Edge"),m_=n_(e_.toLowerCase(),"webkit")&&!n_(e_,"Edge");function g_(){var e=Mk.document;return e?e.documentMode:void 0}e:{var k_="",__=function(){var e=e_;return y_?/rv:([^\);]+)(\)|;)/.exec(e):p_?/Edge\/([\d\.]+)/.exec(e):d_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):m_?/WebKit\/(\S+)/.exec(e):f_?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(__&&(k_=__?__[1]:""),d_){var w_=g_();if(null!=w_&&w_>parseFloat(k_)){h_=String(w_);break e}}h_=k_}var b_,x_={};function E_(){return function(e){var t=x_;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=t_(String(h_)).split("."),n=t_("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=r_(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||r_(0==a[2].length,0==o[2].length)||r_(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Mk.document&&d_){var I_=g_();b_=I_||(parseInt(h_,10)||void 0)}else b_=void 0;var T_=b_,S_=function(){if(!Mk.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Mk.addEventListener("test",Fk,t),Mk.removeEventListener("test",Fk,t)}catch(n){}return e}();function C_(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function N_(e,t){if(C_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y_){e:{try{l_(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:P_[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&N_.Z.h.call(this)}}C_.prototype.h=function(){this.defaultPrevented=!0},Gk(N_,C_);var P_={2:"touch",3:"pen",4:"mouse"};N_.prototype.h=function(){N_.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var A_="closure_listenable_"+(1e6*Math.random()|0),R_=0;function D_(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++R_,this.ca=this.fa=!1}function O_(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function L_(e){this.src=e,this.g={},this.h=0}function M_(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Yk(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(O_(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F_(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}L_.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=F_(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new D_(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var U_="closure_lm_"+(1e6*Math.random()|0),V_={};function j_(e,t,n,r,i){if(r&&r.once)return B_(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)j_(e,t[a],n,r,i);return null}return n=Y_(n),e&&e[A_]?e.N(t,n,Vk(r)?!!r.capture:!!r,i):q_(e,t,n,!1,r,i)}function q_(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Vk(i)?!!i.capture:!!i,s=H_(e);if(s||(e[U_]=s=new L_(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=G_;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)S_||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K_(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function B_(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)B_(e,t[a],n,r,i);return null}return n=Y_(n),e&&e[A_]?e.O(t,n,Vk(r)?!!r.capture:!!r,i):q_(e,t,n,!0,r,i)}function z_(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)z_(e,t[a],n,r,i);else r=Vk(r)?!!r.capture:!!r,n=Y_(n),e&&e[A_]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=F_(a=e.g[t],n,r,i))&&(O_(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=H_(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F_(t,n,r,i)),(n=-1<e?t[e]:null)&&W_(n))}function W_(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[A_])M_(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K_(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=H_(t))?(M_(n,e),0==n.h&&(n.src=null,t[U_]=null)):O_(e)}}}function K_(e){return e in V_?V_[e]:V_[e]="on"+e}function G_(e,t){if(e.ca)e=!0;else{t=new N_(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&W_(e),e=n.call(r,t)}return e}function H_(e){return(e=e[U_])instanceof L_?e:null}var Q_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y_(e){return"function"===typeof e?e:(e[Q_]||(e[Q_]=function(t){return e.handleEvent(t)}),e[Q_])}function $_(){Hk.call(this),this.i=new L_(this),this.P=this,this.I=null}function J_(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new C_(t,e);else if(t instanceof C_)t.target=t.target||e;else{var i=t;c_(t=new C_(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=X_(o,r,!0,t)&&i}if(i=X_(o=t.g=e,r,!0,t)&&i,i=X_(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=X_(o=t.g=n[a],r,!1,t)&&i}function X_(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&M_(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Gk($_,Hk),$_.prototype[A_]=!0,$_.prototype.removeEventListener=function(e,t,n,r){z_(this,e,t,n,r)},$_.prototype.M=function(){if($_.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)O_(n[r]);delete t.g[e],t.h--}}this.I=null},$_.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$_.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Z_=Mk.JSON.stringify;function ew(){var e=uw,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var tw,nw=function(){function e(){rn(this,e),this.h=this.g=null}return on(e,[{key:"add",value:function(e,t){var n=rw.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),rw=new(function(){function e(t,n){rn(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return on(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new iw}),(function(e){return e.reset()})),iw=function(){function e(){rn(this,e),this.next=this.g=this.h=null}return on(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function aw(e){Mk.setTimeout((function(){throw e}),0)}function ow(e,t){tw||function(){var e=Mk.Promise.resolve(void 0);tw=function(){e.then(cw)}}(),sw||(tw(),sw=!0),uw.add(e,t)}var sw=!1,uw=new nw;function cw(){for(var e;e=ew();){try{e.h.call(e.g)}catch(n){aw(n)}var t=rw;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}sw=!1}function lw(e,t){$_.call(this),this.h=e||1,this.g=t||Mk,this.j=Wk(this.kb,this),this.l=Date.now()}function hw(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function fw(e,t,n){if("function"===typeof e)n&&(e=Wk(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Wk(e.handleEvent,e)}return 2147483647<Number(t)?-1:Mk.setTimeout(e,t||0)}function dw(e){e.g=fw((function(){e.g=null,e.i&&(e.i=!1,dw(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Gk(lw,$_),(Rk=lw.prototype).da=!1,Rk.S=null,Rk.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),J_(this,"tick"),this.da&&(hw(this),this.start()))}},Rk.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Rk.M=function(){lw.Z.M.call(this),hw(this),delete this.g};var pw=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return on(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:dw(this)}},{key:"M",value:function(){Eh(ln(n.prototype),"M",this).call(this),this.g&&(Mk.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Hk);function vw(e){Hk.call(this),this.h=e,this.g={}}Gk(vw,Hk);var yw=[];function mw(e,t,n,r){Array.isArray(n)||(n&&(yw[0]=n.toString()),n=yw);for(var i=0;i<n.length;i++){var a=j_(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function gw(e){o_(e.g,(function(e,t){this.g.hasOwnProperty(t)&&W_(e)}),e),e.g={}}function kw(){this.g=!0}function _w(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Z_(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}vw.prototype.M=function(){vw.Z.M.call(this),gw(this)},vw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kw.prototype.Aa=function(){this.g=!1},kw.prototype.info=function(){};var ww={},bw=null;function xw(){return bw=bw||new $_}function Ew(e){C_.call(this,ww.Ma,e)}function Iw(e){var t=xw();J_(t,new Ew(t,e))}function Tw(e,t){C_.call(this,ww.STAT_EVENT,e),this.stat=t}function Sw(e){var t=xw();J_(t,new Tw(t,e))}function Cw(e,t){C_.call(this,ww.Na,e),this.size=t}function Nw(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Mk.setTimeout((function(){e()}),t)}ww.Ma="serverreachability",Gk(Ew,C_),ww.STAT_EVENT="statevent",Gk(Tw,C_),ww.Na="timingevent",Gk(Cw,C_);var Pw={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Aw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Rw(){}function Dw(e){return e.h||(e.h=e.i())}function Ow(){}Rw.prototype.h=null;var Lw,Mw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Fw(){C_.call(this,"d")}function Uw(){C_.call(this,"c")}function Vw(){}function jw(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new vw(this),this.P=Bw,e=v_?125:void 0,this.W=new lw(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qw}function qw(){this.i=null,this.g="",this.h=!1}Gk(Fw,C_),Gk(Uw,C_),Gk(Vw,Rw),Vw.prototype.g=function(){return new XMLHttpRequest},Vw.prototype.i=function(){return{}},Lw=new Vw;var Bw=45e3,zw={},Ww={};function Kw(e,t,n){e.K=1,e.v=pb(ub(t)),e.s=n,e.U=!0,Gw(e,null)}function Gw(e,t){e.F=Date.now(),$w(e),e.A=ub(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Sb(n.h,"t",r),e.C=0,n=e.l.H,e.h=new qw,e.g=Nx(e.l,n?t:null,!e.s),0<e.O&&(e.L=new pw(Wk(e.Ia,e,e.g),e.O)),mw(e.V,e.g,"readystatechange",e.gb),t=e.H?s_(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Iw(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Hw(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Qw(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Yw(e,n))==Ww){4==t&&(e.o=4,Sw(14),i=!1),_w(e.j,e.m,null,"[Incomplete Response]");break}if(r==zw){e.o=4,Sw(15),_w(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_w(e.j,e.m,r,null),tb(e,r)}Hw(e)&&r!=Ww&&r!=zw&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Sw(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),wx(t),t.L=!0,Sw(11))):(_w(e.j,e.m,n,"[Invalid Chunked Response]"),eb(e),Zw(e))}function Yw(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ww:(n=Number(t.substring(n,r)),isNaN(n)?zw:(r+=1)+n>t.length?Ww:(t=t.substr(r,n),e.C=r+n,t))}function $w(e){e.Y=Date.now()+e.P,Jw(e,e.P)}function Jw(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Nw(Wk(e.eb,e),t)}function Xw(e){e.B&&(Mk.clearTimeout(e.B),e.B=null)}function Zw(e){0==e.l.G||e.I||Ex(e.l,e)}function eb(e){Xw(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,hw(e.W),gw(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function tb(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Lb(n.i,e)))if(n.I=e.N,!e.J&&Lb(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;xx(n),fx(n)}_x(n),Sw(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Nw(Wk(n.ab,n),6e3));if(1>=Ob(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Tx(n,11)}else if((e.J||n.g==e)&&xx(n),!Zk(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(n_(l,"spdy")||n_(l,"quic")||n_(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Mb(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,db(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Cx(r,r.H?r.la:null,r.W),d.J){Fb(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Xw(p),$w(p)),r.g=d}else kx(r);0<n.l.length&&vx(n)}else"stop"!=a[0]&&"close"!=a[0]||Tx(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Tx(n,7):hx(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Iw(4)}catch(a){}}function nb(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Uk(e)||"string"===typeof e)$k(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Uk(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Uk(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function rb(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof rb)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ib(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ab(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ab(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ab(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Rk=jw.prototype).setTimeout=function(e){this.P=e},Rk.gb=function(e){e=e.target;var t=this.L;t&&3==ox(e)?t.l():this.Ia(e)},Rk.Ia=function(e){try{if(e==this.g)e:{var t=ox(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||v_||this.g&&(this.h.h||this.g.ga()||sx(this.g)))){this.I||4!=t||7==n||Iw(8==n||0>=r?3:2),Xw(this);var i=this.g.ba();this.N=i;t:if(Hw(this)){var a=sx(this.g);e="";var o=a.length,s=4==ox(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){eb(this),Zw(this);var u="";break t}this.h.i=new Mk.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zk(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Sw(12),eb(this),Zw(this);break e}_w(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,tb(this,i)}this.U?(Qw(this,t,u),v_&&this.i&&3==t&&(mw(this.V,this.W,"tick",this.fb),this.W.start())):(_w(this.j,this.m,u,null),tb(this,u)),4==t&&eb(this),this.i&&!this.I&&(4==t?Ex(this.l,this):(this.i=!1,$w(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Sw(12)):(this.o=0,Sw(13)),eb(this),Zw(this)}}}catch(t){}},Rk.fb=function(){if(this.g){var e=ox(this.g),t=this.g.ga();this.C<t.length&&(Xw(this),Qw(this,e,t),this.i&&4!=e&&$w(this))}},Rk.cancel=function(){this.I=!0,eb(this)},Rk.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Iw(3),Sw(17)),eb(this),this.o=2,Zw(this)):Jw(this,this.Y-e)},(Rk=rb.prototype).R=function(){ib(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Rk.T=function(){return ib(this),this.g.concat()},Rk.get=function(e,t){return ab(this.h,e)?this.h[e]:t},Rk.set=function(e,t){ab(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Rk.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ob=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sb(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof sb){this.g=void 0!==t?t:e.g,cb(this,e.j),this.s=e.s,lb(this,e.i),hb(this,e.m),this.l=e.l,t=e.h;var n=new xb;n.i=t.i,t.g&&(n.g=new rb(t.g),n.h=t.h),fb(this,n),this.o=e.o}else e&&(n=String(e).match(ob))?(this.g=!!t,cb(this,n[1]||"",!0),this.s=vb(n[2]||""),lb(this,n[3]||"",!0),hb(this,n[4]),this.l=vb(n[5]||"",!0),fb(this,n[6]||"",!0),this.o=vb(n[7]||"")):(this.g=!!t,this.h=new xb(null,this.g))}function ub(e){return new sb(e)}function cb(e,t,n){e.j=n?vb(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lb(e,t,n){e.i=n?vb(t,!0):t}function hb(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function fb(e,t,n){t instanceof xb?(e.h=t,function(e,t){t&&!e.j&&(Eb(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ib(this,t),Sb(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=yb(t,wb)),e.h=new xb(t,e.g))}function db(e,t,n){e.h.set(t,n)}function pb(e){return db(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vb(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function yb(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mb),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mb(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}sb.prototype.toString=function(){var e=[],t=this.j;t&&e.push(yb(t,gb,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(yb(t,gb,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(yb(n,"/"==n.charAt(0)?_b:kb,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",yb(n,bb)),e.join("")};var gb=/[#\/\?@]/g,kb=/[#\?:]/g,_b=/[#\?]/g,wb=/[#\?@]/g,bb=/#/g;function xb(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Eb(e){e.g||(e.g=new rb,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ib(e,t){Eb(e),t=Cb(e,t),ab(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ab((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ib(e)))}function Tb(e,t){return Eb(e),t=Cb(e,t),ab(e.g.h,t)}function Sb(e,t,n){Ib(e,t),0<n.length&&(e.i=null,e.g.set(Cb(e,t),Xk(n)),e.h+=n.length)}function Cb(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Rk=xb.prototype).add=function(e,t){Eb(this),this.i=null,e=Cb(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Rk.forEach=function(e,t){Eb(this),this.g.forEach((function(n,r){$k(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Rk.T=function(){Eb(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Rk.R=function(e){Eb(this);var t=[];if("string"===typeof e)Tb(this,e)&&(t=Jk(t,this.g.get(Cb(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Jk(t,e[n])}return t},Rk.set=function(e,t){return Eb(this),this.i=null,Tb(this,e=Cb(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Rk.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Rk.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Nb=on((function e(t,n){rn(this,e),this.h=t,this.g=n}));function Pb(e){this.l=e||Rb,Mk.PerformanceNavigationTiming?e=0<(e=Mk.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Mk.g&&Mk.g.Ea&&Mk.g.Ea()&&Mk.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ab,Rb=10;function Db(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ob(e){return e.h?1:e.g?e.g.size:0}function Lb(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Mb(e,t){e.g?e.g.add(t):e.h=t}function Fb(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ub(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=sn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Xk(e.i)}function Vb(){}function jb(){this.g=new Vb}function qb(e,t,n){var r=n||"";try{nb(e,(function(e,n){var i=e;Vk(e)&&(i=Z_(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(eF){throw t.push(r+"type="+encodeURIComponent("_badmap")),eF}}function Bb(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function zb(e){this.l=e.$b||null,this.j=e.ib||!1}function Wb(e,t){$_.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Kb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pb.prototype.cancel=function(){if(this.i=Ub(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=sn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Vb.prototype.stringify=function(e){return Mk.JSON.stringify(e,void 0)},Vb.prototype.parse=function(e){return Mk.JSON.parse(e,void 0)},Gk(zb,Rw),zb.prototype.g=function(){return new Wb(this.l,this.j)},zb.prototype.i=(Ab={},function(){return Ab}),Gk(Wb,$_);var Kb=0;function Gb(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Hb(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Qb(e)}function Qb(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Rk=Wb.prototype).open=function(e,t){if(this.readyState!=Kb)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Qb(this)},Rk.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Mk).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Rk.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hb(this)),this.readyState=Kb},Rk.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Qb(this)),this.g&&(this.readyState=3,Qb(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Mk.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gb(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Rk.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hb(this):Qb(this),3==this.readyState&&Gb(this)}},Rk.Ua=function(e){this.g&&(this.response=this.responseText=e,Hb(this))},Rk.Ta=function(e){this.g&&(this.response=e,Hb(this))},Rk.ha=function(){this.g&&Hb(this)},Rk.setRequestHeader=function(e,t){this.v.append(e,t)},Rk.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Rk.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Wb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Yb=Mk.JSON.parse;function $b(e){$_.call(this),this.headers=new rb,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Jb,this.K=this.L=!1}Gk($b,$_);var Jb="",Xb=/^https?$/i,Zb=["POST","PUT"];function ex(e){return"content-type"==e.toLowerCase()}function tx(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,nx(e),ix(e)}function nx(e){e.D||(e.D=!0,J_(e,"complete"),J_(e,"error"))}function rx(e){if(e.h&&"undefined"!=typeof Lk&&(!e.C[1]||4!=ox(e)||2!=e.ba()))if(e.v&&4==ox(e))fw(e.Fa,0,e);else if(J_(e,"readystatechange"),4==ox(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ob)[1]||null;if(!a&&Mk.self&&Mk.self.location){var o=Mk.self.location.protocol;a=o.substr(0,o.length-1)}i=!Xb.test(a?a.toLowerCase():"")}t=i}if(t)J_(e,"complete"),J_(e,"success");else{e.m=6;try{var s=2<ox(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",nx(e)}}finally{ix(e)}}}function ix(e,t){if(e.g){ax(e);var n=e.g,r=e.C[0]?Fk:null;e.g=null,e.C=null,t||J_(e,"ready");try{n.onreadystatechange=r}catch(eF){}}}function ax(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Mk.clearTimeout(e.A),e.A=null)}function ox(e){return e.g?e.g.readyState:0}function sx(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Jb:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ux(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return o_(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):db(e,t,n))}function cx(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function lx(e){this.za=0,this.l=[],this.h=new kw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=cx("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=cx("baseRetryDelayMs",5e3,e),this.$a=cx("retryDelaySeedMs",1e4,e),this.Ya=cx("forwardChannelMaxRetries",2,e),this.ra=cx("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Pb(e&&e.concurrentRequestLimit),this.Ca=new jb,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function hx(e){if(dx(e),3==e.G){var t=e.V++,n=ub(e.F);db(n,"SID",e.J),db(n,"RID",t),db(n,"TYPE","terminate"),mx(e,n),(t=new jw(e,e.h,t,void 0)).K=2,t.v=pb(ub(n)),n=!1,Mk.navigator&&Mk.navigator.sendBeacon&&(n=Mk.navigator.sendBeacon(t.v.toString(),"")),!n&&Mk.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nx(t.l,null),t.g.ea(t.v)),t.F=Date.now(),$w(t)}Sx(e)}function fx(e){e.g&&(wx(e),e.g.cancel(),e.g=null)}function dx(e){fx(e),e.u&&(Mk.clearTimeout(e.u),e.u=null),xx(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Mk.clearTimeout(e.m),e.m=null)}function px(e,t){e.l.push(new Nb(e.Za++,t)),3==e.G&&vx(e)}function vx(e){Db(e.i)||e.m||(e.m=!0,ow(e.Ha,e),e.C=0)}function yx(e,t){var n;n=t?t.m:e.V++;var r=ub(e.F);db(r,"SID",e.J),db(r,"RID",n),db(r,"AID",e.U),mx(e,r),e.o&&e.s&&ux(r,e.o,e.s),n=new jw(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=gx(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Mb(e.i,n),Kw(n,r,t)}function mx(e,t){e.j&&nb({},(function(e,n){db(t,n,e)}))}function gx(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Wk(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{qb(l,o,"req"+c+"_")}catch(nE){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function kx(e){e.g||e.u||(e.Y=1,ow(e.Ga,e),e.A=0)}function _x(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Nw(Wk(e.Ga,e),Ix(e,e.A)),e.A++,!0)}function wx(e){null!=e.B&&(Mk.clearTimeout(e.B),e.B=null)}function bx(e){e.g=new jw(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ub(e.oa);db(t,"RID","rpc"),db(t,"SID",e.J),db(t,"CI",e.N?"0":"1"),db(t,"AID",e.U),mx(e,t),db(t,"TYPE","xmlhttp"),e.o&&e.s&&ux(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=pb(ub(t)),n.s=null,n.U=!0,Gw(n,e)}function xx(e){null!=e.v&&(Mk.clearTimeout(e.v),e.v=null)}function Ex(e,t){var n=null;if(e.g==t){xx(e),wx(e),e.g=null;var r=2}else{if(!Lb(e.i,t))return;n=t.D,Fb(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;J_(r=xw(),new Cw(r,n,t,i)),vx(e)}else kx(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ob(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Nw(Wk(e.Ha,e,t),Ix(e,e.C)),e.C++,!0))}(e,t)||2==r&&_x(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Tx(e,5);break;case 4:Tx(e,10);break;case 3:Tx(e,6);break;default:Tx(e,2)}}function Ix(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Tx(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Wk(e.jb,e);n||(n=new sb("//www.google.com/images/cleardot.gif"),Mk.location&&"http"==Mk.location.protocol||cb(n,"https"),pb(n)),function(e,t){var n=new kw;if(Mk.Image){var r=new Image;r.onload=Kk(Bb,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Kk(Bb,n,r,"TestLoadImage: error",!1,t),r.onabort=Kk(Bb,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Kk(Bb,n,r,"TestLoadImage: timeout",!1,t),Mk.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Sw(2);e.G=0,e.j&&e.j.va(t),Sx(e),dx(e)}function Sx(e){e.G=0,e.I=-1,e.j&&(0==Ub(e.i).length&&0==e.l.length||(e.i.i.length=0,Xk(e.l),e.l.length=0),e.j.ua())}function Cx(e,t,n){var r=function(e){return e instanceof sb?ub(e):new sb(e,void 0)}(n);if(""!=r.i)t&&lb(r,t+"."+r.i),hb(r,r.m);else{var i=Mk.location;r=function(e,t,n,r){var i=new sb(null,void 0);return e&&cb(i,e),t&&lb(i,t),n&&hb(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&o_(e.aa,(function(e,t){db(r,t,e)})),t=e.D,n=e.sa,t&&n&&db(r,t,n),db(r,"VER",e.ma),mx(e,r),r}function Nx(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new $b(new zb({ib:!0})):new $b(e.qa)).L=e.H,t}function Px(){}function Ax(){if(d_&&!(10<=Number(T_)))throw Error("Environmental error: no available transport.")}function Rx(e,t){$_.call(this),this.g=new lx(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Zk(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Zk(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Lx(this)}function Dx(e){Fw.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ox(){Uw.call(this),this.status=1}function Lx(e){this.g=e}(Rk=$b.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Lw.g(),this.C=this.u?Dw(this.u):Dw(Lw),this.g.onreadystatechange=Wk(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void tx(this,a)}e=n||"";var i=new rb(this.headers);r&&nb(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=ex,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Mk.FormData&&e instanceof Mk.FormData,!(0<=Yk(Zb,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ax(this),0<this.B&&((this.K=function(e){return d_&&E_()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wk(this.pa,this)):this.A=fw(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){tx(this,a)}},Rk.pa=function(){"undefined"!=typeof Lk&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,J_(this,"timeout"),this.abort(8))},Rk.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,J_(this,"complete"),J_(this,"abort"),ix(this))},Rk.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ix(this,!0)),$b.Z.M.call(this)},Rk.Fa=function(){this.s||(this.F||this.v||this.l?rx(this):this.cb())},Rk.cb=function(){rx(this)},Rk.ba=function(){try{return 2<ox(this)?this.g.status:-1}catch(Ab){return-1}},Rk.ga=function(){try{return this.g?this.g.responseText:""}catch(Ab){return""}},Rk.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Yb(t)}},Rk.Da=function(){return this.m},Rk.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Rk=lx.prototype).ma=8,Rk.G=1,Rk.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Rk.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new jw(this,this.h,e,void 0),n=this.s;if(this.P&&(n?c_(n=s_(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=gx(this,t,r),db(i=ub(this.F),"RID",e),db(i,"CVER",22),this.D&&db(i,"X-HTTP-Session-Id",this.D),mx(this,i),this.o&&n&&ux(i,this.o,n),Mb(this.i,t),this.Ra&&db(i,"TYPE","init"),this.ja?(db(i,"$req",r),db(i,"SID","null"),t.$=!0,Kw(t,i,null)):Kw(t,i,r),this.G=2}}else 3==this.G&&(e?yx(this,e):0==this.l.length||Db(this.i)||yx(this))},Rk.Ga=function(){if(this.u=null,bx(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Nw(Wk(this.bb,this),e)}},Rk.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Sw(10),fx(this),bx(this))},Rk.ab=function(){null!=this.v&&(this.v=null,fx(this),_x(this),Sw(19))},Rk.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Sw(2)):(this.h.info("Failed to ping google.com"),Sw(1))},(Rk=Px.prototype).xa=function(){},Rk.wa=function(){},Rk.va=function(){},Rk.ua=function(){},Rk.Oa=function(){},Ax.prototype.g=function(e,t){return new Rx(e,t)},Gk(Rx,$_),Rx.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ow(Wk(e.hb,e,t))),Sw(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Cx(e,null,e.W),vx(e)},Rx.prototype.close=function(){hx(this.g)},Rx.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,px(this.g,t)}else this.v?((t={}).__data__=Z_(e),px(this.g,t)):px(this.g,e)},Rx.prototype.M=function(){this.g.j=null,delete this.j,hx(this.g),delete this.g,Rx.Z.M.call(this)},Gk(Dx,Fw),Gk(Ox,Uw),Gk(Lx,Px),Lx.prototype.xa=function(){J_(this.g,"a")},Lx.prototype.wa=function(e){J_(this.g,new Dx(e))},Lx.prototype.va=function(e){J_(this.g,new Ox(e))},Lx.prototype.ua=function(){J_(this.g,"b")},Ax.prototype.createWebChannel=Ax.prototype.g,Rx.prototype.send=Rx.prototype.u,Rx.prototype.open=Rx.prototype.m,Rx.prototype.close=Rx.prototype.close,Pw.NO_ERROR=0,Pw.TIMEOUT=8,Pw.HTTP_ERROR=6,Aw.COMPLETE="complete",Ow.EventType=Mw,Mw.OPEN="a",Mw.CLOSE="b",Mw.ERROR="c",Mw.MESSAGE="d",$_.prototype.listen=$_.prototype.N,$b.prototype.listenOnce=$b.prototype.O,$b.prototype.getLastError=$b.prototype.La,$b.prototype.getLastErrorCode=$b.prototype.Da,$b.prototype.getStatus=$b.prototype.ba,$b.prototype.getResponseJson=$b.prototype.Qa,$b.prototype.getResponseText=$b.prototype.ga,$b.prototype.send=$b.prototype.ea;var Mx=Ok.createWebChannelTransport=function(){return new Ax},Fx=Ok.getStatEventTarget=function(){return xw()},Ux=Ok.ErrorCode=Pw,Vx=Ok.EventType=Aw,jx=Ok.Event=ww,qx=Ok.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Bx=Ok.FetchXmlHttpFactory=zb,zx=Ok.WebChannel=Ow,Wx=Ok.XhrIo=$b,Kx="@firebase/firestore",Gx=function(){function e(t){rn(this,e),this.uid=t}return on(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Gx.UNAUTHENTICATED=new Gx(null),Gx.GOOGLE_CREDENTIALS=new Gx("google-credentials-uid"),Gx.FIRST_PARTY=new Gx("first-party-uid"),Gx.MOCK_USER=new Gx("mock-user");var Hx="9.6.10",Qx=new Pr("@firebase/firestore");function Yx(){return Qx.logLevel}function $x(e){if(Qx.logLevel<=wr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zx);Qx.debug.apply(Qx,["Firestore (".concat(Hx,"): ").concat(e)].concat(yr(i)))}}function Jx(e){if(Qx.logLevel<=wr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zx);Qx.error.apply(Qx,["Firestore (".concat(Hx,"): ").concat(e)].concat(yr(i)))}}function Xx(e){if(Qx.logLevel<=wr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zx);Qx.warn.apply(Qx,["Firestore (".concat(Hx,"): ").concat(e)].concat(yr(i)))}}function Zx(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function eE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Hx,") INTERNAL ASSERTION FAILED: ")+e;throw Jx(t),new Error(t)}function tE(e,t){e||eE()}function nE(e,t){return e}var rE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},iE=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return on(n)}(Un),aE=on((function e(){var t=this;rn(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),oE=on((function e(t,n){rn(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),sE=function(){function e(){rn(this,e)}return on(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Gx.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),uE=function(){function e(t){rn(this,e),this.token=t,this.changeListener=null}return on(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),cE=function(){function e(t){rn(this,e),this.t=t,this.currentUser=Gx.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return on(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new aE;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new aE,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=o;e.enqueueRetryable(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){$x("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):($x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new aE)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?($x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(tE("string"==typeof n.accessToken),new oE(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return tE(null===e||"string"==typeof e),new Gx(e)}}]),e}(),lE=on((function e(t,n,r){rn(this,e),this.type="FirstParty",this.user=Gx.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),hE=function(){function e(t,n,r){rn(this,e),this.h=t,this.l=n,this.m=r}return on(e,[{key:"getToken",value:function(){return Promise.resolve(new lE(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Gx.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),fE=on((function e(t){rn(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),dE=function(){function e(t){rn(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return on(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&$x("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,$x("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){$x("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):$x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(tE("string"==typeof t.token),e.p=t.token,new fE(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),pE=function(){function e(t,n){var r=this;rn(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return on(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function vE(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}pE.A=-1;var yE=function(){function e(){rn(this,e)}return on(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=vE(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function mE(e,t){return e<t?-1:e>t?1:0}function gE(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function kE(e){return e+"\0"}var _E=function(){function e(t,n){if(rn(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new iE(rE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new iE(rE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new iE(rE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new iE(rE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return on(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?mE(this.nanoseconds,e.nanoseconds):mE(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),wE=function(){function e(t){rn(this,e),this.timestamp=t}return on(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new _E(0,0))}},{key:"max",value:function(){return new e(new _E(253402300799,999999999))}}]),e}();function bE(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function xE(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function EE(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var IE=function(){function e(t,n,r){rn(this,e),void 0===n?n=0:n>t.length&&eE(),void 0===r?r=t.length-n:r>t.length-n&&eE(),this.segments=t,this.offset=n,this.len=r}return on(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),TE=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new iE(rE.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,yr(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(IE),SE=/^[_a-zA-Z][_a-zA-Z0-9]*$/,CE=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return SE.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new iE(rE.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new iE(rE.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new iE(rE.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new iE(rE.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(IE),NE=function(){function e(t){rn(this,e),this.fields=t,t.sort(CE.comparator)}return on(e,[{key:"covers",value:function(e){var t,n=sn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return gE(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var PE=function(e){function t(e){rn(this,t),this.binaryString=e}return on(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return mE(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();PE.EMPTY_BYTE_STRING=new PE("");var AE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function RE(e){if(tE(!!e),"string"==typeof e){var t=0,n=AE.exec(e);if(tE(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:DE(e.seconds),nanos:DE(e.nanos)}}function DE(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function OE(e){return"string"==typeof e?PE.fromBase64String(e):PE.fromUint8Array(e)}function LE(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ME(e){var t=e.mapValue.fields.__previous_value__;return LE(t)?ME(t):t}function FE(e){var t=RE(e.mapValue.fields.__local_write_time__.timestampValue);return new _E(t.seconds,t.nanos)}var UE=on((function e(t,n,r,i,a,o,s,u){rn(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),VE=function(){function e(t,n){rn(this,e),this.projectId=t,this.database=n||"(default)"}return on(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function jE(e){return null==e}function qE(e){return 0===e&&1/e==-1/0}function BE(e){return"number"==typeof e&&Number.isInteger(e)&&!qE(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var zE=function(){function e(t){rn(this,e),this.path=t}return on(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===TE.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(TE.fromString(t))}},{key:"fromName",value:function(t){return new e(TE.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(TE.emptyPath())}},{key:"comparator",value:function(e,t){return TE.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new TE(t.slice()))}}]),e}(),WE={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},KE={nullValue:"NULL_VALUE"};function GE(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?LE(e)?4:oI(e)?9:10:eE()}function HE(e,t){if(e===t)return!0;var n=GE(e);if(n!==GE(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return FE(e).isEqual(FE(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=RE(e.timestampValue),r=RE(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return OE(e.bytesValue).isEqual(OE(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return DE(e.geoPointValue.latitude)===DE(t.geoPointValue.latitude)&&DE(e.geoPointValue.longitude)===DE(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return DE(e.integerValue)===DE(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=DE(e.doubleValue),r=DE(t.doubleValue);return n===r?qE(n)===qE(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return gE(e.arrayValue.values||[],t.arrayValue.values||[],HE);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(bE(n)!==bE(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!HE(n[i],r[i])))return!1;return!0}(e,t);default:return eE()}}function QE(e,t){return void 0!==(e.values||[]).find((function(e){return HE(e,t)}))}function YE(e,t){if(e===t)return 0;var n=GE(e),r=GE(t);if(n!==r)return mE(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return mE(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=DE(e.integerValue||e.doubleValue),r=DE(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $E(e.timestampValue,t.timestampValue);case 4:return $E(FE(e),FE(t));case 5:return mE(e.stringValue,t.stringValue);case 6:return function(e,t){var n=OE(e),r=OE(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=mE(n[i],r[i]);if(0!==a)return a}return mE(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=mE(DE(e.latitude),DE(t.latitude));return 0!==n?n:mE(DE(e.longitude),DE(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=YE(n[i],r[i]);if(a)return a}return mE(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=mE(r[o],a[o]);if(0!==s)return s;var u=YE(n[r[o]],i[a[o]]);if(0!==u)return u}return mE(r.length,a.length)}(e.mapValue,t.mapValue);default:throw eE()}}function $E(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return mE(e,t);var n=RE(e),r=RE(t),i=mE(n.seconds,r.seconds);return 0!==i?i:mE(n.nanos,r.nanos)}function JE(e){return XE(e)}function XE(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=RE(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?OE(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,zE.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=sn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=XE(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=sn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(XE(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):eE();var t,n}function ZE(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function eI(e){return!!e&&"integerValue"in e}function tI(e){return!!e&&"arrayValue"in e}function nI(e){return!!e&&"nullValue"in e}function rI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function iI(e){return!!e&&"mapValue"in e}function aI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return xE(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=aI(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=aI(e.arrayValue.values[r]);return n}return Object.assign({},e)}function oI(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function sI(e,t){return void 0===e?t:void 0===t||YE(e,t)>0?e:t}function uI(e,t){return void 0===e?t:void 0===t||YE(e,t)<0?e:t}var cI=function(){function e(t){rn(this,e),this.value=t}return on(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!iI(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=aI(t)}},{key:"setAll",value:function(e){var t=this,n=CE.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=aI(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());iI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return HE(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];iI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){xE(t,(function(t,n){return e[t]=n}));var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(aI(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function lI(e){var t=[];return xE(e.fields,(function(e,n){var r=new CE([e]);if(iI(n)){var i=lI(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=sn(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new NE(t)}var hI=function(){function e(t,n,r,i,a,o){rn(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return on(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=cI.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=cI.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,wE.min(),wE.min(),cI.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,wE.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,wE.min(),cI.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,wE.min(),cI.empty(),2)}}]),e}(),fI=on((function e(t,n,r,i){rn(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function dI(e){return e.fields.find((function(e){return 2===e.kind}))}function pI(e){return e.fields.filter((function(e){return 2!==e.kind}))}fI.UNKNOWN_ID=-1;var vI=on((function e(t,n){rn(this,e),this.fieldPath=t,this.kind=n})),yI=function(){function e(t,n){rn(this,e),this.sequenceNumber=t,this.offset=n}return on(e,null,[{key:"empty",value:function(){return new e(0,kI.min())}}]),e}();function mI(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=wE.fromTimestamp(1e9===r?new _E(n+1,0):new _E(n,r));return new kI(i,zE.empty(),t)}function gI(e){return new kI(e.readTime,e.key,-1)}var kI=function(){function e(t,n,r){rn(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return on(e,null,[{key:"min",value:function(){return new e(wE.min(),zE.empty(),-1)}},{key:"max",value:function(){return new e(wE.max(),zE.empty(),-1)}}]),e}();function _I(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=zE.comparator(e.documentKey,t.documentKey))?n:mE(e.largestBatchId,t.largestBatchId)}var wI=on((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;rn(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function bI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new wI(e,t,n,r,i,a,o)}function xI(e){var t=nE(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+JE(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),jE(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return JE(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return JE(e)})).join(",")),t.P=n}return t.P}function EI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!UI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!HE(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!jI(e.startAt,t.startAt)&&jI(e.endAt,t.endAt)}function II(e){return zE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function TI(e,t){return e.filters.filter((function(e){return e instanceof SI&&e.field.isEqual(t)}))}var SI=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return on(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(YE(t,this.value)):null!==t&&GE(this.value)===GE(t)&&this.v(YE(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return eE()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new CI(e,t,r):"array-contains"===t?new RI(e,r):"in"===t?new DI(e,r):"not-in"===t?new OI(e,r):"array-contains-any"===t?new LI(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new NI(e,n):new PI(e,n)}}]),n}(function(){return on((function e(){rn(this,e)}))}()),CI=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this,e,r,i)).key=zE.fromName(i.referenceValue),a}return on(n,[{key:"matches",value:function(e){var t=zE.comparator(e.key,this.key);return this.v(t)}}]),n}(SI),NI=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e,"in",r)).keys=AI("in",r),i}return on(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(SI),PI=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e,"not-in",r)).keys=AI("not-in",r),i}return on(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(SI);function AI(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return zE.fromName(e.referenceValue)}))}var RI=function(e){cn(n,e);var t=pn(n);function n(e,r){return rn(this,n),t.call(this,e,"array-contains",r)}return on(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return tI(t)&&QE(t.arrayValue,this.value)}}]),n}(SI),DI=function(e){cn(n,e);var t=pn(n);function n(e,r){return rn(this,n),t.call(this,e,"in",r)}return on(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&QE(this.value.arrayValue,t)}}]),n}(SI),OI=function(e){cn(n,e);var t=pn(n);function n(e,r){return rn(this,n),t.call(this,e,"not-in",r)}return on(n,[{key:"matches",value:function(e){if(QE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!QE(this.value.arrayValue,t)}}]),n}(SI),LI=function(e){cn(n,e);var t=pn(n);function n(e,r){return rn(this,n),t.call(this,e,"array-contains-any",r)}return on(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!tI(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return QE(t.value.arrayValue,e)}))}}]),n}(SI),MI=on((function e(t,n){rn(this,e),this.position=t,this.inclusive=n})),FI=on((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";rn(this,e),this.field=t,this.dir=n}));function UI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function VI(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?zE.comparator(zE.fromName(o.referenceValue),n.key):YE(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function jI(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!HE(e.position[n],t.position[n]))return!1;return!0}var qI=on((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;rn(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function BI(e,t,n,r,i,a,o,s){return new qI(e,t,n,r,i,a,o,s)}function zI(e){return new qI(e)}function WI(e){return!jE(e.limit)&&"F"===e.limitType}function KI(e){return!jE(e.limit)&&"L"===e.limitType}function GI(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function HI(e){var t,n=sn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function QI(e){return null!==e.collectionGroup}function YI(e){var t=nE(e);if(null===t.D){t.D=[];var n=HI(t),r=GI(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new FI(n)),t.D.push(new FI(CE.keyField(),"asc"));else{var i,a=!1,o=sn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new FI(CE.keyField(),u))}}}return t.D}function $I(e){var t=nE(e);if(!t.C)if("F"===t.limitType)t.C=bI(t.path,t.collectionGroup,YI(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=sn(YI(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new FI(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new MI(t.endAt.position,!t.endAt.inclusive):null,u=t.startAt?new MI(t.startAt.position,!t.startAt.inclusive):null;t.C=bI(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function JI(e,t,n){return new qI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function XI(e,t){return EI($I(e),$I(t))&&e.limitType===t.limitType}function ZI(e){return"".concat(xI($I(e)),"|lt:").concat(e.limitType)}function eT(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(JE(t.value));var t})).join(", "),"]")),jE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return JE(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return JE(e)})).join(",")),"Target(".concat(t,")")}($I(e)),"; limitType=").concat(e.limitType,")")}function tT(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zE.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=sn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=sn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=VI(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,YI(e),t))&&!(e.endAt&&!function(e,t,n){var r=VI(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,YI(e),t))}(e,t)}function nT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rT(e){return function(t,n){var r,i=!1,a=sn(YI(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=iT(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function iT(e,t,n){var r=e.field.isKeyField()?zE.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?YE(r,i):eE()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return eE()}}function aT(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qE(t)?"-0":t}}function oT(e){return{integerValue:""+e}}function sT(e,t){return BE(t)?oT(t):aT(e,t)}var uT=on((function e(){rn(this,e),this._=void 0}));function cT(e,t,n){return e instanceof fT?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof dT?pT(e,t):e instanceof vT?yT(e,t):function(e,t){var n=hT(e,t),r=gT(n)+gT(e.k);return eI(n)&&eI(e.k)?oT(r):aT(e.M,r)}(e,t)}function lT(e,t,n){return e instanceof dT?pT(e,t):e instanceof vT?yT(e,t):n}function hT(e,t){return e instanceof mT?eI(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var fT=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n)}(uT),dT=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this)).elements=e,r}return on(n)}(uT);function pT(e,t){var n,r=kT(t),i=sn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return HE(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var vT=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this)).elements=e,r}return on(n)}(uT);function yT(e,t){var n,r=kT(t),i=sn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!HE(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var mT=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this)).M=e,i.k=r,i}return on(n)}(uT);function gT(e){return DE(e.integerValue||e.doubleValue)}function kT(e){return tI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var _T=on((function e(t,n){rn(this,e),this.field=t,this.transform=n}));var wT=on((function e(t,n){rn(this,e),this.version=t,this.transformResults=n})),bT=function(){function e(t,n){rn(this,e),this.updateTime=t,this.exists=n}return on(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function xT(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ET=on((function e(){rn(this,e)}));function IT(e,t,n){e instanceof PT?function(e,t,n){var r=e.value.clone(),i=DT(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof AT?function(e,t,n){if(xT(e.precondition,t)){var r=DT(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(RT(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function TT(e,t,n){e instanceof PT?function(e,t,n){if(xT(e.precondition,t)){var r=e.value.clone(),i=OT(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(NT(t),r).setHasLocalMutations()}}(e,t,n):e instanceof AT?function(e,t,n){if(xT(e.precondition,t)){var r=OT(e.fieldTransforms,n,t),i=t.data;i.setAll(RT(e)),i.setAll(r),t.convertToFoundDocument(NT(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){xT(e.precondition,t)&&t.convertToNoDocument(wE.min())}(e,t)}function ST(e,t){var n,r=null,i=sn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=hT(a.transform,o||null);null!=s&&(null==r&&(r=cI.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function CT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&gE(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dT&&t instanceof dT||e instanceof vT&&t instanceof vT?gE(e.elements,t.elements,HE):e instanceof mT&&t instanceof mT?HE(e.k,t.k):e instanceof fT&&t instanceof fT}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function NT(e){return e.isFoundDocument()?e.version:wE.min()}var PT=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return rn(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return on(n)}(ET),AT=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return rn(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return on(n)}(ET);function RT(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function DT(e,t,n){var r=new Map;tE(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,lT(o,s,n[i]))}return r}function OT(e,t,n){var r,i=new Map,a=sn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,cT(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var LT,MT,FT=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return on(n)}(ET),UT=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return on(n)}(ET),VT=on((function e(t){rn(this,e),this.count=t}));function jT(e){switch(e){default:return eE();case rE.CANCELLED:case rE.UNKNOWN:case rE.DEADLINE_EXCEEDED:case rE.RESOURCE_EXHAUSTED:case rE.INTERNAL:case rE.UNAVAILABLE:case rE.UNAUTHENTICATED:return!1;case rE.INVALID_ARGUMENT:case rE.NOT_FOUND:case rE.ALREADY_EXISTS:case rE.PERMISSION_DENIED:case rE.FAILED_PRECONDITION:case rE.ABORTED:case rE.OUT_OF_RANGE:case rE.UNIMPLEMENTED:case rE.DATA_LOSS:return!0}}function qT(e){if(void 0===e)return Jx("GRPC error has no .code"),rE.UNKNOWN;switch(e){case LT.OK:return rE.OK;case LT.CANCELLED:return rE.CANCELLED;case LT.UNKNOWN:return rE.UNKNOWN;case LT.DEADLINE_EXCEEDED:return rE.DEADLINE_EXCEEDED;case LT.RESOURCE_EXHAUSTED:return rE.RESOURCE_EXHAUSTED;case LT.INTERNAL:return rE.INTERNAL;case LT.UNAVAILABLE:return rE.UNAVAILABLE;case LT.UNAUTHENTICATED:return rE.UNAUTHENTICATED;case LT.INVALID_ARGUMENT:return rE.INVALID_ARGUMENT;case LT.NOT_FOUND:return rE.NOT_FOUND;case LT.ALREADY_EXISTS:return rE.ALREADY_EXISTS;case LT.PERMISSION_DENIED:return rE.PERMISSION_DENIED;case LT.FAILED_PRECONDITION:return rE.FAILED_PRECONDITION;case LT.ABORTED:return rE.ABORTED;case LT.OUT_OF_RANGE:return rE.OUT_OF_RANGE;case LT.UNIMPLEMENTED:return rE.UNIMPLEMENTED;case LT.DATA_LOSS:return rE.DATA_LOSS;default:return eE()}}(MT=LT||(LT={}))[MT.OK=0]="OK",MT[MT.CANCELLED=1]="CANCELLED",MT[MT.UNKNOWN=2]="UNKNOWN",MT[MT.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",MT[MT.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",MT[MT.NOT_FOUND=5]="NOT_FOUND",MT[MT.ALREADY_EXISTS=6]="ALREADY_EXISTS",MT[MT.PERMISSION_DENIED=7]="PERMISSION_DENIED",MT[MT.UNAUTHENTICATED=16]="UNAUTHENTICATED",MT[MT.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",MT[MT.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",MT[MT.ABORTED=10]="ABORTED",MT[MT.OUT_OF_RANGE=11]="OUT_OF_RANGE",MT[MT.UNIMPLEMENTED=12]="UNIMPLEMENTED",MT[MT.INTERNAL=13]="INTERNAL",MT[MT.UNAVAILABLE=14]="UNAVAILABLE",MT[MT.DATA_LOSS=15]="DATA_LOSS";var BT=function(){function e(t,n){rn(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return on(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){xE(this.inner,(function(t,n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return EE(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),zT=function(){function e(t,n){rn(this,e),this.comparator=t,this.root=n||KT.EMPTY}return on(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,KT.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,KT.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new WT(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new WT(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new WT(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new WT(this.root,e,this.comparator,!0)}}]),e}(),WT=function(){function e(t,n,r,i){rn(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return on(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),KT=function(){function e(t,n,r,i,a){rn(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return on(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw eE();if(this.right.isRed())throw eE();var e=this.left.check();if(e!==this.right.check())throw eE();return e+(this.isRed()?0:1)}}]),e}();KT.EMPTY=null,KT.RED=!0,KT.BLACK=!1,KT.EMPTY=new(function(){function e(){rn(this,e),this.size=0}return on(e,[{key:"key",get:function(){throw eE()}},{key:"value",get:function(){throw eE()}},{key:"color",get:function(){throw eE()}},{key:"left",get:function(){throw eE()}},{key:"right",get:function(){throw eE()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new KT(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var GT=function(){function e(t){rn(this,e),this.comparator=t,this.data=new zT(this.comparator)}return on(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new HT(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new HT(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),HT=function(){function e(t){rn(this,e),this.iter=t}return on(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function QT(e){return e.hasNext()?e.getNext():void 0}var YT=new zT(zE.comparator);function $T(){return YT}var JT=new zT(zE.comparator);function XT(){return JT}function ZT(){return new BT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var eS=new zT(zE.comparator),tS=new GT(zE.comparator);function nS(){for(var e=tS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var rS=new GT(mE);function iS(){return rS}var aS=function(){function e(t,n,r,i,a){rn(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return on(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,oS.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(wE.min(),r,iS(),$T(),nS())}}]),e}(),oS=function(){function e(t,n,r,i,a){rn(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return on(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(PE.EMPTY_BYTE_STRING,n,nS(),nS(),nS())}}]),e}(),sS=on((function e(t,n,r,i){rn(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),uS=on((function e(t,n){rn(this,e),this.targetId=t,this.$=n})),cS=on((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:PE.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;rn(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),lS=function(){function e(){rn(this,e),this.B=0,this.L=dS(),this.U=PE.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return on(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=nS(),t=nS(),n=nS();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:eE()}})),new oS(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=dS()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),hS=function(){function e(t){rn(this,e),this.nt=t,this.st=new Map,this.it=$T(),this.rt=fS(),this.ot=new GT(mE)}return on(e,[{key:"ut",value:function(e){var t,n=sn(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=sn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:eE()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(II(i))if(0===n){var a=new zE(i.path);this.ct(t,a,hI.newNoDocument(a,wE.min()))}else tE(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&II(a.target)){var o=new zE(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,hI.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=nS();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new aS(e,n,this.ot,this.it,r);return this.it=$T(),this.rt=fS(),this.ot=new GT(mE),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new lS,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new GT(mE),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||$x("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new lS),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function fS(){return new zT(zE.comparator)}function dS(){return new zT(zE.comparator)}var pS={asc:"ASCENDING",desc:"DESCENDING"},vS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yS=on((function e(t,n){rn(this,e),this.databaseId=t,this.N=n}));function mS(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gS(e,t){return e.N?t.toBase64():t.toUint8Array()}function kS(e,t){return mS(e,t.toTimestamp())}function _S(e){return tE(!!e),wE.fromTimestamp(function(e){var t=RE(e);return new _E(t.seconds,t.nanos)}(e))}function wS(e,t){return function(e){return new TE(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function bS(e){var t=TE.fromString(e);return tE(KS(t)),t}function xS(e,t){return wS(e.databaseId,t.path)}function ES(e,t){var n=bS(t);if(n.get(1)!==e.databaseId.projectId)throw new iE(rE.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new iE(rE.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zE(CS(n))}function IS(e,t){return wS(e.databaseId,t)}function TS(e){var t=bS(e);return 4===t.length?TE.emptyPath():CS(t)}function SS(e){return new TE(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function CS(e){return tE(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function NS(e,t,n){return{name:xS(e,t),fields:n.value.mapValue.fields}}function PS(e,t,n){var r=ES(e,t.name),i=_S(t.updateTime),a=new cI({mapValue:{fields:t.fields}}),o=hI.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function AS(e,t){return"found"in t?function(e,t){tE(!!t.found),t.found.name,t.found.updateTime;var n=ES(e,t.found.name),r=_S(t.found.updateTime),i=new cI({mapValue:{fields:t.found.fields}});return hI.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){tE(!!t.missing),tE(!!t.readTime);var n=ES(e,t.missing),r=_S(t.readTime);return hI.newNoDocument(n,r)}(e,t):eE()}function RS(e,t){var n;if(t instanceof PT)n={update:NS(e,t.key,t.value)};else if(t instanceof FT)n={delete:xS(e,t.key)};else if(t instanceof AT)n={update:NS(e,t.key,t.data),updateMask:WS(t.fieldMask)};else{if(!(t instanceof UT))return eE();n={verify:xS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof fT)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof dT)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vT)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mT)return{fieldPath:t.field.canonicalString(),increment:n.k};throw eE()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:eE()}(e,t.precondition)),n}function DS(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?bT.updateTime(_S(e.updateTime)):void 0!==e.exists?bT.exists(e.exists):bT.none()}(t.currentDocument):bT.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)tE("REQUEST_TIME"===t.setToServerValue),n=new fT;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new dT(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new vT(i)}else"increment"in t?n=new mT(e,t.increment):eE();var a=CE.fromServerFormat(t.fieldPath);return new _T(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ES(e,t.update.name),a=new cI({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new NE(t.map((function(e){return CE.fromServerFormat(e)})))}(t.updateMask);return new AT(i,a,o,n,r)}return new PT(i,a,n,r)}if(t.delete){var s=ES(e,t.delete);return new FT(s,n)}if(t.verify){var u=ES(e,t.verify);return new UT(u,n)}return eE()}function OS(e,t){return{documents:[IS(e,t.path)]}}function LS(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=IS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=IS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(rI(e.value))return{unaryFilter:{field:jS(e.field),op:"IS_NAN"}};if(nI(e.value))return{unaryFilter:{field:jS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rI(e.value))return{unaryFilter:{field:jS(e.field),op:"IS_NOT_NAN"}};if(nI(e.value))return{unaryFilter:{field:jS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jS(e.field),op:VS(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:jS(e.field),direction:US(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||jE(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function MS(e){var t=TS(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){tE(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=FS(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new FI(qS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return jE(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new MI(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new MI(n,t)}(n.endAt)),BI(t,i,s,o,u,"F",c,l)}function FS(e){return e?void 0!==e.unaryFilter?[zS(e)]:void 0!==e.fieldFilter?[BS(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return FS(e)})).reduce((function(e,t){return e.concat(t)})):eE():[]}function US(e){return pS[e]}function VS(e){return vS[e]}function jS(e){return{fieldPath:e.canonicalString()}}function qS(e){return CE.fromServerFormat(e.fieldPath)}function BS(e){return SI.create(qS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return eE()}}(e.fieldFilter.op),e.fieldFilter.value)}function zS(e){switch(e.unaryFilter.op){case"IS_NAN":var t=qS(e.unaryFilter.field);return SI.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=qS(e.unaryFilter.field);return SI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qS(e.unaryFilter.field);return SI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qS(e.unaryFilter.field);return SI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return eE()}}function WS(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function KS(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function GS(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=QS(t)),t=HS(e.get(n),t);return QS(t)}function HS(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function QS(e){return e+"\x01\x01"}function YS(e){var t=e.length;if(tE(t>=2),2===t)return tE("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),TE.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&eE(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:eE()}a=o+2}return new TE(r)}var $S=["userId","batchId"];function JS(e,t){return[e,GS(t)]}function XS(e,t,n){return[e,GS(t),n]}var ZS={},eC=["prefixPath","collectionGroup","readTime","documentId"],tC=["prefixPath","collectionGroup","documentId"],nC=["collectionGroup","readTime","prefixPath","documentId"],rC=["canonicalId","targetId"],iC=["targetId","path"],aC=["path","targetId"],oC=["collectionId","parent"],sC=["indexId","uid"],uC=["uid","sequenceNumber"],cC=["indexId","uid","arrayValue","directionalValue","documentKey"],lC=["indexId","uid","documentKey"],hC=["userId","collectionPath","documentId"],fC=["userId","collectionPath","largestBatchId"],dC=["userId","collectionGroup","largestBatchId"],pC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),vC=[].concat(yr(pC),["documentOverlays"]),yC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mC=[].concat(yC,["indexConfiguration","indexState","indexEntries"]),gC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kC=function(){function e(){rn(this,e),this.onCommittedListeners=[]}return on(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),_C=function(){function e(t){var n=this;rn(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return on(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&eE(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=sn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),wC=function(){function e(t,n){var r=this;rn(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new aE,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new EC(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=NC(e.target.error);r.At.reject(new EC(t,n))}}return on(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||($x("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new TC(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new EC(n,t)}}}]),e}(),bC=function(){function e(t,n,r){rn(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Pn())&&Jx("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return on(e,[{key:"Nt",value:function(){var e=a(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return $x("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new EC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new iE(rE.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new iE(rE.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new EC(t,n))},i.onupgradeneeded=function(e){$x("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){$x("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=a(f().mark((function e(t,n,r,i){var a,o,s,u,c=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(f().mark((function e(){var n,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=wC.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),_C.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,$x("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return $x("SimpleDb","Removing database:",e),SC(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Fn())return!1;if(e.St())return!0;var t=Pn(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/react-twitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyA3SUQj8WTLh7qV-DOVAUOH1sldsHWmZQ4",REACT_APP_FIREBASE_AUTH_DOMAIN:"react-twitter-1ec0b.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://react-twitter-1ec0b-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-CDZSJK6JS3",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"1:72562846999:web:d19142c26bed916f8d1b52",REACT_APP_FIREBASE_PROJECT_ID:"react-twitter-1ec0b",REACT_APP_FIREBASE_SENDER_ID:"72562846999",REACT_APP_FIREBASE_STORAGE_BUCKET:"react-twitter-1ec0b.appspot.com"})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),xC=function(){function e(t){rn(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return on(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return SC(this.Ft.delete())}}]),e}(),EC=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,rE.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return on(n)}(iE);function IC(e){return"IndexedDbTransactionError"===e.name}var TC=function(){function e(t){rn(this,e),this.store=t}return on(e,[{key:"put",value:function(e,t){var n;return void 0!==t?($x("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):($x("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),SC(n)}},{key:"add",value:function(e){return $x("SimpleDb","ADD",this.store.name,e,e),SC(this.store.add(e))}},{key:"get",value:function(e){var t=this;return SC(this.store.get(e)).next((function(n){return void 0===n&&(n=null),$x("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return $x("SimpleDb","DELETE",this.store.name,e),SC(this.store.delete(e))}},{key:"count",value:function(){return $x("SimpleDb","COUNT",this.store.name),SC(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Gt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new _C((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Kt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new _C((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){$x("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Gt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Gt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new _C((function(n,r){t.onerror=function(e){var t=NC(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Gt",value:function(e,t){var n=[];return new _C((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new xC(i),o=t(i.primaryKey,i.value,a);if(o instanceof _C){var s=o.catch((function(e){return a.done(),_C.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return _C.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function SC(e){return new _C((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=NC(e.target.error);n(t)}}))}var CC=!1;function NC(e){var t=bC.Vt(Pn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new iE("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return CC||(CC=!0,setTimeout((function(){throw r}),0)),r}}return e}var PC=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return on(n)}(kC);function AC(e,t){var n=nE(e);return bC.xt(n.Ht,t)}var RC=function(){function e(t,n,r,i){rn(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return on(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&IT(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=sn(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&TT(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=sn(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&TT(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(wE.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),nS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&gE(this.mutations,e.mutations,(function(e,t){return CT(e,t)}))&&gE(this.baseMutations,e.baseMutations,(function(e,t){return CT(e,t)}))}}]),e}(),DC=function(){function e(t,n,r,i){rn(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return on(e,null,[{key:"from",value:function(t,n,r){tE(t.mutations.length===r.length);for(var i=eS,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),OC=function(){function e(t,n){rn(this,e),this.largestBatchId=t,this.mutation=n}return on(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),LC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wE.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:wE.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:PE.EMPTY_BYTE_STRING;rn(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return on(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),MC=on((function e(t){rn(this,e),this.Jt=t}));function FC(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:UC(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:xS(e,t.key),fields:t.data.value.mapValue.fields,updateTime:mS(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:VC(t.version)};else{if(!t.isUnknownDocument())return eE();r.unknownDocument={path:n.path.toArray(),version:VC(t.version)}}return r}function UC(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function VC(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function jC(e){var t=new _E(e.seconds,e.nanoseconds);return wE.fromTimestamp(t)}function qC(e,t){for(var n=(t.baseMutations||[]).map((function(t){return DS(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return DS(e.Jt,t)})),s=_E.fromMillis(t.localWriteTimeMs);return new RC(t.batchId,s,n,o)}function BC(e){var t,n,r=jC(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?jC(e.lastLimboFreeSnapshotVersion):wE.min();return void 0!==e.query.documents?(tE(1===(n=e.query).documents.length),t=$I(zI(TS(n.documents[0])))):t=function(e){return $I(MS(e))}(e.query),new LC(t,e.targetId,0,e.lastListenSequenceNumber,r,i,PE.fromBase64String(e.resumeToken))}function zC(e,t){var n,r=VC(t.snapshotVersion),i=VC(t.lastLimboFreeSnapshotVersion);n=II(t.target)?OS(e.Jt,t.target):LS(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:xI(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function WC(e){var t=MS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?JI(t,t.limit,"L"):t}function KC(e,t){return new OC(t.largestBatchId,DS(e.Jt,t.overlayMutation))}function GC(e,t){var n=t.path.lastSegment();return[e,GS(t.path.popLast()),n]}var HC=function(){function e(){rn(this,e)}return on(e,[{key:"getBundleMetadata",value:function(e,t){return QC(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:jC(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return QC(e).put({bundleId:(n=t).id,createTime:VC(_S(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return YC(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:WC(t.bundledQuery),readTime:jC(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return YC(e).put(function(e){return{name:e.name,readTime:VC(_S(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function QC(e){return AC(e,"bundles")}function YC(e){return AC(e,"namedQueries")}var $C=function(){function e(t,n){rn(this,e),this.M=t,this.userId=n}return on(e,[{key:"getOverlay",value:function(e,t){var n=this;return JC(e).get(GC(this.userId,t)).next((function(e){return e?KC(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new OC(t,a);i.push(r.Xt(e,o))})),_C.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(GS(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(JC(e).Qt("collectionPathOverlayIndex",i))})),_C.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=ZT(),a=GS(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return JC(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=KC(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=ZT(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return JC(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=KC(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return JC(e).put(function(e,t,n){var r=l(GC(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:RS(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function JC(e){return AC(e,"documentOverlays")}var XC=function(){function e(){rn(this,e)}return on(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(DE(e.integerValue));else if("doubleValue"in e){var n=DE(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),qE(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(OE(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?oI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):eE()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),zE.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function ZC(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function eN(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ZC(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}XC.fe=new XC;var tN=function(){function e(){rn(this,e),this.buffer=new Uint8Array(1024),this.position=0}return on(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=eN(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=eN(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),nN=function(){function e(t){rn(this,e),this.De=t}return on(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),rN=function(){function e(t){rn(this,e),this.De=t}return on(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),iN=function(){function e(){rn(this,e),this.De=new tN,this.Ce=new nN(this.De),this.xe=new rN(this.De)}return on(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),aN=function(){function e(t,n,r,i){rn(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return on(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function oN(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=sN(e.arrayValue,t.arrayValue))?n:0!==(n=sN(e.directionalValue,t.directionalValue))?n:zE.comparator(e.documentKey,t.documentKey)}function sN(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var uN=function(){function e(t){rn(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=sn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return on(e,[{key:"$e",value:function(e){var t=dI(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=pI(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=sn(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),cN=function(){function e(){rn(this,e),this.qe=new lN}return on(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),_C.resolve()}},{key:"getCollectionParents",value:function(e,t){return _C.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return _C.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return _C.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return _C.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return _C.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return _C.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return _C.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return _C.resolve()}},{key:"updateIndexEntries",value:function(e,t){return _C.resolve()}}]),e}(),lN=function(){function e(){rn(this,e),this.index={}}return on(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new GT(TE.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new GT(TE.comparator)).toArray()}}]),e}(),hN=new Uint8Array(0),fN=function(){function e(t){rn(this,e),this.user=t,this.Ge=new lN,this.Ke=new BT((function(e){return xI(e)}),(function(e,t){return EI(e,t)})),this.uid=t.uid||""}return on(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ge.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ge.add(t)}));var a={collectionId:r,parent:GS(i)};return dN(e).put(a)}return _C.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[kE(t),""],!1,!0);return dN(e).qt(r).next((function(e){var r,i=sn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(YS(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=vN(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=vN(e),r=yN(e),i=pN(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=pN(e),i=!0,a=new Map;return _C.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=nS();return _C.forEach(a,(function(i,a){var o;$x("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(xI(t)));var s=function(e,t){var n=dI(t);if(void 0===n)return null;var r,i=sn(TI(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),u=function(e,t){var n,r=new Map,i=sn(pI(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=sn(TI(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=sn(pI(t));try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=void 0,l=!0,h=sn(TI(e,u.fieldPath));try{for(h.s();!(s=h.n()).done;){var f=s.value,d=void 0,p=!0;switch(f.op){case"<":case"<=":d="nullValue"in(r=f.value)?KE:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?ZE(VE.empty(),zE.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:eE();break;case"==":case"in":case">=":d=f.value;break;case">":d=f.value,p=!1;break;case"!=":case"not-in":d=KE}sI(c,d)===d&&(c=d,l=p)}}catch(m){h.e(m)}finally{h.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(u.fieldPath)){var y=e.startAt.position[v];sI(c,y)===y&&(c=y,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new MI(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=sn(pI(t));try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=void 0,l=!0,h=sn(TI(e,u.fieldPath));try{for(h.s();!(s=h.n()).done;){var f=s.value,d=void 0,p=!0;switch(f.op){case">=":case">":d="nullValue"in(r=f.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?ZE(VE.empty(),zE.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?WE:eE(),p=!1;break;case"==":case"in":case"<=":d=f.value;break;case"<":d=f.value,p=!1;break;case"!=":case"not-in":d=WE}uI(c,d)===d&&(c=d,l=p)}}catch(m){h.e(m)}finally{h.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(u.fieldPath)){var y=e.endAt.position[v];uI(c,y)===y&&(c=y,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new MI(i,a)}(a,i),h=n.je(i,a,c),f=n.je(i,a,l),d=n.We(i,a,u),p=n.ze(i.indexId,s,h,!!c&&c.inclusive,f,!!l&&l.inclusive,d);return _C.forEach(p,(function(n){return r.Kt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new zE(YS(t.documentKey)))}))}))}))})).next((function(){return e}))}return _C.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=u/(null!=t?t.length:1),l=[],h=function(u){var h=t?s.He(t[u/c]):hN,f=n?s.Je(e,h,n[u%c],r):s.Ye(e),d=i?s.Xe(e,h,i[u%c],a):s.Ye(e+1);l.push.apply(l,yr(s.createRange(f,d,o.map((function(t){return s.Je(e,h,t,!0)})))))},f=0;f<u;++f)h(f);return l}},{key:"Je",value:function(e,t,n,r){var i=new aN(e,zE.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new aN(e,zE.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new aN(e,zE.empty(),hN,hN)}},{key:"getFieldIndex",value:function(e,t){var n=new uN(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new iN,i=sn(pI(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);XC.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new iN;return XC.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new iN);var i,a=0,o=sn(pI(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=sn(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.tn(t,u.fieldPath)&&tI(c))r=this.en(r,u,c);else{var f=h.Ne(u.kind);XC.fe.Zt(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=yr(e),a=[],o=sn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=sn(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new iN;h.seed(l.Se()),XC.fe.Zt(u,h.Ne(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof SI&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=vN(e),i=yN(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return _C.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new yI(t.sequenceNumber,new kI(jC(t.readTime),new zE(YS(t.documentKey)),t.largestBatchId)):yI.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new vI(CE.fromServerFormat(n),r)}));return new fI(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:mE(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=vN(e),a=yN(e);return this.sn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return _C.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:VC(r.readTime),documentKey:GS(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return _C.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?_C.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),_C.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?_C.resolve():n.un(e,i,t,a)}))}))}))}))}},{key:"an",value:function(e,t,n){return pN(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:GS(t.key.path)})}},{key:"cn",value:function(e,t,n){return pN(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,GS(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=pN(e),i=new GT(oN);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,GS(t.path)])},(function(e,r){i=i.add(new aN(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new GT(oN),r=this.Ze(t,e);if(null==r)return n;var i=dI(t);if(null!=i){var a=e.data.field(i.fieldPath);if(tI(a)){var o,s=sn(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new aN(t.indexId,e.key,this.He(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new aN(t.indexId,e.key,hN,r));return n}},{key:"un",value:function(e,t,n,r){var i=this;$x("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=QT(a),u=QT(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=QT(o)):l?(i(s),s=QT(a)):(s=QT(a),u=QT(o))}}(n,r,oN,(function(n){a.push(i.an(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),_C.waitFor(a)}},{key:"sn",value:function(e){var t=1;return yN(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return oN(e,t)})).filter((function(e,t,n){return!t||0!==oN(e,n[t-1])}));var r=[];r.push(e);var i,a=sn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=oN(o,e),u=oN(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function dN(e){return AC(e,"collectionParents")}function pN(e){return AC(e,"indexEntries")}function vN(e){return AC(e,"indexConfiguration")}function yN(e){return AC(e,"indexState")}var mN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gN=function(){function e(t,n,r){rn(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return on(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function kN(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){tE(1===s)})));var c,l=[],h=sn(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=XS(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return _C.waitFor(a).next((function(){return l}))}function _N(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw eE();t=e.noDocument}return JSON.stringify(t).length}gN.DEFAULT_COLLECTION_PERCENTILE=10,gN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gN.DEFAULT=new gN(41943040,gN.DEFAULT_COLLECTION_PERCENTILE,gN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gN.DISABLED=new gN(-1,0,0);var wN=function(){function e(t,n,r,i){rn(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return on(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xN(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=EN(e),o=xN(e);return o.add({}).next((function(s){tE("number"==typeof s);var u,c=new RC(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return RS(e.Jt,t)})),i=n.mutations.map((function(t){return RS(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],f=new GT((function(e,t){return mE(e.canonicalString(),t.canonicalString())})),d=sn(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=XS(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,ZS))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[s]=c.keys()})),_C.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return xN(e).get(t).next((function(e){return e?(tE(e.userId===n.userId),qC(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?_C.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return xN(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(tE(t.batchId>=r),a=qC(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return xN(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xN(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return qC(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=JS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return EN(e).Wt({range:i},(function(r,i,o){var s=l(r,3),u=s[0],c=s[1],h=s[2],f=YS(c);if(u===n.userId&&t.path.isEqual(f))return xN(e).get(h).next((function(e){if(!e)throw eE();tE(e.userId===n.userId),a.push(qC(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new GT(mE),i=[];return t.forEach((function(t){var a=JS(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=EN(e).Wt({range:o},(function(e,i,a){var o=l(e,3),s=o[0],u=o[1],c=o[2],h=YS(u);s===n.userId&&t.path.isEqual(h)?r=r.add(c):a.done()}));i.push(s)})),_C.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=JS(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new GT(mE);return EN(e).Wt({range:o},(function(e,t,a){var o=l(e,3),u=o[0],c=o[1],h=o[2],f=YS(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(h)):a.done()})).next((function(){return n.fn(e,s)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(xN(e).get(t).next((function(e){if(null===e)throw eE();tE(e.userId===n.userId),r.push(qC(n.M,e))})))})),_C.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return kN(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),_C.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return _C.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return EN(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=YS(e[1]);i.push(a)}else r.done()})).next((function(){tE(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return bN(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return IN(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return tE(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function bN(e,t,n){var r=JS(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return EN(e).Wt({range:a,jt:!0},(function(e,n,r){var a=l(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function xN(e){return AC(e,"mutations")}function EN(e){return AC(e,"documentMutations")}function IN(e){return AC(e,"mutationQueues")}var TN=function(){function e(t){rn(this,e),this.wn=t}return on(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),SN=function(){function e(t,n){rn(this,e),this.referenceDelegate=t,this.M=n}return on(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new TN(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return wE.fromTimestamp(new _E(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return CN(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return tE(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return CN(e).Wt((function(o,s){var u=BC(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return _C.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return CN(e).Wt((function(e,n){var r=BC(n);t(r)}))}},{key:"yn",value:function(e){return NN(e).get("targetGlobalKey").next((function(e){return tE(null!==e),e}))}},{key:"pn",value:function(e,t){return NN(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return CN(e).put(zC(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=xI(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return CN(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=BC(n);EI(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=PN(e);return t.forEach((function(t){var o=GS(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),_C.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=PN(e);return _C.forEach(t,(function(t){var a=GS(t.path);return _C.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=PN(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=PN(e),i=nS();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=YS(e[1]),a=new zE(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=GS(t.path),r=IDBKeyRange.bound([n],[kE(n)],!1,!0),i=0;return PN(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return CN(e).get(t).next((function(e){return e?BC(e):null}))}}]),e}();function CN(e){return AC(e,"targets")}function NN(e){return AC(e,"targetGlobal")}function PN(e){return AC(e,"targetDocuments")}function AN(e){return RN.apply(this,arguments)}function RN(){return RN=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===rE.FAILED_PRECONDITION&&t.message===gC){e.next=2;break}throw t;case 2:$x("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),RN.apply(this,arguments)}function DN(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],s=a[1],u=mE(r,o);return 0===u?mE(i,s):u}var ON=function(){function e(t){rn(this,e),this.En=t,this.buffer=new GT(DN),this.An=0}return on(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();DN(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),LN=function(){function e(t,n){rn(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return on(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;$x("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,a(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!IC(n.t0)){n.next=12;break}$x("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,AN(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),MN=function(){function e(t,n){rn(this,e),this.Sn=t,this.params=n}return on(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return _C.resolve(pE.A);var r=new ON(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?($x("LruGarbageCollector","Garbage collection skipped; disabled"),_C.resolve(mN)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?($x("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),mN):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?($x("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Yx()<=wr.DEBUG&&$x("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),_C.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),FN=function(){function e(t,n){rn(this,e),this.db=t,this.garbageCollector=function(e,t){return new MN(e,t)}(this,n)}return on(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return UN(e,n)}},{key:"removeReference",value:function(e,t,n){return UN(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return UN(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return IN(e).zt((function(r){return bN(e,r,t).next((function(e){return e&&(n=!0),_C.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,s){if(s<=t){var u=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,wE.min()),PN(e).delete([0,GS(o.path)])}))}));i.push(u)}})).next((function(){return _C.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return UN(e,t)}},{key:"kn",value:function(e,t){var n,r=PN(e),i=pE.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==pE.A&&t(new zE(YS(n)),i),i=u,n=s):i=pE.A})).next((function(){i!==pE.A&&t(new zE(YS(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function UN(e,t){return PN(e).put(function(e,t){return{targetId:0,path:GS(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var VN=function(){function e(){rn(this,e),this.changes=new BT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return on(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,hI.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?_C.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),jN=function(){function e(t){rn(this,e),this.M=t}return on(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return zN(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return zN(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],UC(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=hI.newInvalidDocument(t);return zN(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(WN(t))},(function(e,i){r=n.Fn(t,i)})).next((function(){return r}))}},{key:"$n",value:function(e,t){var n=this,r={size:0,document:hI.newInvalidDocument(t)};return zN(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(WN(t))},(function(e,i){r={document:n.Fn(t,i),size:_N(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=$T();return this.Bn(e,t,(function(e,t){var i=n.Fn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=$T(),i=new zT(zE.comparator);return this.Bn(e,t,(function(e,t){var a=n.Fn(e,t);r=r.insert(e,a),i=i.insert(e,_N(t))})).next((function(){return{documents:r,Un:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return _C.resolve();var r=new GT(GN);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(WN(r.first()),WN(r.last())),a=r.getIterator(),o=a.getNext();return zN(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=zE.fromSegments([].concat(yr(t.prefixPath),[t.collectionGroup,t.documentId]));o&&GN(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(WN(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),UC(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zN(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=$T(),i=sn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Fn(zE.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=$T(),o=KN(t,n),s=KN(t,kI.max());return zN(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.Fn(zE.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new qN(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return BN(e).get("remoteDocumentGlobalKey").next((function(e){return tE(!!e),e}))}},{key:"On",value:function(e,t){return BN(e).put("remoteDocumentGlobalKey",t)}},{key:"Fn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=PS(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=zE.fromSegments(t.noDocument.path),i=jC(t.noDocument.readTime);n=hI.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return eE();var a=zE.fromSegments(t.unknownDocument.path),o=jC(t.unknownDocument.version);n=hI.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new _E(e[0],e[1]);return wE.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(wE.min()))return n}return hI.newInvalidDocument(e)}}]),e}(),qN=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this)).qn=e,i.trackRemovals=r,i.Gn=new BT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return on(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new GT((function(e,t){return mE(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Gn.get(a);if(n.push(t.qn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=FC(t.qn.M,o);i=i.add(a.path.popLast());var c=_N(u);r+=c-s.size,n.push(t.qn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=FC(t.qn.M,o.convertToNoDocument(wE.min()));n.push(t.qn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.qn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.qn.updateMetadata(e,r)),_C.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.qn.$n(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.qn.Ln(e,t).next((function(e){var t=e.documents;return e.Un.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(VN);function BN(e){return AC(e,"remoteDocumentGlobal")}function zN(e){return AC(e,"remoteDocumentsV14")}function WN(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function KN(e,t){var n=t.documentKey.path.toArray();return[e,UC(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function GN(e,t){var n=e.path.length-t.path.length;return 0!==n?n:zE.comparator(e,t)}var HN=function(){function e(t){rn(this,e),this.M=t}return on(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new wC("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$S,{unique:!0}),e.createObjectStore("documentMutations")}(e),QN(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=_C.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),QN(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wE.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$S,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return _C.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Kn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:hC});t.createIndex("collectionPathOverlayIndex",fC,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",dC,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:eC});t.createIndex("documentKeyIndex",tC),t.createIndex("collectionGroupIndex",nC)}(e)})).next((function(){return i.Hn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:sC}).createIndex("sequenceNumberIndex",uC,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:cC}).createIndex("documentKeyIndex",lC,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=_N(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Kn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return _C.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return _C.forEach(r,(function(r){tE(r.userId===n.userId);var i=qC(t.M,r);return kN(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new TE(n),o=function(e){return[0,GS(e)]}(a);r.push(t.get(o).next((function(n){return n?_C.resolve():function(n){return t.put({targetId:0,path:GS(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return _C.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:oC});var n=t.store("collectionParents"),r=new lN,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:GS(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new TE(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],YS(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=BC(r),a=zC(t.M,i);return n.put(a)}))}},{key:"Hn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new zE(TE.fromString(i.document.name).popFirst(5)):i.noDocument?zE.fromSegments(i.noDocument.path):i.unknownDocument?zE.fromSegments(i.unknownDocument.path):eE()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return _C.waitFor(r)}))}}]),e}();function QN(e){e.createObjectStore("targetDocuments",{keyPath:iC}).createIndex("documentTargetsIndex",aC,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rC,{unique:!0}),e.createObjectStore("targetGlobal")}var YN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$N=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(rn(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Jn=a,this.window=o,this.document=s,this.Yn=c,this.Xn=l,this.Zn=h,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(e){return Promise.resolve()},!e.vt())throw new iE(rE.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FN(this,i),this.cs=n+"main",this.M=new MC(u),this.hs=new bC(this.cs,this.Zn,new HN(this.M)),this.ls=new SN(this.referenceDelegate,this.M),this.fs=function(e){return new jN(e)}(this.M),this.ds=new HC,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===l&&Jx("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return on(e,[{key:"start",value:function(){var e=this;return this.ws().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new iE(rE.FAILED_PRECONDITION,YN);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ls.getHighestSequenceNumber(t)}))})).then((function(t){e.ts=new pE(t,e.Yn)})).then((function(){e.es=!0})).catch((function(t){return e.hs&&e.hs.close(),Promise.reject(t)}))}},{key:"Is",value:function(e){var t=this;return this.us=function(){var n=a(f().mark((function n(r){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var t=a(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ws();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return XN(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ts(t).next((function(t){t||(e.isPrimary=!1,e.Jn.enqueueRetryable((function(){return e.us(!1)})))}))})).next((function(){return e.Es(t)})).next((function(n){return e.isPrimary&&!n?e.As(t).next((function(){return!1})):!!n&&e.Rs(t).next((function(){return!0}))}))})).catch((function(t){if(IC(t))return $x("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return $x("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Jn.enqueueRetryable((function(){return e.us(t)})),e.isPrimary=t}))}},{key:"Ts",value:function(e){var t=this;return JN(e).get("owner").next((function(e){return _C.resolve(t.bs(e))}))}},{key:"Ps",value:function(e){return XN(e).delete(this.clientId)}},{key:"Vs",value:function(){var e=a(f().mark((function e(){var t,n,r,i,a=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){e.next=6;break}return this.os=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=AC(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ss(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return _C.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._s){n=sn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._s.removeItem(this.Ds(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ws().then((function(){return e.Vs()})).then((function(){return e.ps()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var t=this;return this.Xn?_C.resolve(!0):JN(e).get("owner").next((function(n){if(null!==n&&t.vs(n.leaseTimestampMs,5e3)&&!t.Cs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new iE(rE.FAILED_PRECONDITION,YN);return!1}}return!(!t.networkEnabled||!t.inForeground)||XN(e).qt().next((function(e){return void 0===t.Ss(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&$x("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=a(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),e.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new PC(e,pE.A);return t.As(n).next((function(){return t.Ps(n)}))}));case 7:this.hs.close(),this.Ms();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ss",value:function(e,t){var n=this;return e.filter((function(e){return n.vs(e.updateTimeMs,t)&&!n.Cs(e.clientId)}))}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return XN(t).qt().next((function(t){return e.Ss(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,t){return wN.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new fN(e)}},{key:"getDocumentOverlayCache",value:function(e){return $C.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;$x("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.Zn)?mC:13===i?yC:12===i?vC:11===i?pC:void eE();return this.hs.runTransaction(e,o,s,(function(i){return a=new PC(i,r.ts?r.ts.next():pE.A),"readwrite-primary"===t?r.Ts(a).next((function(e){return!!e||r.Es(a)})).next((function(t){if(!t)throw Jx("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Jn.enqueueRetryable((function(){return r.us(!1)})),new iE(rE.FAILED_PRECONDITION,gC);return n(a)})).next((function(e){return r.Rs(a).next((function(){return e}))})):r.Fs(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e){var t=this;return JN(e).get("owner").next((function(e){if(null!==e&&t.vs(e.leaseTimestampMs,5e3)&&!t.Cs(e.ownerId)&&!t.bs(e)&&!(t.Xn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new iE(rE.FAILED_PRECONDITION,YN)}))}},{key:"Rs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return JN(e).put("owner",t)}},{key:"As",value:function(e){var t=this,n=JN(e);return n.get("owner").next((function(e){return t.bs(e)?($x("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_C.resolve()}))}},{key:"vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Jx("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()}))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=function(){t.xs(),!Rn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Jn.enterRestrictedMode(!0),t.Jn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var t;try{var n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return $x("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Jx("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(Gk){Jx("Failed to set zombie client id.",Gk)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(Gk){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return bC.vt()}}]),e}();function JN(e){return AC(e,"owner")}function XN(e){return AC(e,"clientMetadata")}function ZN(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var eP=function(){function e(t,n,r){rn(this,e),this.fs=t,this.$s=n,this.indexManager=r}return on(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=sn(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=sn(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return zE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):QI(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new zE(t)).next((function(e){var t=XT();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=XT();return this.indexManager.getCollectionParents(e,i).next((function(o){return _C.forEach(o,(function(o){var s=function(e,t){return new qI(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=sn(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=hI.newInvalidDocument(u),r=r.insert(u,c)),TT(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){tT(t,n)||(r=r.remove(e))})),r}))}}]),e}(),tP=function(){function e(t,n,r,i){rn(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return on(e,null,[{key:"Js",value:function(t,n){var r,i=nS(),a=nS(),o=sn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),nP=function(){function e(){rn(this,e)}return on(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(wE.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(WI(t)||KI(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(Yx()<=wr.DEBUG&&$x("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),eT(t)),i.Xs.Ks(e,t,mI(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new GT(rT(e));return t.forEach((function(t,r){tT(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return Yx()<=wr.DEBUG&&$x("QueryEngine","Using full collection scan to execute query:",eT(t)),this.Xs.Ks(e,t,kI.min())}}]),e}(),rP=function(){function e(t,n,r,i){rn(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new zT(mE),this.ii=new BT((function(e){return xI(e)}),EI),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return on(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new eP(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function iP(e,t,n,r){return new rP(e,t,n,r)}function aP(e,t){return oP.apply(this,arguments)}function oP(){return oP=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nE(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=nS(),u=sn(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=sn(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=sn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=sn(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ai.qs(e,s).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),oP.apply(this,arguments)}function sP(e,t){var n=nE(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=_C.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);tE(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function uP(e){var t=nE(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function cP(e,t){var n=nE(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(PE.EMPTY_BYTE_STRING,wE.min()).withLastLimboFreeSnapshotVersion(wE.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.ls.updateTargetData(e,c))}}));var s=$T();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(lP(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(wE.min())){var u=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return _C.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.si=i,e}))}function lP(e,t,n){var r=nS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=$T();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(wE.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):$x("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function hP(e,t){var n=nE(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function fP(e,t){var n=nE(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,_C.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new LC(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function dP(e,t,n){return pP.apply(this,arguments)}function pP(){return pP=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=nE(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),IC(e.t1)){e.next=12;break}throw e.t1;case 12:$x("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),pP.apply(this,arguments)}function vP(e,t,n){var r=nE(e),i=wE.min(),a=nS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=nE(e),i=r.ii.get(n);return void 0!==i?_C.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,$I(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:wE.min(),n?a:nS())})).next((function(e){return gP(r,nT(t),e),{documents:e,hi:a}}))}))}function yP(e,t){var n=nE(e),r=nE(n.ls),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function mP(e,t){var n=nE(e),r=n.ri.get(t)||wE.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.oi.getAllFromCollectionGroup(e,t,mI(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return gP(n,t,e),e}))}function gP(e,t,n){var r=wE.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}function kP(e,t,n,r){return _P.apply(this,arguments)}function _P(){return _P=a(f().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,d,p,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=nE(t),o=nS(),s=$T(),u=sn(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.li(l.metadata.name),l.document&&(o=o.add(h)),(d=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),s=s.insert(h,d)}catch(f){u.e(f)}finally{u.f()}return p=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,fP(a,function(e){return $I(zI(TE.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return lP(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return a.ls.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.ls.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.ai.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),_P.apply(this,arguments)}function wP(e,t){return bP.apply(this,arguments)}function bP(){return bP=a(f().mark((function e(t,n){var r,i,a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:nS(),e.next=3,fP(t,$I(WC(n.bundledQuery)));case 3:return i=e.sent,a=nE(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=_S(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.ds.saveNamedQuery(e,n);var o=i.withResumeToken(PE.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.ls.updateTargetData(e,o).next((function(){return a.ls.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ls.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),bP.apply(this,arguments)}var xP=function(){function e(t){rn(this,e),this.M=t,this._i=new Map,this.wi=new Map}return on(e,[{key:"getBundleMetadata",value:function(e,t){return _C.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:_S(n.createTime)}),_C.resolve()}},{key:"getNamedQuery",value:function(e,t){return _C.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:WC(e.bundledQuery),readTime:_S(e.readTime)}}(t)),_C.resolve()}}]),e}(),EP=function(){function e(){rn(this,e),this.overlays=new zT(zE.comparator),this.mi=new Map}return on(e,[{key:"getOverlay",value:function(e,t){return _C.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),_C.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),_C.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ZT(),i=t.length+1,a=new zE(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return _C.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new zT((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=ZT(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=ZT(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return _C.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new OC(t,n));var a=this.mi.get(t);void 0===a&&(a=nS(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),IP=function(){function e(){rn(this,e),this.gi=new GT(TP.yi),this.pi=new GT(TP.Ii)}return on(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new TP(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new TP(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new zE(new TE([])),r=new TP(n,e),i=new TP(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new zE(new TE([])),n=new TP(t,e),r=new TP(t,e+1),i=nS();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new TP(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),TP=function(){function e(t,n){rn(this,e),this.key=t,this.Vi=n}return on(e,null,[{key:"yi",value:function(e,t){return zE.comparator(e.key,t.key)||mE(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return mE(e.Vi,t.Vi)||zE.comparator(e.key,t.key)}}]),e}(),SP=function(){function e(t,n){rn(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new GT(TP.yi)}return on(e,[{key:"checkEmpty",value:function(e){return _C.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new RC(i,t,n,r);this.$s.push(a);var o,s=sn(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Si=this.Si.add(new TP(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return _C.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return _C.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return _C.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return _C.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return _C.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new TP(t,0),i=new TP(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),_C.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new GT(mE);return t.forEach((function(e){var t=new TP(e,0),i=new TP(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),_C.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;zE.isDocumentKey(i)||(i=i.child(""));var a=new TP(new zE(i),0),o=new GT(mE);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),_C.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;tE(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return _C.forEach(t.mutations,(function(i){var a=new TP(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new TP(t,0),r=this.Si.firstAfterOrEqual(n);return _C.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,_C.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),CP=function(){function e(t){rn(this,e),this.ki=t,this.docs=new zT(zE.comparator),this.size=0}return on(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return _C.resolve(n?n.document.mutableCopy():hI.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=$T();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():hI.newInvalidDocument(e))})),_C.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=$T(),i=new zE(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||_I(gI(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return _C.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){eE()}},{key:"Mi",value:function(e,t){return _C.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new NP(this)}},{key:"getSize",value:function(e){return _C.resolve(this.size)}}]),e}(),NP=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this)).qn=e,r}return on(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),_C.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(VN),PP=function(){function e(t){rn(this,e),this.persistence=t,this.Oi=new BT((function(e){return xI(e)}),EI),this.lastRemoteSnapshotVersion=wE.min(),this.highestTargetId=0,this.Fi=0,this.$i=new IP,this.targetCount=0,this.Bi=TN.mn()}return on(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),_C.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return _C.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return _C.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),_C.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),_C.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new TN(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,_C.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),_C.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,_C.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),_C.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return _C.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return _C.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),_C.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),_C.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),_C.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return _C.resolve(n)}},{key:"containsKey",value:function(e,t){return _C.resolve(this.$i.containsKey(t))}}]),e}(),AP=function(){function e(t,n){var r=this;rn(this,e),this.Li={},this.overlays={},this.ts=new pE(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new PP(this),this.indexManager=new cN,this.fs=new CP((function(e){return r.referenceDelegate.Ui(e)})),this.M=new MC(n),this.ds=new xP(this.M)}return on(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new EP,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new SP(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;$x("MemoryPersistence","Starting transaction:",e);var i=new RP(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return _C.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),RP=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return on(n)}(kC),DP=function(){function e(t){rn(this,e),this.persistence=t,this.Qi=new IP,this.ji=null}return on(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw eE()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),_C.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),_C.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),_C.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _C.forEach(this.zi,(function(r){var i=zE.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,wE.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return _C.or([function(){return _C.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function OP(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function LP(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function MP(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var FP=function(){function e(t,n,r,i){rn(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return on(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new iE(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Jx("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),UP=function(){function e(t,n,r){rn(this,e),this.targetId=t,this.state=n,this.error=r}return on(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new iE(i.error.code,i.error.message))),a?new e(t,i.state,r):(Jx("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),VP=function(){function e(t,n){rn(this,e),this.clientId=t,this.activeTargetIds=n}return on(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=iS(),o=0;i&&o<r.activeTargetIds.length;++o)i=BE(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Jx("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),jP=function(){function e(t,n){rn(this,e),this.clientId=t,this.onlineState=n}return on(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Jx("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),qP=function(){function e(){rn(this,e),this.activeTargetIds=iS()}return on(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),BP=function(){function e(t,n,r,i,a){rn(this,e),this.window=t,this.Jn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new zT(mE),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=OP(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new qP),this.ar=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return on(e,[{key:"start",value:function(){var e=a(f().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,d=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Os();case 2:t=e.sent,n=sn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(OP(this.persistenceKey,i)))&&(o=VP.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(s=this.storage.getItem(this.lr))&&(u=this.wr(s))&&this.mr(u),c=sn(this.ir);try{for(c.s();!(l=c.n()).done;)h=l.value,this.nr(h)}catch(f){c.e(f)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(MP(this.persistenceKey,e));if(n){var r=UP.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(MP(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return $x("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){$x("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){$x("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if($x("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Jx("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable(a(f().mark((function e(){var r,i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ar.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}u=function(e){var t=pE.A;if(null!=e)try{var n=JSON.parse(e);tE("number"==typeof n),t=n}catch(e){Jx("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==pE.A&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new FP(this.currentUser,e,t,n),i=LP(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=LP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=MP(this.persistenceKey,e),i=new UP(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.ar.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return VP.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return FP.Ji(new Gx(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return UP.Ji(r,t)}},{key:"wr",value:function(e){return jP.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:$x("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Or(o,s).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=iS();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),zP=function(){function e(){rn(this,e),this.Fr=new qP,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return on(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new qP,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),WP=function(){function e(){rn(this,e)}return on(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),KP=function(){function e(){var t=this;rn(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return on(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){$x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=sn(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){$x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=sn(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),GP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},HP=function(){function e(t){rn(this,e),this.jr=t.jr,this.Wr=t.Wr}return on(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),QP=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return on(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Wx;o.listenOnce(Vx.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ux.NO_ERROR:var t=o.getResponseJson();$x("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ux.TIMEOUT:$x("Connection",'RPC "'+e+'" timed out'),a(new iE(rE.DEADLINE_EXCEEDED,"Request time out"));break;case Ux.HTTP_ERROR:var n=o.getStatus();if($x("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(rE).indexOf(t)>=0?t:rE.UNKNOWN}(r.status);a(new iE(s,r.message))}else a(new iE(rE.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new iE(rE.UNAVAILABLE,"Connection failed."));break;default:eE()}}finally{$x("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Mx(),a=Fx(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Bx({})),this.uo(o.initMessageHeaders,t,n),An()||On()||Pn().indexOf("Electron/")>=0||Ln()||Pn().indexOf("MSAppHost/")>=0||Dn()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");$x("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new HP({jr:function(e){l?$x("Connection","Not sending because WebChannel is closed:",e):(c||($x("Connection","Opening WebChannel transport."),u.open(),c=!0),$x("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,zx.EventType.OPEN,(function(){l||$x("Connection","WebChannel transport opened.")})),f(u,zx.EventType.CLOSE,(function(){l||(l=!0,$x("Connection","WebChannel transport closed"),h.eo())})),f(u,zx.EventType.ERROR,(function(e){l||(l=!0,Xx("Connection","WebChannel transport errored:",e),h.eo(new iE(rE.UNAVAILABLE,"The operation could not be completed")))})),f(u,zx.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];tE(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){$x("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=LT[e];if(void 0!==t)return qT(t)}(a),s=i.message;void 0===o&&(o=rE.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.eo(new iE(o,s)),u.close()}else $x("Connection","WebChannel received:",n),h.no(n)}})),f(a,jx.STAT_EVENT,(function(e){e.stat===qx.PROXY?$x("Connection","Detected buffering proxy"):e.stat===qx.NOPROXY&&$x("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){rn(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return on(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);$x("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return $x("RestConnection","Received: ",e),e}),(function(t){throw Xx("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hx,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=GP[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function YP(){return"undefined"!=typeof window?window:null}function $P(){return"undefined"!=typeof document?document:null}function JP(e){return new yS(e,!0)}var XP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;rn(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return on(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&$x("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),ZP=function(){function e(t,n,r,i,a,o,s,u){rn(this,e),this.Jn=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new XP(t,n)}return on(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===rE.RESOURCE_EXHAUSTED?(Jx(n.toString()),Jx("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===rE.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new iE(rE.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return $x("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():($x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),eA=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a,o,s){var u;return rn(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return on(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:eE()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(tE(void 0===t||"string"==typeof t),PE.fromBase64String(t||"")):(tE(void 0===t||t instanceof Uint8Array),PE.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?rE.UNKNOWN:qT(e.code);return new iE(t,e.message||"")}(o);n=new cS(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=ES(e,u.document.name),l=_S(u.document.updateTime),h=new cI({mapValue:{fields:u.document.fields}}),f=hI.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new sS(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=ES(e,v.document),m=v.readTime?_S(v.readTime):wE.min(),g=hI.newNoDocument(y,m),k=v.removedTargetIds||[];n=new sS([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=ES(e,_.document),b=_.removedTargetIds||[];n=new sS([],b,w,null)}else{if(!("filter"in t))return eE();t.filter;var x=t.filter;x.targetId;var E=x.count||0,I=new VT(E),T=x.targetId;n=new uS(T,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return wE.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?wE.min():t.readTime?_S(t.readTime):wE.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=SS(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=II(r)?{documents:OS(e,r)}:{query:LS(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=gS(e,t.resumeToken):t.snapshotVersion.compareTo(wE.min())>0&&(n.readTime=mS(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return eE()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=SS(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(ZP),tA=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a,o,s){var u;return rn(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Wo=!1,u}return on(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Eh(ln(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(tE(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(tE(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?_S(e.updateTime):_S(t);return n.isEqual(wE.min())&&(n=_S(t)),new wT(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=_S(e.commitTime);return this.listener.Jo(n,t)}return tE(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=SS(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return RS(t.M,e)}))};this.Oo(n)}}]),n}(ZP),nA=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a){var o;return rn(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.Zo=!1,o}return on(n,[{key:"tu",value:function(){if(this.Zo)throw new iE(rE.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===rE.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new iE(rE.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.bo.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===rE.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new iE(rE.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return on((function e(){rn(this,e)}))}()),rA=function(){function e(t,n){rn(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return on(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Jx(t),this.su=!1):$x("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),iA=on((function e(t,n,r,i,o){var s=this;rn(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br((function(e){r.enqueueAndForget(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=vA(s),!e.t0){e.next=5;break}return $x("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=nE(t)).lu.add(4),e.next=4,sA(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,aA(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new rA(r,i)}));function aA(e){return oA.apply(this,arguments)}function oA(){return oA=a(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!vA(t)){e.next=18;break}n=sn(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),oA.apply(this,arguments)}function sA(e){return uA.apply(this,arguments)}function uA(){return uA=a(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=sn(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),uA.apply(this,arguments)}function cA(e,t){var n=nE(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),pA(n)?dA(n):WA(n).Co()&&hA(n,t))}function lA(e,t){var n=nE(e),r=WA(n);n.hu.delete(t),r.Co()&&fA(n,t),0===n.hu.size&&(r.Co()?r.ko():vA(n)&&n._u.set("Unknown"))}function hA(e,t){e.wu.Z(t.targetId),WA(e).Qo(t)}function fA(e,t){e.wu.Z(t),WA(e).jo(t)}function dA(e){e.wu=new hS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),WA(e).start(),e._u.iu()}function pA(e){return vA(e)&&!WA(e).Do()&&e.hu.size>0}function vA(e){return 0===nE(e).lu.size}function yA(e){e.wu=void 0}function mA(e){return gA.apply(this,arguments)}function gA(){return gA=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){hA(t,e)}));case 1:case"end":return e.stop()}}),e)}))),gA.apply(this,arguments)}function kA(e,t){return _A.apply(this,arguments)}function _A(){return _A=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yA(t),pA(t)?(t._u.uu(n),dA(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),_A.apply(this,arguments)}function wA(e,t,n){return bA.apply(this,arguments)}function bA(){return bA=a(f().mark((function e(t,n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof cS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=a(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=sn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),$x("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,xA(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof sS?t.wu.ut(n):n instanceof uS?t.wu._t(n):t.wu.ht(n),r.isEqual(wE.min())){e.next=29;break}return e.prev=14,e.next=17,uP(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(PE.EMPTY_BYTE_STRING,n.snapshotVersion)),fA(e,t);var r=new LC(n.target,t,1,n.sequenceNumber);hA(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),$x("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,xA(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),bA.apply(this,arguments)}function xA(e,t,n){return EA.apply(this,arguments)}function EA(){return EA=a(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(IC(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,sA(t);case 5:t._u.set("Offline"),r||(r=function(){return uP(t.localStore)}),t.asyncQueue.enqueueRetryable(a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $x("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,aA(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),EA.apply(this,arguments)}function IA(e,t){return t().catch((function(n){return xA(e,n,t)}))}function TA(e){return SA.apply(this,arguments)}function SA(){return SA=a(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nE(t),r=KA(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!CA(n)){e.next=19;break}return e.prev=3,e.next=6,hP(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,NA(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,xA(n,e.t0);case 17:e.next=2;break;case 19:PA(n)&&AA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),SA.apply(this,arguments)}function CA(e){return vA(e)&&e.cu.length<10}function NA(e,t){e.cu.push(t);var n=KA(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function PA(e){return vA(e)&&!KA(e).Do()&&e.cu.length>0}function AA(e){KA(e).start()}function RA(e){return DA.apply(this,arguments)}function DA(){return DA=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:KA(t).Xo();case 1:case"end":return e.stop()}}),e)}))),DA.apply(this,arguments)}function OA(e){return LA.apply(this,arguments)}function LA(){return LA=a(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=KA(t),r=sn(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),LA.apply(this,arguments)}function MA(e,t,n){return FA.apply(this,arguments)}function FA(){return FA=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=DC.from(i,n,r),e.next=3,IA(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,TA(t);case 5:case"end":return e.stop()}}),e)}))),FA.apply(this,arguments)}function UA(e,t){return VA.apply(this,arguments)}function VA(){return VA=a(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&KA(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=a(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!jT(i=n.code)||i===rE.ABORTED){e.next=7;break}return r=t.cu.shift(),KA(t).No(),e.next=5,IA(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,TA(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:PA(t)&&AA(t);case 5:case"end":return e.stop()}}),e)}))),VA.apply(this,arguments)}function jA(e,t){return qA.apply(this,arguments)}function qA(){return qA=a(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=nE(t)).asyncQueue.verifyOperationInProgress(),$x("RemoteStore","RemoteStore received new credentials"),i=vA(r),r.lu.add(3),e.next=6,sA(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,aA(r);case 12:case"end":return e.stop()}}),e)}))),qA.apply(this,arguments)}function BA(e,t){return zA.apply(this,arguments)}function zA(){return zA=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nE(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,aA(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,sA(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),zA.apply(this,arguments)}function WA(e){return e.mu||(e.mu=function(e,t,n){var r=nE(e);return r.tu(),new eA(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:mA.bind(null,e),Jr:kA.bind(null,e),Ko:wA.bind(null,e)}),e.fu.push(function(){var t=a(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),pA(e)?dA(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:yA(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function KA(e){return e.gu||(e.gu=function(e,t,n){var r=nE(e);return r.tu(),new tA(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:RA.bind(null,e),Jr:UA.bind(null,e),Yo:OA.bind(null,e),Jo:MA.bind(null,e)}),e.fu.push(function(){var t=a(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,TA(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&($x("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var GA=function(){function e(t,n,r,i,a){rn(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new aE,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return on(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new iE(rE.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function HA(e,t){if(Jx("AsyncQueue","".concat(t,": ").concat(e)),IC(e))return new iE(rE.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var QA=function(){function e(t){rn(this,e),this.comparator=t?function(e,n){return t(e,n)||zE.comparator(e.key,n.key)}:function(e,t){return zE.comparator(e.key,t.key)},this.keyedMap=XT(),this.sortedSet=new zT(this.comparator)}return on(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),YA=function(){function e(){rn(this,e),this.yu=new zT(zE.comparator)}return on(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):eE():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),$A=function(){function e(t,n,r,i,a,o,s,u){rn(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return on(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&XI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,QA.emptySet(n),a,r,i,!0,!1)}}]),e}(),JA=on((function e(){rn(this,e),this.Iu=void 0,this.listeners=[]})),XA=on((function e(){rn(this,e),this.queries=new BT((function(e){return ZI(e)}),XI),this.onlineState="Unknown",this.Tu=new Set}));function ZA(e,t){return eR.apply(this,arguments)}function eR(){return eR=a(f().mark((function e(t,n){var r,i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nE(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new JA),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=HA(e.t0,"Initialization of query '".concat(eT(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&aR(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),eR.apply(this,arguments)}function tR(e,t){return nR.apply(this,arguments)}function nR(){return nR=a(f().mark((function e(t,n){var r,i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nE(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),nR.apply(this,arguments)}function rR(e,t){var n,r=nE(e),i=!1,a=sn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=sn(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&aR(r)}function iR(e,t,n){var r=nE(e),i=r.queries.get(t);if(i){var a,o=sn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function aR(e){e.Tu.forEach((function(e){e.next()}))}var oR=function(){function e(t,n,r){rn(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return on(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=sn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new $A(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=$A.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),sR=function(){function e(t,n){rn(this,e),this.payload=t,this.byteLength=n}return on(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),uR=function(){function e(t){rn(this,e),this.M=t}return on(e,[{key:"li",value:function(e){return ES(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?PS(this.M,e.document,!1):hI.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return _S(e)}}]),e}(),cR=function(){function e(t,n,r){rn(this,e),this.xu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=lR(t)}return on(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=TE.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new uR(this.M),i=sn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.li(a.metadata.name),u=sn(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||nS()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=a(f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kP(this.localStore,new uR(this.M),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=sn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,wP(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function lR(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var hR=on((function e(t){rn(this,e),this.key=t})),fR=on((function e(t){rn(this,e),this.key=t})),dR=function(){function e(t,n){rn(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=nS(),this.mutatedKeys=nS(),this.Lu=rT(t),this.Uu=new QA(this.Lu)}return on(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new YA,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=WI(this.query)&&i.size===this.query.limit?i.last():null,c=KI(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=tT(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||c&&n.Lu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),WI(this.query)||KI(this.query))for(;o.size>this.query.limit;){var l=WI(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Ku:r,ei:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return eE()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new $A(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new YA,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=nS(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new fR(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new hR(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=nS();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return $A.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),pR=on((function e(t,n,r){rn(this,e),this.query=t,this.targetId=n,this.view=r})),vR=on((function e(t){rn(this,e),this.key=t,this.Xu=!1})),yR=function(){function e(t,n,r,i,a,o){rn(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.ta=new BT((function(e){return ZI(e)}),XI),this.ea=new Map,this.na=new Set,this.sa=new zT(zE.comparator),this.ia=new Map,this.ra=new IP,this.oa={},this.ua=new Map,this.aa=TN.gn(),this.onlineState="Unknown",this.ca=void 0}return on(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function mR(e,t){return gR.apply(this,arguments)}function gR(){return gR=a(f().mark((function e(t,n){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lD(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,fP(r.localStore,$I(n));case 8:return s=e.sent,r.isPrimaryClient&&cA(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,kR(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),gR.apply(this,arguments)}function kR(e,t,n,r){return _R.apply(this,arguments)}function _R(){return _R=a(f().mark((function e(t,n,r,i){var o,s,u,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=a(f().mark((function e(t,n,r,i){var a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,vP(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(jR(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,vP(t.localStore,n,!0);case 3:return o=e.sent,s=new dR(n,o.hi),u=s.Gu(o.documents),c=oS.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=s.applyChanges(u,t.isPrimaryClient,c),jR(t,r,l.zu),h=new pR(n,r,s),e.abrupt("return",(t.ta.set(n,h),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),_R.apply(this,arguments)}function wR(e,t){return bR.apply(this,arguments)}function bR(){return bR=a(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nE(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!XI(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,dP(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),lA(r.remoteStore,i.targetId),UR(r,i.targetId)})).catch(AN);case 9:e.next=14;break;case 11:return UR(r,i.targetId),e.next=14,dP(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),bR.apply(this,arguments)}function xR(e,t,n){return ER.apply(this,arguments)}function ER(){return ER=a(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=hD(t),e.prev=1,e.next=4,function(e,t){var n,r=nE(e),i=_E.now(),a=t.reduce((function(e,t){return e.add(t.key)}),nS());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,s=[],u=sn(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=ST(c,n.get(c.key));null!=l&&s.push(new AT(c.key,l,lI(l.value.mapValue),bT.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return r.$s.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new zT(mE)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,zR(i,a.changes);case 9:return e.next=11,TA(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=HA(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),ER.apply(this,arguments)}function IR(e,t){return TR.apply(this,arguments)}function TR(){return TR=a(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nE(t),e.prev=1,e.next=4,cP(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(tE(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?tE(n.Xu):e.removedDocuments.size>0&&(tE(n.Xu),n.Xu=!1))})),e.next=8,zR(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,AN(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),TR.apply(this,arguments)}function SR(e,t,n){var r=nE(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=nE(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=sn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&aR(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function CR(e,t,n){return NR.apply(this,arguments)}function NR(){return NR=a(f().mark((function e(t,n,r){var i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=nE(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new zT(zE.comparator)).insert(o,hI.newNoDocument(o,wE.min())),u=nS().add(o),c=new aS(wE.min(),new Map,new GT(mE),s,u),e.next=9,IR(i,c);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),BR(i),e.next=16;break;case 14:return e.next=16,dP(i.localStore,n,!1).then((function(){return UR(i,n,r)})).catch(AN);case 16:case"end":return e.stop()}}),e)}))),NR.apply(this,arguments)}function PR(e,t){return AR.apply(this,arguments)}function AR(){return AR=a(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nE(t),i=n.batch.batchId,e.prev=1,e.next=4,sP(r.localStore,n);case 4:return a=e.sent,FR(r,i,null),MR(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,zR(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,AN(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),AR.apply(this,arguments)}function RR(e,t,n){return DR.apply(this,arguments)}function DR(){return DR=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nE(t),e.prev=1,e.next=4,function(e,t){var n=nE(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return tE(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,FR(i,n,r),MR(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,zR(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,AN(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),DR.apply(this,arguments)}function OR(e,t){return LR.apply(this,arguments)}function LR(){return LR=a(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vA((r=nE(t)).remoteStore)||$x("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=nE(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.$s.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ua.get(i)||[]).push(n),r.ua.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=HA(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),LR.apply(this,arguments)}function MR(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function FR(e,t,n){var r=nE(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function UR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=sn(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||VR(e,t)}))}function VR(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(lA(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),BR(e))}function jR(e,t,n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof hR?(e.ra.addReference(a.key,t),qR(e,a)):a instanceof fR?($x("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||VR(e,a.key)):eE()}}catch(o){i.e(o)}finally{i.f()}}function qR(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||($x("SyncEngine","New document in limbo: "+n),e.na.add(r),BR(e))}function BR(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new zE(TE.fromString(t)),r=e.aa.next();e.ia.set(r,new vR(n)),e.sa=e.sa.insert(n,r),cA(e.remoteStore,new LC($I(zI(n.path)),r,2,pE.A))}}function zR(e,t,n){return WR.apply(this,arguments)}function WR(){return WR=a(f().mark((function e(t,n,r){var i,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=nE(t),o=[],s=[],u=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){u.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=tP.Js(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Ko(o),e.next=9,function(){var e=a(f().mark((function e(t,n){var r,i,a,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nE(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return _C.forEach(n,(function(t){return _C.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return _C.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),IC(e.t0)){e.next=10;break}throw e.t0;case 10:$x("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=sn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.si.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),WR.apply(this,arguments)}function KR(e,t){return GR.apply(this,arguments)}function GR(){return GR=a(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=nE(t)).currentUser.isEqual(n)){e.next=11;break}return $x("SyncEngine","User change. New user:",n.toKey()),e.next=5,aP(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new iE(rE.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,zR(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),GR.apply(this,arguments)}function HR(e,t){var n=nE(e),r=n.ia.get(t);if(r&&r.Xu)return nS().add(r.key);var i=nS(),a=n.ea.get(t);if(!a)return i;var o,s=sn(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ta.get(u);i=i.unionWith(c.view.qu)}}catch(l){s.e(l)}finally{s.f()}return i}function QR(e,t){return YR.apply(this,arguments)}function YR(){return YR=a(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nE(t),e.next=3,vP(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&jR(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),YR.apply(this,arguments)}function $R(e,t){return JR.apply(this,arguments)}function JR(){return JR=a(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nE(t),e.abrupt("return",mP(r.localStore,n).then((function(e){return zR(r,e)})));case 2:case"end":return e.stop()}}),e)}))),JR.apply(this,arguments)}function XR(e,t,n,r){return ZR.apply(this,arguments)}function ZR(){return ZR=a(f().mark((function e(t,n,r,i){var a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nE(t),e.next=3,function(e,t){var n=nE(e),r=nE(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ai.qs(e,t):_C.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,TA(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(FR(a,n,i||null),MR(a,n),function(e,t){nE(nE(e).$s).dn(t)}(a.localStore,n)):eE();case 11:return e.next=13,zR(a,o);case 13:e.next=16;break;case 15:$x("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),ZR.apply(this,arguments)}function eD(e,t){return tD.apply(this,arguments)}function tD(){return tD=a(f().mark((function e(t,n){var r,i,a,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lD(r=nE(t)),hD(r),!0!==n||!0===r.ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,nD(r,i.toArray());case 5:return a=e.sent,r.ca=!0,e.next=9,BA(r.remoteStore,!0);case 9:o=sn(a);try{for(o.s();!(s=o.n()).done;)u=s.value,cA(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ca){e.next=25;break}return c=[],l=Promise.resolve(),r.ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return UR(r,t),dP(r.localStore,t,!0)})),lA(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,nD(r,c);case 21:return function(e){var t=nE(e);t.ia.forEach((function(e,n){lA(t.remoteStore,n)})),t.ra.bi(),t.ia=new Map,t.sa=new zT(zE.comparator)}(r),r.ca=!1,e.next=25,BA(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),tD.apply(this,arguments)}function nD(e,t,n){return rD.apply(this,arguments)}function rD(){return rD=a(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d,p,v,y,m,g;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=nE(t),a=[],o=[],s=sn(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ea.get(c))||0===h.length){e.next=34;break}return e.next=11,fP(i.localStore,$I(h[0]));case 11:l=e.sent,d=sn(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.ta.get(v),e.next=20,QR(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,yP(i.localStore,c);case 36:return g=e.sent,e.next=39,fP(i.localStore,g);case 39:return l=e.sent,e.next=42,kR(i,iD(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),rD.apply(this,arguments)}function iD(e){return BI(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function aD(e){var t=nE(e);return nE(nE(t.localStore).persistence).Os()}function oD(e,t,n,r){return sD.apply(this,arguments)}function sD(){return sD=a(f().mark((function e(t,n,r,i){var a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=nE(t)).ca){e.next=3;break}return e.abrupt("return",void $x("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,mP(a.localStore,nT(o[0]));case 10:return s=e.sent,u=aS.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,zR(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,dP(a.localStore,n,!0);case 17:return UR(a,n,i),e.abrupt("break",20);case 19:eE();case 20:case"end":return e.stop()}}),e)}))),sD.apply(this,arguments)}function uD(e,t,n){return cD.apply(this,arguments)}function cD(){return cD=a(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=lD(t)).ca){e.next=45;break}a=sn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ea.has(s)){e.next=10;break}return $x("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,yP(i.localStore,s);case 12:return u=e.sent,e.next=15,fP(i.localStore,u);case 15:return c=e.sent,e.next=18,kR(i,iD(u),c.targetId,!1);case 18:cA(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=sn(r),e.prev=30,d=f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ea.has(t),!e.t0){e.next=5;break}return e.next=5,dP(i.localStore,t,!1).then((function(){lA(i.remoteStore,t),UR(i,t)})).catch(AN);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),cD.apply(this,arguments)}function lD(e){var t=nE(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=IR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=HR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=CR.bind(null,t),t.Zu.Ko=rR.bind(null,t.eventManager),t.Zu.la=iR.bind(null,t.eventManager),t}function hD(e){var t=nE(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=PR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=RR.bind(null,t),t}function fD(e,t,n){var r=nE(e);(function(){var e=a(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=nE(e),r=_S(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(lR(i)),a=new cR(i,t.localStore,n.M),e.next=15,n.fa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.fa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,zR(t,u.Ou,void 0);case 31:return e.next=33,function(e,t){var n=nE(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Xx("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var dD=function(){function e(){rn(this,e),this.synchronizeTabs=!1}return on(e,[{key:"initialize",value:function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=JP(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return iP(this.persistence,new nP,e.initialUser,this.M)}},{key:"_a",value:function(e){return new AP(DP.Wi,this.M)}},{key:"da",value:function(e){return new zP}},{key:"terminate",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),pD=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this)).ga=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return on(n,[{key:"initialize",value:function(){var e=a(f().mark((function e(t){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eh(ln(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ga.initialize(this,t);case 4:return e.next=6,hD(this.ga.syncEngine);case 6:return e.next=8,TA(this.ga.remoteStore);case 8:return e.next=10,this.persistence.Is((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return iP(this.persistence,new nP,e.initialUser,this.M)}},{key:"wa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new LN(t,e.asyncQueue)}},{key:"_a",value:function(e){var t=ZN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gN.withCacheSize(this.cacheSizeBytes):gN.DEFAULT;return new $N(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,YP(),$P(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(e){return new zP}}]),n}(dD),vD=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e,r,!1)).ga=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return on(n,[{key:"initialize",value:function(){var e=a(f().mark((function e(t){var r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eh(ln(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ga.syncEngine,e.t0=this.sharedClientState instanceof BP,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:XR.bind(null,r),Mr:oD.bind(null,r),Or:uD.bind(null,r),Os:aD.bind(null,r),Nr:$R.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Is(function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eD(i.ga.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"da",value:function(e){var t=YP();if(!BP.vt(t))throw new iE(rE.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ZN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new BP(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(pD),yD=function(){function e(){rn(this,e)}return on(e,[{key:"initialize",value:function(){var e=a(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return SR(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=KR.bind(null,this.syncEngine),e.next=12,BA(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new XA}},{key:"createDatastore",value:function(e){var t,n=JP(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new QP(t));return function(e,t,n,r){return new nA(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return SR(o.syncEngine,e,0)},a=KP.vt()?new KP:new WP,new iA(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new yR(e,t,n,r,i,a);return o&&(s.ca=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nE(t),$x("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,sA(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function mD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return a(f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var gD=function(){function e(t){rn(this,e),this.observer=t,this.muted=!1}return on(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),kD=function(){function e(t,n){var r=this;rn(this,e),this.Ia=t,this.M=n,this.metadata=new aE,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return on(e,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fa",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ea",value:function(){var e=a(f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Aa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ta.decode(t),r=Number(n),isNaN(r)&&this.Ra("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new sR(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Aa",value:function(){var e=a(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Pa()<0)){e.next=7;break}return e.next=3,this.Va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var e=a(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ia.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_D=function(){function e(t){rn(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return on(e,[{key:"lookup",value:function(){var e=a(f().mark((function e(t){var n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new iE(rE.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=a(f().mark((function e(t,n){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nE(t),i=SS(r.M)+"/documents",a={documents:n.map((function(e){return xS(r.M,e)}))},e.next=5,r.co("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=AS(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());tE(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new FT(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=a(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=zE.fromPath(t);n.mutations.push(new UT(r,n.precondition(r)))})),e.next=7,function(){var e=a(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nE(t),i=SS(r.M)+"/documents",a={writes:n.map((function(e){return RS(r.M,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw eE();t=wE.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new iE(rE.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?bT.updateTime(t):bT.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wE.min()))throw new iE(rE.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bT.updateTime(t)}return bT.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),wD=function(){function e(t,n,r,i){rn(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new XP(this.asyncQueue,"transaction_retry")}return on(e,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io(a(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new _D(e.datastore),(r=e.Da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ca(t)}))}))})).catch((function(t){e.Ca(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Da",value:function(e){try{var t=this.updateFunction(e);return!jE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ca",value:function(e){var t=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!jT(t)}return!1}}]),e}(),bD=function(){function e(t,n,r,i){var o=this;rn(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gx.UNAUTHENTICATED,this.clientId=yE.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $x("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return $x("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return on(e,[{key:"getConfiguration",value:function(){var e=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new iE(rE.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new aE;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(a(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=HA(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function xD(e,t){return ED.apply(this,arguments)}function ED(){return ED=a(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),$x("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,aP(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ED.apply(this,arguments)}function ID(e,t){return TD.apply(this,arguments)}function TD(){return TD=a(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,SD(t);case 3:return r=e.sent,$x("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return jA(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return jA(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),TD.apply(this,arguments)}function SD(e){return CD.apply(this,arguments)}function CD(){return CD=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return $x("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,xD(t,new dD);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),CD.apply(this,arguments)}function ND(e){return PD.apply(this,arguments)}function PD(){return PD=a(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return $x("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,ID(t,new yD);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),PD.apply(this,arguments)}function AD(e){return SD(e).then((function(e){return e.persistence}))}function RD(e){return SD(e).then((function(e){return e.localStore}))}function DD(e){return ND(e).then((function(e){return e.remoteStore}))}function OD(e){return ND(e).then((function(e){return e.syncEngine}))}function LD(e){return MD.apply(this,arguments)}function MD(){return MD=a(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ND(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=mR.bind(null,n.syncEngine),r.onUnlisten=wR.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),MD.apply(this,arguments)}function FD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new aE;return e.asyncQueue.enqueueAndForget(a(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new gD({next:function(a){t.enqueueAndForget((function(){return tR(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new iE(rE.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new iE(rE.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new oR(zI(n.path),a,{includeMetadataChanges:!0,Du:!0});return ZA(e,o)},i.next=3,LD(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function UD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new aE;return e.asyncQueue.enqueueAndForget(a(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new gD({next:function(n){t.enqueueAndForget((function(){return tR(e,o)})),n.fromCache&&"server"===r.source?i.reject(new iE(rE.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new oR(n,a,{includeMetadataChanges:!0,Du:!0});return ZA(e,o)},i.next=3,LD(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var VD=new Map;function jD(e,t,n){if(!n)throw new iE(rE.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function qD(e,t,n,r){if(!0===t&&!0===r)throw new iE(rE.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function BD(e){if(!zE.isDocumentKey(e))throw new iE(rE.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zD(e){if(zE.isDocumentKey(e))throw new iE(rE.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function WD(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":eE()}function KD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new iE(rE.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=WD(e);throw new iE(rE.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function GD(e,t){if(t<=0)throw new iE(rE.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var HD=function(){function e(t){var n;if(rn(this,e),void 0===t.host){if(void 0!==t.ssl)throw new iE(rE.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new iE(rE.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,qD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return on(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),QD=function(){function e(t,n,r){rn(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HD({}),this._settingsFrozen=!1,t instanceof VE?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new iE(rE.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new VE(e.options.projectId)}(t))}return on(e,[{key:"app",get:function(){if(!this._app)throw new iE(rE.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new iE(rE.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HD(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new sE;switch(e.type){case"gapi":var t=e.client;return tE(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new hE(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new iE(rE.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=VD.get(e);t&&($x("ComponentProvider","Removing Datastore"),VD.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function YD(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=KD(e,QD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Xx("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Gx.MOCK_USER;else{o=Nn(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new iE(rE.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Gx(u)}e._authCredentials=new uE(new oE(o,s))}}var $D=function(){function e(t,n,r){rn(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return on(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new XD(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),JD=function(){function e(t,n,r){rn(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return on(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),XD=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this,e,r,zI(i)))._path=i,a.type="collection",a}return on(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new $D(this.firestore,null,new zE(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(JD);function ZD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=cr(e),jD("collection","path",t),e instanceof QD){var a=TE.fromString.apply(TE,[t].concat(r));return zD(a),new XD(e,null,a)}if(!(e instanceof $D||e instanceof XD))throw new iE(rE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(TE.fromString.apply(TE,[t].concat(r)));return zD(o),new XD(e.firestore,null,o)}function eO(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=cr(e),1===arguments.length&&(t=yE.R()),jD("doc","path",t),e instanceof QD){var a=TE.fromString.apply(TE,[t].concat(r));return BD(a),new $D(e,null,new zE(a))}if(!(e instanceof $D||e instanceof XD))throw new iE(rE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(TE.fromString.apply(TE,[t].concat(r)));return BD(o),new $D(e.firestore,e instanceof XD?e.converter:null,new zE(o))}function tO(e,t){return e=cr(e),t=cr(t),(e instanceof $D||e instanceof XD)&&(t instanceof $D||t instanceof XD)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function nO(e,t){return e=cr(e),t=cr(t),e instanceof JD&&t instanceof JD&&e.firestore===t.firestore&&XI(e._query,t._query)&&e.converter===t.converter}var rO=function(){function e(){var t=this;rn(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new XP(this,"async_queue_retry"),this.Ua=function(){var e=$P();e&&$x("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=$P();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return on(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=$P();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new aE;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=a(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),IC(e.t0)){e.next=12;break}throw e.t0;case 12:$x("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Jx("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=GA.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&eE()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=a(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=sn(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=sn(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();function iO(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=sn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var aO=function(){function e(){rn(this,e),this._progressObserver={},this._taskCompletionResolver=new aE,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return on(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),oO=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new rO,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return on(n,[{key:"_terminate",value:function(){return this._firestoreClient||uO(this),this._firestoreClient.terminate()}}]),n}(QD);function sO(e){return e._firestoreClient||uO(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function uO(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new UE(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new bD(e._authCredentials,e._appCheckCredentials,e._queue,r)}function cO(e,t,n){var r=new aE;return e.asyncQueue.enqueue(a(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,xD(e,n);case 3:return i.next=5,ID(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===rE.FAILED_PRECONDITION||e.code===rE.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function lO(e){return function(e){return e.asyncQueue.enqueue(a(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,AD(e);case 2:return n=t.sent,t.next=5,DD(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=nE(e);return t.lu.delete(0),aA(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(sO(e=KD(e,oO)))}function hO(e){return function(e){return e.asyncQueue.enqueue(a(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,AD(e);case 2:return n=t.sent,t.next=5,DD(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=nE(t)).lu.add(0),e.next=4,sA(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(sO(e=KD(e,oO)))}function fO(e,t){var n=sO(e=KD(e,oO)),r=new aO;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new kD(e,t)}(function(e,t){if(e instanceof Uint8Array)return mD(e,t);if(e instanceof ArrayBuffer)return mD(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,JP(t));e.asyncQueue.enqueueAndForget(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fD,t.next=3,OD(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function dO(e,t){return function(e,t){return e.asyncQueue.enqueue(a(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=nE(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.ds.getNamedQuery(e,t)}))},n.next=3,RD(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(sO(e=KD(e,oO)),t).then((function(t){return t?new JD(e,null,t.query):null}))}function pO(e){if(e._initialized||e._terminated)throw new iE(rE.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var vO=function(){function e(){rn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new iE(rE.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new CE(n)}return on(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var yO=function(){function e(t){rn(this,e),this._byteString=t}return on(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(PE.fromBase64String(t))}catch(t){throw new iE(rE.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(PE.fromUint8Array(t))}}]),e}(),mO=on((function e(t){rn(this,e),this._methodName=t})),gO=function(){function e(t,n){if(rn(this,e),!isFinite(t)||t<-90||t>90)throw new iE(rE.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new iE(rE.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return on(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return mE(this._lat,e._lat)||mE(this._long,e._long)}}]),e}(),kO=/^__.*__$/,_O=function(){function e(t,n,r){rn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return on(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new AT(e,this.data,this.fieldMask,t,this.fieldTransforms):new PT(e,this.data,t,this.fieldTransforms)}}]),e}(),wO=function(){function e(t,n,r){rn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return on(e,[{key:"toMutation",value:function(e,t){return new AT(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function bO(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw eE()}}var xO=function(){function e(t,n,r,i,a,o){rn(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return on(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return zO(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(bO(this.Ya)&&kO.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),EO=function(){function e(t,n,r){rn(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||JP(t)}return on(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new xO({Ya:e,methodName:t,oc:n,path:CE.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function IO(e){var t=e._freezeSettings(),n=JP(e._databaseId);return new EO(e._databaseId,!!t.ignoreUndefinedProperties,n)}function TO(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);VO("Data must be an object, but it was:",o,r);var s,u,c=FO(r,o);if(a.merge)s=new NE(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=sn(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=jO(t,d,n);if(!o.contains(p))throw new iE(rE.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));WO(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new NE(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new _O(new cI(c),s,u)}var SO=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(mO);function CO(e,t,n){return new xO({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var NO=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"_toFieldTransform",value:function(e){return new _T(e.path,new fT)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(mO),PO=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e)).ac=r,i}return on(n,[{key:"_toFieldTransform",value:function(e){var t=CO(this,e,!0),n=this.ac.map((function(e){return MO(e,t)})),r=new dT(n);return new _T(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(mO),AO=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e)).ac=r,i}return on(n,[{key:"_toFieldTransform",value:function(e){var t=CO(this,e,!0),n=this.ac.map((function(e){return MO(e,t)})),r=new vT(n);return new _T(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(mO),RO=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e)).cc=r,i}return on(n,[{key:"_toFieldTransform",value:function(e){var t=new mT(e.M,sT(e.M,this.cc));return new _T(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(mO);function DO(e,t,n,r){var i=e.uc(1,t,n);VO("Data must be an object, but it was:",i,r);var a=[],o=cI.empty();xE(r,(function(e,r){var s=BO(t,e,n);r=cr(r);var u=i.nc(s);if(r instanceof SO)a.push(s);else{var c=MO(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new NE(a);return new wO(o,s,i.fieldTransforms)}function OO(e,t,n,r,i,a){var o=e.uc(1,t,n),s=[jO(t,r,n)],u=[i];if(a.length%2!=0)throw new iE(rE.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(jO(t,a[c])),u.push(a[c+1]);for(var l=[],h=cI.empty(),f=s.length-1;f>=0;--f)if(!WO(l,s[f])){var d=s[f],p=u[f];p=cr(p);var v=o.nc(d);if(p instanceof SO)l.push(d);else{var y=MO(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new NE(l);return new wO(h,m,o.fieldTransforms)}function LO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return MO(n,e.uc(r?4:3,t))}function MO(e,t){if(UO(e=cr(e)))return VO("Unsupported field value:",t,e),FO(e,t);if(e instanceof mO)return function(e,t){if(!bO(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=sn(e);try{for(a.s();!(n=a.n()).done;){var o=MO(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=cr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sT(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=_E.fromDate(e);return{timestampValue:mS(t.M,n)}}if(e instanceof _E){var r=new _E(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mS(t.M,r)}}if(e instanceof gO)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof yO)return{bytesValue:gS(t.M,e._byteString)};if(e instanceof $D){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:wS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(WD(e)))}(e,t)}function FO(e,t){var n={};return EE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xE(e,(function(e,r){var i=MO(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function UO(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof _E||e instanceof gO||e instanceof yO||e instanceof $D||e instanceof mO)}function VO(e,t,n){if(!UO(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=WD(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function jO(e,t,n){if((t=cr(t))instanceof vO)return t._internalPath;if("string"==typeof t)return BO(e,t);throw zO("Field path arguments must be of type string or ",e,!1,void 0,n)}var qO=new RegExp("[~\\*/\\[\\]]");function BO(e,t,n){if(t.search(qO)>=0)throw zO("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return vn(vO,yr(t.split(".")))._internalPath}catch(r){throw zO("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function zO(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new iE(rE.INVALID_ARGUMENT,s+e+u)}function WO(e,t){return e.some((function(e){return e.isEqual(t)}))}var KO=function(){function e(t,n,r,i,a){rn(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return on(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new $D(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new GO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(HO("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),GO=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"data",value:function(){return Eh(ln(n.prototype),"data",this).call(this)}}]),n}(KO);function HO(e,t){return"string"==typeof t?BO(e,t):t instanceof vO?t._internalPath:t._delegate._internalPath}var QO=function(){function e(t,n){rn(this,e),this.hasPendingWrites=t,this.fromCache=n}return on(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),YO=function(e){cn(n,e);var t=pn(n);function n(e,r,i,a,o,s){var u;return rn(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return on(n,[{key:"exists",value:function(){return Eh(ln(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new $O(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(HO("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(KO),$O=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Eh(ln(n.prototype),"data",this).call(this,e)}}]),n}(YO),JO=function(){function e(t,n,r,i){rn(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new QO(i.hasPendingWrites,i.fromCache),this.query=r}return on(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new $O(n._firestore,n._userDataWriter,r.key,r,new QO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new iE(rE.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new $O(e._firestore,e._userDataWriter,t.doc.key,t.doc,new QO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new $O(e._firestore,e._userDataWriter,t.doc.key,t.doc,new QO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:XO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function XO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return eE()}}function ZO(e,t){return e instanceof YO&&t instanceof YO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof JO&&t instanceof JO&&e._firestore===t._firestore&&nO(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function eL(e){if(KI(e)&&0===e.explicitOrderBy.length)throw new iE(rE.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tL=on((function e(){rn(this,e)}));function nL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var rL=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this)).hc=e,a.lc=r,a.fc=i,a.type="where",a}return on(n,[{key:"_apply",value:function(e){var t=IO(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new iE(rE.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){pL(o,a);var u,c=[],l=sn(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(dL(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=dL(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||pL(o,a),s=LO(n,"where",o,"in"===a||"not-in"===a);var f=SI.create(i,a,s);return function(e,t){if(t.S()){var n=HI(e);if(null!==n&&!n.isEqual(t.field))throw new iE(rE.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=GI(e);null!==r&&vL(e,t.field,r)}var i=function(e,t){var n,r=sn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new iE(rE.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new iE(rE.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new JD(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new qI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(tL);var iL=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this)).hc=e,i.dc=r,i.type="orderBy",i}return on(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new iE(rE.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new iE(rE.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new FI(t,n);return function(e,t){if(null===GI(e)){var n=HI(e);null!==n&&vL(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new JD(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new qI(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(tL);var aL=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this)).type=e,a._c=r,a.wc=i,a}return on(n,[{key:"_apply",value:function(e){return new JD(e.firestore,e.converter,JI(e._query,this._c,this.wc))}}]),n}(tL);var oL=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return on(n,[{key:"_apply",value:function(e){var t=fL(e,this.type,this.mc,this.gc);return new JD(e.firestore,e.converter,function(e,t){return new qI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(tL);function sL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oL("startAt",t,!0)}function uL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oL("startAfter",t,!1)}var cL=function(e){cn(n,e);var t=pn(n);function n(e,r,i){var a;return rn(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return on(n,[{key:"_apply",value:function(e){var t=fL(e,this.type,this.mc,this.gc);return new JD(e.firestore,e.converter,function(e,t){return new qI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(tL);function lL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cL("endBefore",t,!1)}function hL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cL("endAt",t,!0)}function fL(e,t,n,r){if(n[0]=cr(n[0]),n[0]instanceof KO)return function(e,t,n,r,i){if(!r)throw new iE(rE.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=sn(YI(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(ZE(t,r.key));else{var c=r.data.field(u.field);if(LE(c))throw new iE(rE.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new iE(rE.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new MI(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=IO(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new iE(rE.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new iE(rE.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!QI(e)&&-1!==c.indexOf("/"))throw new iE(rE.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(TE.fromString(c));if(!zE.isDocumentKey(l))throw new iE(rE.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new zE(l);s.push(ZE(t,h))}else{var f=LO(n,r,c);s.push(f)}}return new MI(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function dL(e,t,n){if("string"==typeof(n=cr(n))){if(""===n)throw new iE(rE.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QI(t)&&-1!==n.indexOf("/"))throw new iE(rE.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(TE.fromString(n));if(!zE.isDocumentKey(r))throw new iE(rE.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ZE(e,new zE(r))}if(n instanceof $D)return ZE(e,n._key);throw new iE(rE.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(WD(n),"."))}function pL(e,t){if(!Array.isArray(e)||0===e.length)throw new iE(rE.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new iE(rE.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function vL(e,t,n){if(!n.isEqual(t))throw new iE(rE.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var yL=function(){function e(){rn(this,e)}return on(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(GE(e)){case 0:return null;case 1:return e.booleanValue;case 2:return DE(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(OE(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw eE()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return xE(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new gO(DE(e.latitude),DE(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ME(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(FE(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=RE(e);return new _E(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=TE.fromString(e);tE(KS(n));var r=new VE(n.get(1),n.get(3)),i=new zE(n.popFirst(5));return r.isEqual(t)||Jx("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function mL(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var gL=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this)).firestore=e,r}return on(n,[{key:"convertBytes",value:function(e){return new yO(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $D(this.firestore,null,t)}}]),n}(yL),kL=function(){function e(t,n){rn(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=IO(t)}return on(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=_L(e,this._firestore),i=mL(r.converter,t,n),a=TO(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,bT.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=_L(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=cr(t))||t instanceof vO?OO(this._dataReader,"WriteBatch.update",i._key,t,n,o):DO(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,bT.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=_L(e,this._firestore);return this._mutations=this._mutations.concat(new FT(t._key,bT.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new iE(rE.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function _L(e,t){if((e=cr(e)).firestore!==t)throw new iE(rE.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var wL=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this)).firestore=e,r}return on(n,[{key:"convertBytes",value:function(e){return new yO(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $D(this.firestore,null,t)}}]),n}(yL);function bL(e){e=KD(e,$D);var t=KD(e.firestore,oO),n=sO(t),r=new wL(t);return function(e,t){var n=new aE;return e.asyncQueue.enqueueAndForget(a(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=nE(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ai.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new iE(rE.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=HA(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,RD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new YO(t,r,e._key,n,new QO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function xL(e){e=KD(e,JD);var t=KD(e.firestore,oO),n=sO(t),r=new wL(t);return function(e,t){var n=new aE;return e.asyncQueue.enqueueAndForget(a(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vP(t,n,!0);case 3:i=e.sent,a=new dR(n,i.hi),o=a.Gu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=HA(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,RD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new JO(t,r,e,n)}))}function EL(e,t,n){e=KD(e,$D);var r=KD(e.firestore,oO),i=mL(e.converter,t,n);return CL(r,[TO(IO(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,bT.none())])}function IL(e,t,n){e=KD(e,$D);for(var r=KD(e.firestore,oO),i=IO(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return CL(r,[("string"==typeof(t=cr(t))||t instanceof vO?OO(i,"updateDoc",e._key,t,n,o):DO(i,"updateDoc",e._key,t)).toMutation(e._key,bT.exists(!0))])}function TL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=cr(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||iO(n[c])||(u=n[c],c++);var l,h,d,p={includeMetadataChanges:u.includeMetadataChanges};if(iO(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[c+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof $D)h=KD(e.firestore,oO),d=zI(e._key.path),l={next:function(t){n[c]&&n[c](NL(h,e,t))},error:n[c+1],complete:n[c+2]};else{var y=KD(e,JD);h=KD(y.firestore,oO),d=y._query;var m=new wL(h);l={next:function(e){n[c]&&n[c](new JO(h,m,y,e))},error:n[c+1],complete:n[c+2]},eL(e._query)}return function(e,t,n,r){var i=new gD(r),o=new oR(t,i,n);return e.asyncQueue.enqueueAndForget(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ZA,t.next=3,LD(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.pa(),e.asyncQueue.enqueueAndForget(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=tR,t.next=3,LD(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(sO(h),d,p,l)}function SL(e,t){return function(e,t){var n=new gD(t);return e.asyncQueue.enqueueAndForget(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){nE(e).Tu.add(t),t.next()},t.next=3,LD(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.pa(),e.asyncQueue.enqueueAndForget(a(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){nE(e).Tu.delete(t)},t.next=3,LD(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(sO(e=KD(e,oO)),iO(t)?t:{next:t})}function CL(e,t){return function(e,t){var n=new aE;return e.asyncQueue.enqueueAndForget(a(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=xR,r.next=3,OD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(sO(e),t)}function NL(e,t,n){var r=n.docs.get(t._key),i=new wL(e);return new YO(e,i,t._key,r,new QO(n.hasPendingWrites,n.fromCache),t.converter)}var PL=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e,r))._firestore=e,i}return on(n,[{key:"get",value:function(e){var t=this,r=_L(e,this._firestore),i=new wL(this._firestore);return Eh(ln(n.prototype),"get",this).call(this,e).then((function(e){return new YO(t._firestore,i,r._key,e._document,new QO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){rn(this,e),this._firestore=t,this._transaction=n,this._dataReader=IO(t)}return on(e,[{key:"get",value:function(e){var t=this,n=_L(e,this._firestore),r=new gL(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return eE();var i=e[0];if(i.isFoundDocument())return new KO(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new KO(t._firestore,r,n._key,null,n.converter);throw eE()}))}},{key:"set",value:function(e,t,n){var r=_L(e,this._firestore),i=mL(r.converter,t,n),a=TO(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=_L(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=cr(t))||t instanceof vO?OO(this._dataReader,"Transaction.update",i._key,t,n,o):DO(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=_L(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function AL(e,t){return function(e,t){var n=new aE;return e.asyncQueue.enqueueAndForget(a(f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return ND(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new wD(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(sO(e=KD(e,oO)),(function(n){return t(new PL(e,n))}))}function RL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PO("arrayUnion",t)}function DL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AO("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Hx=e}(Qr),qr(new mr("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new oO(i,new cE(e.getProvider("auth-internal")),new dE(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),ei(Kx,"3.4.7",e),ei(Kx,"3.4.7","esm2017")}();function OL(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new iE("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function LL(){if("undefined"===typeof Uint8Array)throw new iE("unimplemented","Uint8Arrays are not available in this environment.")}function ML(){if("undefined"==typeof atob)throw new iE("unimplemented","Blobs are unavailable in Firestore in this environment.")}var FL=function(){function e(t){rn(this,e),this._delegate=t}return on(e,[{key:"toBase64",value:function(){return ML(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return LL(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ML(),new e(yO.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return LL(),new e(yO.fromUint8Array(t))}}]),e}();function UL(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=sn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var VL=function(){function e(){rn(this,e)}return on(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){pO(e=KD(e,oO));var n=sO(e),r=e._freezeSettings(),i=new yD;return cO(n,i,new pD(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){pO(e=KD(e,oO));var t=sO(e),n=e._freezeSettings(),r=new yD;return cO(t,r,new vD(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new iE(rE.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new aE;return e._queue.enqueueAndForgetEvenWhileRestricted(a(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=a(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bC.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,bC.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ZN(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),jL=function(){function e(t,n,r){var i=this;rn(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof VE||(this._appCompat=t)}return on(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Xx("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};YD(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return lO(this._delegate)}},{key:"disableNetwork",value:function(){return hO(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&qD("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new aE;return e.asyncQueue.enqueueAndForget(a(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=OR,n.next=3,OD(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(sO(e=KD(e,oO)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return SL(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new iE("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new eM(this,ZD(this._delegate,e))}catch(eF){throw GL(eF,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new KL(this,eO(this._delegate,e))}catch(eF){throw GL(eF,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new JL(this,function(e,t){if(e=KD(e,QD),jD("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new iE(rE.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new JD(e,null,function(e){return new qI(TE.emptyPath(),e)}(t))}(this._delegate,e))}catch(eF){throw GL(eF,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return AL(this._delegate,(function(n){return e(new BL(t,n))}))}},{key:"batch",value:function(){var e=this;return sO(this._delegate),new zL(new kL(this._delegate,(function(t){return CL(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return fO(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return dO(this._delegate,e).then((function(e){return e?new JL(t,e):null}))}}]),e}(),qL=function(e){cn(n,e);var t=pn(n);function n(e){var r;return rn(this,n),(r=t.call(this)).firestore=e,r}return on(n,[{key:"convertBytes",value:function(e){return new FL(new yO(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return KL.forKey(t,this.firestore,null)}}]),n}(yL);var BL=function(){function e(t,n){rn(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new qL(t)}return on(e,[{key:"get",value:function(e){var t=this,n=tM(e);return this._delegate.get(n).then((function(e){return new YL(t._firestore,new YO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=tM(e);return n?(OL("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=tM(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=tM(e);return this._delegate.delete(t),this}}]),e}(),zL=function(){function e(t){rn(this,e),this._delegate=t}return on(e,[{key:"set",value:function(e,t,n){var r=tM(e);return n?(OL("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=tM(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=tM(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),WL=function(){function e(t,n,r){rn(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return on(e,[{key:"fromFirestore",value:function(e,t){var n=new $O(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $L(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new qL(t),n),i.set(n,a)),a}}]),e}();WL.INSTANCES=new WeakMap;var KL=function(){function e(t,n){rn(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new qL(t)}return on(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new eM(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new eM(this.firestore,ZD(this._delegate,e))}catch(eF){throw GL(eF,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=cr(e))instanceof $D&&tO(this._delegate,e)}},{key:"set",value:function(e,t){t=OL("DocumentReference.set",t);try{return t?EL(this._delegate,e,t):EL(this._delegate,e)}catch(eF){throw GL(eF,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?IL(this._delegate,e):IL.apply(void 0,[this._delegate,e,t].concat(r))}catch(eF){throw GL(eF,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return CL(KD(e.firestore,oO),[new FT(e._key,bT.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=HL(n),a=QL(n,(function(t){return new YL(e.firestore,new YO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return TL(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?bL(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=KD(e,$D);var t=KD(e.firestore,oO);return FD(sO(t),e._key,{source:"server"}).then((function(n){return NL(t,e,n)}))}(this._delegate):function(e){e=KD(e,$D);var t=KD(e.firestore,oO);return FD(sO(t),e._key).then((function(n){return NL(t,e,n)}))}(this._delegate),t.then((function(e){return new YL(n.firestore,new YO(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(WL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new iE("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new $D(n._delegate,r,new zE(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new $D(n._delegate,r,t))}}]),e}();function GL(e,t,n){return e.message=e.message.replace(t,n),e}function HL(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!UL(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function QL(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=UL(e[0])?e[0]:UL(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var YL=function(){function e(t,n){rn(this,e),this._firestore=t,this._delegate=n}return on(e,[{key:"ref",get:function(){return new KL(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return ZO(this._delegate,e._delegate)}}]),e}(),$L=function(e){cn(n,e);var t=pn(n);function n(){return rn(this,n),t.apply(this,arguments)}return on(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||eE()}(void 0!==t),t}}]),n}(YL),JL=function(){function e(t,n){rn(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new qL(t)}return on(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,nL(this._delegate,function(e,t,n){var r=t,i=HO("where",e);return new rL(i,r,n)}(t,n,r)))}catch(eF){throw GL(eF,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,nL(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=HO("orderBy",e);return new iL(n,t)}(t,n)))}catch(eF){throw GL(eF,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,nL(this._delegate,function(e){return GD("limit",e),new aL("limit",e,"F")}(t)))}catch(eF){throw GL(eF,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,nL(this._delegate,function(e){return GD("limitToLast",e),new aL("limitToLast",e,"L")}(t)))}catch(eF){throw GL(eF,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,nL(this._delegate,sL.apply(void 0,arguments)))}catch(eF){throw GL(eF,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,nL(this._delegate,uL.apply(void 0,arguments)))}catch(eF){throw GL(eF,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,nL(this._delegate,lL.apply(void 0,arguments)))}catch(eF){throw GL(eF,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,nL(this._delegate,hL.apply(void 0,arguments)))}catch(eF){throw GL(eF,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return nO(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?xL(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=KD(e,JD);var t=KD(e.firestore,oO),n=sO(t),r=new wL(t);return UD(n,e._query,{source:"server"}).then((function(n){return new JO(t,r,e,n)}))}(this._delegate):function(e){e=KD(e,JD);var t=KD(e.firestore,oO),n=sO(t),r=new wL(t);return eL(e._query),UD(n,e._query).then((function(n){return new JO(t,r,e,n)}))}(this._delegate),t.then((function(e){return new ZL(n.firestore,new JO(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=HL(n),a=QL(n,(function(t){return new ZL(e.firestore,new JO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return TL(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(WL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),XL=function(){function e(t,n){rn(this,e),this._firestore=t,this._delegate=n}return on(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new $L(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),ZL=function(){function e(t,n){rn(this,e),this._firestore=t,this._delegate=n}return on(e,[{key:"query",get:function(){return new JL(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new $L(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new XL(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new $L(n._firestore,r))}))}},{key:"isEqual",value:function(e){return ZO(this._delegate,e._delegate)}}]),e}(),eM=function(e){cn(n,e);var t=pn(n);function n(e,r){var i;return rn(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return on(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new KL(this.firestore,e):null}},{key:"doc",value:function(e){try{return new KL(this.firestore,void 0===e?eO(this._delegate):eO(this._delegate,e))}catch(eF){throw GL(eF,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=KD(e.firestore,oO),r=eO(e),i=mL(e.converter,t);return CL(n,[TO(IO(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,bT.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new KL(t.firestore,e)}))}},{key:"isEqual",value:function(e){return tO(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(WL.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(JL);function tM(e){return KD(e,$D)}var nM=function(){function e(){rn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=vn(vO,n)}return on(e,[{key:"isEqual",value:function(e){return(e=cr(e))instanceof vO&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(CE.keyField().canonicalString())}}]),e}(),rM=function(){function e(t){rn(this,e),this._delegate=t}return on(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new NO("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new SO("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=RL.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=DL.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new RO("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),iM={Firestore:jL,GeoPoint:gO,Timestamp:_E,Blob:FL,Transaction:BL,WriteBatch:zL,DocumentReference:KL,DocumentSnapshot:YL,Query:JL,QueryDocumentSnapshot:$L,QuerySnapshot:ZL,CollectionReference:eM,FieldPath:nM,FieldValue:rM,setLogLevel:function(e){!function(e){Qx.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function aM(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=aM(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function oM(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=aM(e))&&(r&&(r+=" "),r+=t);return r}function sM(){return sM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sM.apply(this,arguments)}function uM(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function cM(e){return"number"===typeof e&&!isNaN(e)}function lM(e){return"boolean"===typeof e}function hM(e){return"string"===typeof e}function fM(e){return"function"===typeof e}function dM(e){return hM(e)||fM(e)?e:null}function pM(e){return 0===e||e}!function(e){!function(e,t){e.INTERNAL.registerComponent(new mr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},iM)))}(e,(function(e,t){return new jL(e,t,new VL)})),e.registerVersion("@firebase/firestore-compat","0.1.16")}(Ei);var vM=!("undefined"===typeof window||!window.document||!window.document.createElement);function yM(e){return(0,t.isValidElement)(e)||hM(e)||fM(e)||cM(e)}var mM={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},gM={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function kM(e){var n=e.enter,r=e.exit,i=e.appendPosition,a=void 0!==i&&i,o=e.collapse,s=void 0===o||o,u=e.collapseDuration,c=void 0===u?300:u;return function(e){var i=e.children,o=e.position,u=e.preventExitTransition,l=e.done,h=e.nodeRef,f=e.isIn,d=a?n+"--"+o:n,p=a?r+"--"+o:r,v=(0,t.useRef)(),y=(0,t.useRef)(0);function m(e){if(e.target===h.current){var t=h.current;t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",m),t.removeEventListener("animationcancel",m),0===y.current&&(t.className=v.current)}}function g(){var e=h.current;e.removeEventListener("animationend",g),s?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all "+n+"ms",requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,l,c):l()}return(0,t.useLayoutEffect)((function(){!function(){var e=h.current;v.current=e.className,e.className+=" "+d,e.addEventListener("animationend",m),e.addEventListener("animationcancel",m)}()}),[]),(0,t.useEffect)((function(){f||(u?g():function(){y.current=1;var e=h.current;e.className+=" "+p,e.addEventListener("animationend",g)}())}),[f]),t.createElement(t.Fragment,null,i)}}var _M={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.list.has(e)&&this.list.get(e).forEach((function(n){var i=setTimeout((function(){n.apply(void 0,r)}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(i)}))}},wM=["delay","staleId"];function bM(e){var n=(0,t.useReducer)((function(e){return e+1}),0),r=n[1],i=(0,t.useState)([]),a=i[0],o=i[1],s=(0,t.useRef)(null),u=(0,t.useRef)(new Map).current,c=function(e){return-1!==a.indexOf(e)},l=(0,t.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:c,getToast:function(e){return u.get(e)}}).current;function h(e){var t=e.containerId;!l.props.limit||t&&l.containerId!==t||(l.count-=l.queue.length,l.queue=[])}function f(e){o((function(t){return pM(e)?t.filter((function(t){return t!==e})):[]}))}function d(){var e=l.queue.shift();v(e.toastContent,e.toastProps,e.staleId)}function p(e,n){var i=n.delay,a=n.staleId,o=uM(n,wM);if(yM(e)&&!function(e){return!s.current||l.props.enableMultiContainer&&e.containerId!==l.props.containerId||u.has(e.toastId)&&null==e.updateId}(o)){var c=o.toastId,h=o.updateId,p=o.data,y=l.props,m=function(){return f(c)},g=null==h;g&&l.count++;var k,_,w={toastId:c,updateId:h,isLoading:o.isLoading,theme:o.theme||y.theme,icon:null!=o.icon?o.icon:y.icon,isIn:!1,key:o.key||l.toastKey++,type:o.type,closeToast:m,closeButton:o.closeButton,rtl:y.rtl,position:o.position||y.position,transition:o.transition||y.transition,className:dM(o.className||y.toastClassName),bodyClassName:dM(o.bodyClassName||y.bodyClassName),style:o.style||y.toastStyle,bodyStyle:o.bodyStyle||y.bodyStyle,onClick:o.onClick||y.onClick,pauseOnHover:lM(o.pauseOnHover)?o.pauseOnHover:y.pauseOnHover,pauseOnFocusLoss:lM(o.pauseOnFocusLoss)?o.pauseOnFocusLoss:y.pauseOnFocusLoss,draggable:lM(o.draggable)?o.draggable:y.draggable,draggablePercent:o.draggablePercent||y.draggablePercent,draggableDirection:o.draggableDirection||y.draggableDirection,closeOnClick:lM(o.closeOnClick)?o.closeOnClick:y.closeOnClick,progressClassName:dM(o.progressClassName||y.progressClassName),progressStyle:o.progressStyle||y.progressStyle,autoClose:!o.isLoading&&(k=o.autoClose,_=y.autoClose,!1===k||cM(k)&&k>0?k:_),hideProgressBar:lM(o.hideProgressBar)?o.hideProgressBar:y.hideProgressBar,progress:o.progress,role:o.role||y.role,deleteToast:function(){u.delete(c);var e=l.queue.length;if(l.count=pM(c)?l.count-1:l.count-l.displayedToast,l.count<0&&(l.count=0),e>0){var t=pM(c)?1:l.props.limit;if(1===e||1===t)l.displayedToast++,d();else{var n=t>e?e:t;l.displayedToast=n;for(var i=0;i<n;i++)d()}}else r()}};fM(o.onOpen)&&(w.onOpen=o.onOpen),fM(o.onClose)&&(w.onClose=o.onClose),w.closeButton=y.closeButton,!1===o.closeButton||yM(o.closeButton)?w.closeButton=o.closeButton:!0===o.closeButton&&(w.closeButton=!yM(y.closeButton)||y.closeButton);var b=e;(0,t.isValidElement)(e)&&!hM(e.type)?b=(0,t.cloneElement)(e,{closeToast:m,toastProps:w,data:p}):fM(e)&&(b=e({closeToast:m,toastProps:w,data:p})),y.limit&&y.limit>0&&l.count>y.limit&&g?l.queue.push({toastContent:b,toastProps:w,staleId:a}):cM(i)&&i>0?setTimeout((function(){v(b,w,a)}),i):v(b,w,a)}}function v(e,t,n){var r=t.toastId;n&&u.delete(n),u.set(r,{content:e,props:t}),o((function(e){return[].concat(e,[r]).filter((function(e){return e!==n}))}))}return(0,t.useEffect)((function(){return l.containerId=e.containerId,_M.cancelEmit(3).on(0,p).on(1,(function(e){return s.current&&f(e)})).on(5,h).emit(2,l),function(){return _M.emit(3,l)}}),[]),(0,t.useEffect)((function(){l.isToastActive=c,l.displayedToast=a.length,_M.emit(4,a.length,e.containerId)}),[a]),(0,t.useEffect)((function(){l.props=e})),{getToastToRender:function(t){var n=new Map,r=Array.from(u.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:s,isToastActive:c}}function xM(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function EM(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function IM(e){var n=(0,t.useState)(!1),r=n[0],i=n[1],a=(0,t.useState)(!1),o=a[0],s=a[1],u=(0,t.useRef)(null),c=(0,t.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=(0,t.useRef)(e),h=e.autoClose,f=e.pauseOnHover,d=e.closeToast,p=e.onClick,v=e.closeOnClick;function y(t){if(e.draggable){c.didMove=!1,document.addEventListener("mousemove",_),document.addEventListener("mouseup",w),document.addEventListener("touchmove",_),document.addEventListener("touchend",w);var n=u.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=n.getBoundingClientRect(),n.style.transition="",c.x=xM(t.nativeEvent),c.y=EM(t.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function m(){if(c.boundingRect){var t=c.boundingRect,n=t.top,r=t.bottom,i=t.left,a=t.right;e.pauseOnHover&&c.x>=i&&c.x<=a&&c.y>=n&&c.y<=r?k():g()}}function g(){i(!0)}function k(){i(!1)}function _(t){var n=u.current;c.canDrag&&n&&(c.didMove=!0,r&&k(),c.x=xM(t),c.y=EM(t),"x"===e.draggableDirection?c.delta=c.x-c.start:c.delta=c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),n.style.transform="translate"+e.draggableDirection+"("+c.delta+"px)",n.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance)))}function w(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",w);var t=u.current;if(c.canDrag&&c.didMove&&t){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return s(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,t.useEffect)((function(){l.current=e})),(0,t.useEffect)((function(){return u.current&&u.current.addEventListener("d",g,{once:!0}),fM(e.onOpen)&&e.onOpen((0,t.isValidElement)(e.children)&&e.children.props),function(){var e=l.current;fM(e.onClose)&&e.onClose((0,t.isValidElement)(e.children)&&e.children.props)}}),[]),(0,t.useEffect)((function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||k();window.addEventListener("focus",g),window.addEventListener("blur",k)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",k))}}),[e.pauseOnFocusLoss]);var b={onMouseDown:y,onTouchStart:y,onMouseUp:m,onTouchEnd:m};return h&&f&&(b.onMouseEnter=k,b.onMouseLeave=g),v&&(b.onClick=function(e){p&&p(e),c.canCloseOnClick&&d()}),{playToast:g,pauseToast:k,isRunning:r,preventExitTransition:o,toastRef:u,eventHandlers:b}}function TM(e){var n=e.closeToast,r=e.theme,i=e.ariaLabel,a=void 0===i?"close":i;return(0,t.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+r,type:"button",onClick:function(e){e.stopPropagation(),n(e)},"aria-label":a},(0,t.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},(0,t.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function SM(e){var n,r,i=e.delay,a=e.isRunning,o=e.closeToast,s=e.type,u=e.hide,c=e.className,l=e.style,h=e.controlledProgress,f=e.progress,d=e.rtl,p=e.isIn,v=e.theme,y=sM({},l,{animationDuration:i+"ms",animationPlayState:a?"running":"paused",opacity:u?0:1});h&&(y.transform="scaleX("+f+")");var m=oM("Toastify__progress-bar",h?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+v,"Toastify__progress-bar--"+s,((n={})["Toastify__progress-bar--rtl"]=d,n)),g=fM(c)?c({rtl:d,type:s,defaultClassName:m}):oM(m,c),k=((r={})[h&&f>=1?"onTransitionEnd":"onAnimationEnd"]=h&&f<1?null:function(){p&&o()},r);return(0,t.createElement)("div",Object.assign({role:"progressbar","aria-hidden":u?"true":"false","aria-label":"notification timer",className:g,style:y},k))}SM.defaultProps={type:gM.DEFAULT,hide:!1};var CM=["theme","type"],NM=function(e){var n=e.theme,r=e.type,i=uM(e,CM);return(0,t.createElement)("svg",Object.assign({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-"+r+")"},i))};var PM={info:function(e){return(0,t.createElement)(NM,Object.assign({},e),(0,t.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return(0,t.createElement)(NM,Object.assign({},e),(0,t.createElement)("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return(0,t.createElement)(NM,Object.assign({},e),(0,t.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return(0,t.createElement)(NM,Object.assign({},e),(0,t.createElement)("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return(0,t.createElement)("div",{className:"Toastify__spinner"})}},AM=function(e){var n,r,i=IM(e),a=i.isRunning,o=i.preventExitTransition,s=i.toastRef,u=i.eventHandlers,c=e.closeButton,l=e.children,h=e.autoClose,f=e.onClick,d=e.type,p=e.hideProgressBar,v=e.closeToast,y=e.transition,m=e.position,g=e.className,k=e.style,_=e.bodyClassName,w=e.bodyStyle,b=e.progressClassName,x=e.progressStyle,E=e.updateId,I=e.role,T=e.progress,S=e.rtl,C=e.toastId,N=e.deleteToast,P=e.isIn,A=e.isLoading,R=e.icon,D=e.theme,O=oM("Toastify__toast","Toastify__toast-theme--"+D,"Toastify__toast--"+d,((n={})["Toastify__toast--rtl"]=S,n)),L=fM(g)?g({rtl:S,position:m,type:d,defaultClassName:O}):oM(O,g),M=!!T,F=PM[d],U={theme:D,type:d},V=F&&F(U);return!1===R?V=void 0:fM(R)?V=R(U):(0,t.isValidElement)(R)?V=(0,t.cloneElement)(R,U):hM(R)?V=R:A&&(V=PM.spinner()),(0,t.createElement)(y,{isIn:P,done:N,position:m,preventExitTransition:o,nodeRef:s},(0,t.createElement)("div",Object.assign({id:C,onClick:f,className:L},u,{style:k,ref:s}),(0,t.createElement)("div",Object.assign({},P&&{role:I},{className:fM(_)?_({type:d}):oM("Toastify__toast-body",_),style:w}),V&&(0,t.createElement)("div",{className:oM("Toastify__toast-icon",(r={},r["Toastify--animate-icon Toastify__zoom-enter"]=!A,r))},V),(0,t.createElement)("div",null,l)),function(e){if(e){var n={closeToast:v,type:d,theme:D};return fM(e)?e(n):(0,t.isValidElement)(e)?(0,t.cloneElement)(e,n):void 0}}(c),(h||M)&&(0,t.createElement)(SM,Object.assign({},E&&!M?{key:"pb-"+E}:{},{rtl:S,theme:D,delay:h,isRunning:a,isIn:P,closeToast:v,hide:p,type:d,style:x,className:b,controlledProgress:M,progress:T}))))},RM=kM({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),DM=function(e){var n=bM(e),r=n.getToastToRender,i=n.containerRef,a=n.isToastActive,o=e.className,s=e.style,u=e.rtl,c=e.containerId;function l(e){var t,n=oM("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=u,t));return fM(o)?o({position:e,rtl:u,defaultClassName:n}):oM(n,dM(o))}return(0,t.createElement)("div",{ref:i,className:"Toastify",id:c},r((function(e,n){var r=n.length?sM({},s):sM({},s,{pointerEvents:"none"});return(0,t.createElement)("div",{className:l(e),style:r,key:"container-"+e},n.map((function(e){var n=e.content,r=e.props;return(0,t.createElement)(AM,Object.assign({},r,{isIn:a(r.toastId),key:"toast-"+r.key,closeButton:!0===r.closeButton?TM:r.closeButton}),n)})))})))};DM.defaultProps={position:mM.TOP_RIGHT,transition:RM,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:TM,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var OM,LM,MM,FM=new Map,UM=[],VM=!1;function jM(){return Math.random().toString(36).substring(2,9)}function qM(e){return e&&(hM(e.toastId)||cM(e.toastId))?e.toastId:jM()}function BM(e,n){return FM.size>0?_M.emit(0,e,n):(UM.push({content:e,options:n}),VM&&vM&&(VM=!1,LM=document.createElement("div"),document.body.appendChild(LM),(0,r.render)((0,t.createElement)(DM,Object.assign({},MM)),LM))),n.toastId}function zM(e,t){return sM({},t,{type:t&&t.type||e,toastId:qM(t)})}function WM(e){return function(t,n){return BM(t,zM(e,n))}}function KM(e,t){return BM(e,zM(gM.DEFAULT,t))}KM.loading=function(e,t){return BM(e,zM(gM.DEFAULT,sM({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},KM.promise=function(e,t,n){var r,i=t.pending,a=t.error,o=t.success;i&&(r=hM(i)?KM.loading(i,n):KM.loading(i.render,sM({},n,i)));var s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=function(e,t,i){if(null!=t){var a=sM({type:e},s,n,{data:i}),o=hM(t)?{render:t}:t;return r?KM.update(r,sM({},a,o)):KM(o.render,sM({},a,o)),i}KM.dismiss(r)},c=fM(e)?e():e;return c.then((function(e){return u("success",o,e)})).catch((function(e){return u("error",a,e)})),c},KM.success=WM(gM.SUCCESS),KM.info=WM(gM.INFO),KM.error=WM(gM.ERROR),KM.warning=WM(gM.WARNING),KM.warn=KM.warning,KM.dark=function(e,t){return BM(e,zM(gM.DEFAULT,sM({theme:"dark"},t)))},KM.dismiss=function(e){return _M.emit(1,e)},KM.clearWaitingQueue=function(e){return void 0===e&&(e={}),_M.emit(5,e)},KM.isActive=function(e){var t=!1;return FM.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},KM.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=FM.get(n||OM);return r?r.getToast(e):null}(e,t);if(n){var r=n.props,i=n.content,a=sM({},r,t,{toastId:t.toastId||e,updateId:jM()});a.toastId!==e&&(a.staleId=e);var o=a.render||i;delete a.render,BM(o,a)}}),0)},KM.done=function(e){KM.update(e,{progress:1})},KM.onChange=function(e){return fM(e)&&_M.on(4,e),function(){fM(e)&&_M.off(4,e)}},KM.configure=function(e){void 0===e&&(e={}),VM=!0,MM=e},KM.POSITION=mM,KM.TYPE=gM,_M.on(2,(function(e){OM=e.containerId||e,FM.set(OM,e),UM.forEach((function(e){_M.emit(0,e.content,e.options)})),UM=[]})).on(3,(function(e){FM.delete(e.containerId||e),0===FM.size&&_M.off(0).off(1).off(5),vM&&LM&&document.body.removeChild(LM)}));function GM(){var e=l((0,t.useState)(""),2),n=e[0],r=e[1],i=l((0,t.useState)({}),2),o=i[0],s=i[1],u=Ei.firestore.Timestamp.now().toDate().toLocaleString(),c=(0,t.useRef)(null),h=function(e,n){var r=l((0,t.useState)(n),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){var t=function(t){null===e.current||e.current.contains(t.target)||a(!i)};return i&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[i,e]),[i,a]}(c,!1),d=l(h,2),p=d[0],y=d[1],m=l((0,t.useState)(!1),2),g=m[0],k=m[1],w=l((0,t.useState)(""),2),b=(w[0],w[1]),x=Bg(),E=x.currentUser,I=x.logout,T=gk();(0,t.useEffect)((function(){jg.child("Users").child(E.uid).child("posts").on("value",(function(e){null!==e.val()?s(v({},e.val())):s({})}))}),[E.uid]);function S(){return(S=a(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(""),e.prev=1,e.next=4,I();case 4:T("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),b("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("div",{className:"container",children:(0,_.jsxs)("div",{className:"row",children:[(0,_.jsx)("div",{className:"col-lg d-flex align-items-center justify-content-center tweet-profile",children:(0,_.jsxs)("div",{children:[(0,_.jsx)("h2",{className:"text-center mb-4",children:"Hello"}),(0,_.jsxs)("p",{className:"user",children:[" ",E.email]}),(0,_.jsx)("button",{className:"btn-logout",variant:"link",onClick:function(){return S.apply(this,arguments)},children:"Log Out"})]})}),(0,_.jsxs)("div",{className:"col-lg",children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("input",{className:"input",type:"text",placeholder:"What's happening?",onChange:function(e){r(e.target.value)},value:n}),(0,_.jsx)("span",{children:(0,_.jsx)("button",{className:"btn btn-tweet",onClick:function(e){e.preventDefault(),jg.child("Users").child(E.uid).child("posts").push({content:n,created:u,fav:g}),r("")},disabled:/^\s/.test(n)||0===n.length,children:"Tweet"})})]}),(0,_.jsx)("div",{className:"tweet-container",children:Object.keys(o).reverse().map((function(e,t){return(0,_.jsx)("div",{children:(0,_.jsx)("ol",{className:"tweet-list",children:(0,_.jsx)("li",{className:"tweet-card",children:(0,_.jsxs)("div",{className:"tweet-content",children:[(0,_.jsxs)("div",{className:"tweet-header",children:[(0,_.jsxs)("span",{className:"fullname",children:[(0,_.jsx)("strong",{children:E.email}),(0,_.jsx)("span",{className:"username",children:(0,_.jsxs)("span",{className:"tweet-time",children:["\xa0 \xb7 \xa0 ",o[e].created]})})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("button",{className:"btn",onClick:function(){return y(e)},children:(0,_.jsx)("svg",{width:"21",height:"21",fill:"currentColor",viewBox:"0 0 21 21",className:"r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-1hdv0qi",children:(0,_.jsxs)("g",{children:[(0,_.jsx)("circle",{cx:"5",cy:"12",r:"2"}),(0,_.jsx)("circle",{cx:"12",cy:"12",r:"2"}),(0,_.jsx)("circle",{cx:"19",cy:"12",r:"2"})]})})}),p===e?(0,_.jsx)("div",{ref:c,className:"menu",children:(0,_.jsx)("ul",{children:(0,_.jsx)("li",{children:(0,_.jsx)("button",{className:"delete-btn",onClick:function(){return function(e){window.confirm("Are you sure you want to delete it ?")&&jg.child("Users/".concat(E.uid,"/posts/").concat(e)).remove((function(e){e?KM.error(e):KM.success("deleting from the database")}))}(e)},children:"Delete"})})})}):null]})]}),(0,_.jsx)("div",{className:"tweet-text",children:(0,_.jsx)("p",{children:o[e].content})}),(0,_.jsxs)("div",{className:"tweet-footer",children:[(0,_.jsx)("span",{children:(0,_.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-chat",viewBox:"0 0 16 16",children:(0,_.jsx)("path",{d:"M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"})})}),(0,_.jsx)("span",{children:(0,_.jsx)("svg",{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 24 24",children:(0,_.jsx)("g",{children:(0,_.jsx)("path",{d:"M23.77 15.67c-.292-.293-.767-.293-1.06 0l-2.22 2.22V7.65c0-2.068-1.683-3.75-3.75-3.75h-5.85c-.414 0-.75.336-.75.75s.336.75.75.75h5.85c1.24 0 2.25 1.01 2.25 2.25v10.24l-2.22-2.22c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l3.5 3.5c.145.147.337.22.53.22s.383-.072.53-.22l3.5-3.5c.294-.292.294-.767 0-1.06zm-10.66 3.28H7.26c-1.24 0-2.25-1.01-2.25-2.25V6.46l2.22 2.22c.148.147.34.22.532.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06l-3.5-3.5c-.293-.294-.768-.294-1.06 0l-3.5 3.5c-.294.292-.294.767 0 1.06s.767.293 1.06 0l2.22-2.22V16.7c0 2.068 1.683 3.75 3.75 3.75h5.85c.414 0 .75-.336.75-.75s-.337-.75-.75-.75z"})})})}),(0,_.jsx)("button",{className:"tweet-footer-btn",onClick:function(){!function(e){k(!g),jg.child("Users/".concat(E.uid,"/posts/").concat(e)).update({fav:!g})}(e)},children:(0,_.jsx)("span",{children:(0,_.jsx)("svg",{width:"20",height:"20",fill:!0===o[e].fav?"red":"black",viewBox:"0 0 24 24",className:"r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-1hdv0qi",children:(0,_.jsx)("g",{children:(0,_.jsx)("path",{d:"M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"})})})})})]})]})})})},t)}))})]})]})})})}function HM(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=Bg().login,i=l((0,t.useState)(""),2),o=i[0],s=i[1],u=l((0,t.useState)(!1),2),c=u[0],h=u[1],d=gk();function p(){return(p=a(f().mark((function t(i){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.preventDefault(),t.prev=1,s(""),h(!0),t.next=6,r(e.current.value,n.current.value);case 6:d("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),s("Failed to log in");case 12:h(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(Q.Body,{children:[(0,_.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),o&&(0,_.jsx)(ot,{variant:"danger",children:o}),(0,_.jsxs)(Zt,{onSubmit:function(e){return p.apply(this,arguments)},children:[(0,_.jsxs)(Zt.Group,{id:"email",children:[(0,_.jsx)(Zt.Label,{children:"Email"}),(0,_.jsx)(Zt.Control,{type:"email",ref:e,required:!0})]}),(0,_.jsxs)(Zt.Group,{id:"password",children:[(0,_.jsx)(Zt.Label,{children:"Password"}),(0,_.jsx)(Zt.Control,{type:"password",ref:n,required:!0})]}),(0,_.jsx)(nn,{disabled:c,className:"w-100 btn-bg mt-4",type:"submit",children:"Log In"})]})]}),(0,_.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account?",(0,_.jsx)(Pk,{to:"/signup",children:" Sign Up"})]})]})}function QM(e){var t=e.children;return Bg().currentUser?t:(0,_.jsx)(wk,{to:"/login"})}var YM=["bsPrefix","fluid","as","className"],$M=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,a=void 0===i?"div":i,o=e.className,s=m(e,YM),u=x(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,_.jsx)(a,v(v({ref:t},s),{},{className:k()(o,r?"".concat(u).concat(c):u)}))}));$M.displayName="Container",$M.defaultProps={fluid:!1};var JM=$M;var XM=function(){return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(JM,{className:"d-flex align-items-center justify-content-center",children:(0,_.jsx)("div",{className:"",style:{minWidth:"400px"},children:(0,_.jsx)(zg,{children:(0,_.jsx)(Nk,{children:(0,_.jsxs)(Ek,{children:[(0,_.jsx)(bk,{path:"/",element:(0,_.jsx)(QM,{children:(0,_.jsx)(GM,{})})}),(0,_.jsx)(bk,{path:"/signup",element:(0,_.jsx)(Ak,{})}),(0,_.jsx)(bk,{path:"/login",element:(0,_.jsx)(HM,{})})]})})})})})})},ZM=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,_.jsx)(t.StrictMode,{children:(0,_.jsx)(XM,{})}),document.getElementById("root")),ZM()}()}();
//# sourceMappingURL=main.ef729a47.js.map